[
    {
        "id": "265ccb982c0cfc2a",
        "type": "tab",
        "label": "Initialize",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b994839ba412691b",
        "type": "tab",
        "label": "Data ACQ",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1403119fa516edbc",
        "type": "tab",
        "label": "Controls",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c66b7a551a64a662",
        "type": "tab",
        "label": "Column 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "10001e665f59bd89",
        "type": "tab",
        "label": "column 2",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "075d77875852cf19",
        "type": "tab",
        "label": "Green house & shared (3)",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "da547dd676c18c16",
        "type": "tab",
        "label": "CSV Logging",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "897898ed0b432706",
        "type": "tab",
        "label": "automation paramters",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "95d7a662357d5be5",
        "type": "tab",
        "label": "Automation Process",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5e998f46e7500f44",
        "type": "tab",
        "label": "Automation monitoring",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7faa3ab42fdf3d0b",
        "type": "tab",
        "label": "Automatic controls",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7321c2c219fd05d6",
        "type": "tab",
        "label": "safety",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8d17c08d50d1770f",
        "type": "ui-base",
        "name": "My Dashboard",
        "path": "/dashboard",
        "appIcon": "",
        "includeClientData": true,
        "acceptsClientConfig": [
            "ui-notification",
            "ui-control"
        ],
        "showPathInSidebar": false,
        "headerContent": "page",
        "navigationStyle": "default",
        "titleBarStyle": "default",
        "showReconnectNotification": true,
        "notificationDisplayTime": 1,
        "showDisconnectNotification": true,
        "allowInstall": true
    },
    {
        "id": "d3e8251c2f05a30e",
        "type": "modbus-client",
        "name": "NodeRedModbusSerMaster",
        "clienttype": "serial",
        "bufferCommands": true,
        "stateLogEnabled": true,
        "queueLogEnabled": true,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": 502,
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyAMA5",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "19200",
        "serialDatabits": 8,
        "serialStopbits": 1,
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": 43,
        "commandDelay": 10,
        "clientTimeout": 1000,
        "reconnectOnTimeout": false,
        "reconnectTimeout": 2000,
        "parallelUnitIdsAllowed": true,
        "showErrors": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "c2b3dd79366cad0c",
        "type": "serial-port",
        "name": "tusb",
        "serialport": "/dev/ttyUSB0",
        "serialbaud": "9600",
        "databits": 8,
        "parity": "none",
        "stopbits": 1,
        "waitfor": "0xAA",
        "dtr": "none",
        "rts": "none",
        "cts": "none",
        "dsr": "none",
        "newline": "4",
        "bin": "bin",
        "out": "count",
        "addchar": "",
        "responsetimeout": "1000"
    },
    {
        "id": "b423e96545d4ae28",
        "type": "ui-theme",
        "name": "Default Theme",
        "colors": {
            "surface": "#0094ce",
            "primary": "#0094ce",
            "bgPage": "#eeeeee",
            "groupBg": "#ffffff",
            "groupOutline": "#787878"
        },
        "sizes": {
            "density": "comfortable",
            "pagePadding": "12px",
            "groupGap": "12px",
            "groupBorderRadius": "4px",
            "widgetGap": "20px"
        }
    },
    {
        "id": "8aa6d6140cfde471",
        "type": "ui-page",
        "name": "My Process Control",
        "ui": "8d17c08d50d1770f",
        "path": "/page1",
        "icon": "home",
        "layout": "grid",
        "theme": "b423e96545d4ae28",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 1,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "c34f777b31ff0d3e",
        "type": "ui-group",
        "name": "Relays - Column 1",
        "page": "8aa6d6140cfde471",
        "width": "6",
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "ps-left",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "6cf2ef424cfcf0b9",
        "type": "ui-group",
        "name": "Relays - Column 2",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 2,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "b135539d7634acf8",
        "type": "ui-group",
        "name": "Fan - Column 1",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 3,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "13816c2f51c27294",
        "type": "ui-group",
        "name": "Fan - Column 2",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 4,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "44de1c430cbb5601",
        "type": "ui-group",
        "name": "EE872 Out (1A02)",
        "page": "8aa6d6140cfde471",
        "width": "3",
        "height": 1,
        "order": 12,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "a94205eff71ff9ec",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "ac6a5966878e6de8",
        "type": "ui-group",
        "name": "EE872 Out (2A12)",
        "page": "8aa6d6140cfde471",
        "width": "3",
        "height": 1,
        "order": 14,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "1b0119535e1d3350",
        "type": "ui-group",
        "name": "EE872 In (1A01)",
        "page": "8aa6d6140cfde471",
        "width": "3",
        "height": 1,
        "order": 11,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "b4e0dab4bd8c05b7",
        "type": "ui-group",
        "name": "EE872 In (2A11)",
        "page": "8aa6d6140cfde471",
        "width": "3",
        "height": 1,
        "order": 13,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "be8e2d192e710aa5",
        "type": "ui-group",
        "name": "Pressure/Energy",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 7,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "14ffaba87334b6a7",
        "type": "ui-group",
        "name": "Pressure/Energy",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 8,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "d0e68dc802300da0",
        "type": "ui-group",
        "name": "Velocity (1A08) ",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 9,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "c4b796b294db2552",
        "type": "ui-group",
        "name": "Velocity (2A18)",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 10,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "7aa27d4b2d1c0ea6",
        "type": "ui-group",
        "name": "Heater - Column 1",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 5,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "1150877cb6638246",
        "type": "ui-group",
        "name": "Heater - Column 2",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 6,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "e86ce08b06c0beb4",
        "type": "ui-group",
        "name": "Logging",
        "page": "8aa6d6140cfde471",
        "width": 6,
        "height": 1,
        "order": 15,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "81f1ac7f76ca28a5",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": 8086,
        "protocol": "http",
        "database": "database",
        "name": "InfluxDB-out",
        "usetls": false,
        "tls": "",
        "influxdbVersion": "2.0",
        "url": "http://localhost:8086",
        "timeout": 10,
        "rejectUnauthorized": true
    },
    {
        "id": "cade41266e313ff1",
        "type": "global-config",
        "env": [
            {
                "name": "TestMode",
                "value": "false",
                "type": "bool"
            }
        ]
    },
    {
        "id": "2e4e995892bfe9fe",
        "type": "ui-page",
        "name": "Automation Paramters",
        "ui": "8d17c08d50d1770f",
        "path": "/AT_params",
        "icon": "home",
        "layout": "grid",
        "theme": "b423e96545d4ae28",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 2,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "42e80e50107ea143",
        "type": "ui-group",
        "name": "Auto mode control",
        "page": "2e4e995892bfe9fe",
        "width": "2",
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "16c2d68fad5258bc",
        "type": "ui-group",
        "name": "Shared Parameters",
        "page": "2e4e995892bfe9fe",
        "width": 10,
        "height": 1,
        "order": 4,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "b4435693f46f8ae5",
        "type": "ui-group",
        "name": "Column 1 Parameters",
        "page": "2e4e995892bfe9fe",
        "width": 6,
        "height": 1,
        "order": 5,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "61db9a8b734103fe",
        "type": "ui-group",
        "name": "column 2 parameters",
        "page": "2e4e995892bfe9fe",
        "width": 6,
        "height": 1,
        "order": 6,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "0bc3f93a938c3005",
        "type": "ui-group",
        "name": "Save commands",
        "page": "2e4e995892bfe9fe",
        "width": 12,
        "height": 1,
        "order": 7,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "1f410851f98d58aa",
        "type": "ui-page",
        "name": "Testing",
        "ui": "8d17c08d50d1770f",
        "path": "/page3",
        "icon": "home",
        "layout": "grid",
        "theme": "b423e96545d4ae28",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 3,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "8e9cba7b0e41fe3c",
        "type": "ui-group",
        "name": "TestGroup 1",
        "page": "1f410851f98d58aa",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "edb3219708e56efd",
        "type": "ui-group",
        "name": "Column 1",
        "page": "2e4e995892bfe9fe",
        "width": 5,
        "height": 1,
        "order": 2,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "a2abbb9410c1e74d",
        "type": "ui-group",
        "name": "Column 2",
        "page": "2e4e995892bfe9fe",
        "width": 5,
        "height": 1,
        "order": 3,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "0becb6a714bc83bf",
        "type": "revpi-server",
        "host": "localhost",
        "port": 8000,
        "user": "",
        "password": "",
        "rejectUnauthorized": false,
        "ca": ""
    },
    {
        "id": "ui_tab1",
        "type": "ui_tab",
        "name": "Control Panel",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ui_group1",
        "type": "ui_group",
        "name": "Loop Control",
        "tab": "ui_tab1",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "15fa2dfd1a943e0c",
        "type": "node-red-contrib-whatsapp-cmb-account",
        "name": "lotfyPhone"
    },
    {
        "id": "7b923af885d440a6",
        "type": "node-red-contrib-whatsapp-cmb-account",
        "name": "wesely phone"
    },
    {
        "id": "e553c78b0fab920e",
        "type": "change",
        "z": "265ccb982c0cfc2a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "currentColumnTurn",
                "pt": "global",
                "to": "autoParams[\"StartingColumn\"]",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Automation disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Automation disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_finalRegenDone",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "CLMN_2_finalRegenDone",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "efaa1630d60e13e2",
        "type": "debug",
        "z": "265ccb982c0cfc2a",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 540,
        "wires": []
    },
    {
        "id": "17a7f30e1ebf41a1",
        "type": "inject",
        "z": "265ccb982c0cfc2a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$globalContext(\"autoParams\")",
        "payloadType": "jsonata",
        "x": 630,
        "y": 540,
        "wires": [
            [
                "efaa1630d60e13e2"
            ]
        ]
    },
    {
        "id": "45046b63d58459ae",
        "type": "debug",
        "z": "265ccb982c0cfc2a",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 640,
        "wires": []
    },
    {
        "id": "df7ab4e838bcaae0",
        "type": "inject",
        "z": "265ccb982c0cfc2a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$globalContext(\"autoParams\")\t",
        "payloadType": "jsonata",
        "x": 610,
        "y": 640,
        "wires": [
            [
                "45046b63d58459ae"
            ]
        ]
    },
    {
        "id": "0dc1d3a25a4fdc03",
        "type": "inject",
        "z": "265ccb982c0cfc2a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 650,
        "y": 400,
        "wires": [
            [
                "e553c78b0fab920e",
                "f3414174ec3121f6",
                "bd15ac551c208c51"
            ]
        ]
    },
    {
        "id": "f3414174ec3121f6",
        "type": "link out",
        "z": "265ccb982c0cfc2a",
        "name": "Init system",
        "mode": "link",
        "links": [
            "3c96868f0b9621e4",
            "47774455ab8e2c96",
            "80ef6666de84cde2",
            "c05f7cce29a93a77",
            "c5115244cbcb2d9e",
            "48188a019460dd9b",
            "7ddae7dbd89f18a8"
        ],
        "x": 825,
        "y": 460,
        "wires": []
    },
    {
        "id": "38a20642314cf194",
        "type": "link out",
        "z": "265ccb982c0cfc2a",
        "name": "AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7",
            "9d13758f880dfba3"
        ],
        "x": 1005,
        "y": 340,
        "wires": []
    },
    {
        "id": "bd15ac551c208c51",
        "type": "change",
        "z": "265ccb982c0cfc2a",
        "name": "status OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Automation Disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "AutomationStatus",
                "pt": "global",
                "to": "Automation Disabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 340,
        "wires": [
            [
                "38a20642314cf194"
            ]
        ]
    },
    {
        "id": "40448ecd3301b3be",
        "type": "inject",
        "z": "265ccb982c0cfc2a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 160,
        "wires": [
            [
                "4ba4d8e2101a2fa7"
            ]
        ]
    },
    {
        "id": "4ba4d8e2101a2fa7",
        "type": "function",
        "z": "265ccb982c0cfc2a",
        "name": "function 9",
        "func": "\nlet columnTurn = global.get(\"currentColumnTurn\")\nlet pram=global.get(\"autoParams\")[\"StartingColumn\"]\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\nmsg.columnOrder=columnOrder;\nmsg.columnTurn = columnTurn;\nmsg.pram=pram;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 160,
        "wires": [
            [
                "41651d4e788373f5"
            ]
        ]
    },
    {
        "id": "41651d4e788373f5",
        "type": "debug",
        "z": "265ccb982c0cfc2a",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 960,
        "y": 160,
        "wires": []
    },
    {
        "id": "f6a92e3d31ba8e29",
        "type": "modbus-flex-getter",
        "z": "b994839ba412691b",
        "name": "Modbus Flex Getter",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "logIOActivities": false,
        "server": "d3e8251c2f05a30e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": true,
        "keepMsgProperties": true,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 890,
        "y": 220,
        "wires": [
            [
                "c3558a1879d567e6",
                "efe0a83f21cad434",
                "8e6bb9f81f1d993e",
                "e575f9e1592fb52b"
            ],
            []
        ]
    },
    {
        "id": "c3558a1879d567e6",
        "type": "modbus-response",
        "z": "b994839ba412691b",
        "name": "",
        "registerShowMax": 20,
        "x": 1130,
        "y": 160,
        "wires": []
    },
    {
        "id": "20dab28204a69cfa",
        "type": "function",
        "z": "b994839ba412691b",
        "name": "function 3",
        "func": "\nglobal.set(\"addrInfo\", [\n  // VFDs\n  { tag: \"LVFD\", unitid: 101, fc: 3, address: 2057, quantity: 6 },\n  { tag: \"2FN11\", unitid: 201, fc: 3, address: 2057, quantity: 6 },\n\n  // Energy Meters\n  { tag: \"LEM\", unitid: 102, fc: 4, address: 12, quantity: 2 },\n  { tag: \"REM\", unitid: 202, fc: 4, address: 12, quantity: 2 },\n\n  // PIDs (read variables block 1..15 in one shot)\n  { tag: \"LPID\", unitid: 103, fc: 3, address: 1, quantity: 15 },\n  { tag: \"RPID\", unitid: 203, fc: 3, address: 1, quantity: 15 },\n\n  // EE872 Up (grouped) (1A02 & 2A12)\n  // CO2 avg+raw (0x424..0x427)\n  { tag: \"LUPEE872CO2\", unitid: 111, fc: 4, address: 0x424, quantity: 0x04 },\n  { tag: \"RUPEE872CO2\", unitid: 211, fc: 4, address: 0x424, quantity: 0x04 },\n  // Temp+RH (0x3EA..0x3FD)\n  { tag: \"LUPEE872TRH\", unitid: 111, fc: 4, address: 0x3EA, quantity: 0x14 },\n  { tag: \"RUPEE872TRH\", unitid: 211, fc: 4, address: 0x3EA, quantity: 0x14 },\n  // Pressure (0x4B0..0x4B1)\n  { tag: \"LUPEE872P\", unitid: 111, fc: 4, address: 0x4B0, quantity: 0x02 },\n  { tag: \"RUPEE872P\", unitid: 211, fc: 4, address: 0x4B0, quantity: 0x02 },\n\n  // EE872 Down (grouped)\n  { tag: \"LDOWNEE872CO2\", unitid: 112, fc: 4, address: 0x424, quantity: 0x04 },\n  { tag: \"RDOWNEE872CO2\", unitid: 212, fc: 4, address: 0x424, quantity: 0x04 },\n  { tag: \"LDOWNEE872TRH\", unitid: 112, fc: 4, address: 0x3EA, quantity: 0x14 },\n  { tag: \"RDOWNEE872TRH\", unitid: 212, fc: 4, address: 0x3EA, quantity: 0x14 },\n  { tag: \"LDOWNEE872P\", unitid: 112, fc: 4, address: 0x4B0, quantity: 0x02 },\n  { tag: \"RDOWNEE872P\", unitid: 212, fc: 4, address: 0x4B0, quantity: 0x02 },\n\n  // EE600 (as you had)\n  { tag: \"1A05\", unitid: 113, fc: 4, address: 0x4BE, quantity: 0x02 },\n  { tag: \"2A15\", unitid: 213, fc: 4, address: 0x4BE, quantity: 0x02 },\n\n  // EE650 (as you had)\n  { tag: \"LEE650T\", unitid: 114, fc: 4, address: 0x3EA, quantity: 0x02 },\n  { tag: \"REE650T\", unitid: 214, fc: 4, address: 0x3EA, quantity: 0x02 },\n  { tag: \"LEE650AV\", unitid: 114, fc: 4, address: 0x410, quantity: 0x02 },\n  { tag: \"REE650AV\", unitid: 214, fc: 4, address: 0x410, quantity: 0x02 }\n]);\n\nglobal.set(\"index\", 0);\nnode.warn(\"Global variables initialized\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 220,
        "wires": [
            [
                "8d71970a1d17709b"
            ]
        ]
    },
    {
        "id": "8b94c9712d8b0224",
        "type": "inject",
        "z": "b994839ba412691b",
        "name": "Auto Inject Once",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 220,
        "wires": [
            [
                "20dab28204a69cfa"
            ]
        ]
    },
    {
        "id": "f142e082d2e58a6e",
        "type": "function",
        "z": "b994839ba412691b",
        "name": "function 4",
        "func": "\n//msg.payload = global.get(\"addrInfo\")[global.get(\"index\")];\n//msg.topic = global.get(\"addrInfo\")[global.get(\"index\")].tag;\n//global.set(\"index\", global.get(\"index\") == 2 ? 0 : global.get(\"index\") + 1);\n//return msg;\n\nlet addrInfo = global.get(\"addrInfo\");\nlet index = global.get(\"index\") || 0;\n\n// Safety check\nif (!Array.isArray(addrInfo) || addrInfo.length === 0) {\n    node.error(\"addrInfo is not set or empty\", msg);\n    return null;\n}\n\nmsg.payload = addrInfo[index];\nmsg.topic = addrInfo[index].tag;\n\n// Increment index with wrap-around\nglobal.set(\"index\", (index + 1) % addrInfo.length);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 220,
        "wires": [
            [
                "f6a92e3d31ba8e29"
            ]
        ]
    },
    {
        "id": "8d71970a1d17709b",
        "type": "delay",
        "z": "b994839ba412691b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 220,
        "wires": [
            [
                "f142e082d2e58a6e"
            ]
        ]
    },
    {
        "id": "efe0a83f21cad434",
        "type": "delay",
        "z": "b994839ba412691b",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "f142e082d2e58a6e"
            ]
        ]
    },
    {
        "id": "8860c66f06ec6461",
        "type": "function",
        "z": "b994839ba412691b",
        "name": "Switch Function",
        "func": "// =============== Switch Function (32 + 1 outputs, 2-dp rounding) ===============\n// Output map:\n//  1  LU (1A02) CO2 avg        2  LU (1A02) CO2 raw         3  LU (1A02) Temp (°C)      4  LU (1A02) RH (%)        5  LU(1A02) Pressure (hPa)\n//  6  RU (2A12) CO2 avg        7  RU (2A12) CO2 raw         8  RU (2A12) Temp (°C)      9  RU (2A12) RH (%)       10  RU (2A12) Pressure (hPa)\n// 11  LD (1A01) CO2 avg       12  LD (1A01) CO2 raw        13  LD (1A01) Temp (°C)     14  LD (1A01) RH (%)       15  LD (1A01) Pressure (hPa)\n// 16  RD (2A11) CO2 avg       17  RD (2A11) CO2 raw        18  RD (2A11) Temp (°C)     19  RD (2A11) RH (%)       20  RD (2A11) Pressure (hPa)\n// 21  LEE600 (1A05)          22  REE600 (2A15)          23  LEE650T (1A08)(°C)     24  REE650T (2A18) (°C)    25  LEE650AV (1A08) (m/s)\n// 26  REE650AV (2A18)(m/s)   27  LEM watts         28  REM watts        29  LPID block(1..15)  30  RPID block(1..15)\n// 31  LVFD (array→splitter)                 32  2FN11 (array→splitter)\n// 33  Mirrored scalar metrics for Grafana (/metrics flow)\n\n// -------- helpers --------\n\n// E+E float32 values are word-swapped (hi,lo -> lo,hi for bytes)\nfunction readFloat32Swap(r0, r1) {\n  const b = Buffer.alloc(4);\n  b.writeUInt16BE(r1, 0); // low word\n  b.writeUInt16BE(r0, 2); // high word\n  return b.readFloatBE(0);\n}\nfunction f32at(regs, i) { return readFloat32Swap(regs[i], regs[i + 1]); }\n\n// Generic Int32 (big-endian) from two holding registers\nfunction readInt32BE(r0, r1) {\n  const b = Buffer.alloc(4);\n  b.writeUInt16BE(r0, 0);\n  b.writeUInt16BE(r1, 2);\n  return b.readInt32BE(0); // signed\n}\n\n// SDM230 (energy meter): float32, MS-register first (r0 = high reg, r1 = low reg)\nfunction f32be(r0, r1) {\n  const b = Buffer.alloc(4);\n  b.writeUInt16BE(r0, 0); // high reg\n  b.writeUInt16BE(r1, 2); // low  reg\n  return b.readFloatBE(0);\n}\n\n// round to 2 decimals\nfunction round2(v) { return Math.round(v * 100) / 100; }\n\nconst regs = msg.payload;\nconst tag = String(msg.topic || \"\");\n\nif (!Array.isArray(regs)) {\n  //node.error(\"Payload is not an array of registers\", msg);\n  return null;\n}\n\n// ===== MINIMAL CHANGE: make 33 outputs & add a mirror helper =====\nconst out = Array.from({ length: 33 }, () => null);\nconst out33 = [];\nfunction mirror(topic, value, labels) {\n  if (value == null || isNaN(value)) return;\n  out33.push({ topic, payload: Number(value), labels: labels || {} });\n}\n\n// side helpers\nfunction isLeftUp(t) { return /^LU/i.test(t); }\nfunction isRightUp(t) { return /^RU/i.test(t); }\nfunction isLeftDown(t) { return /^LD/i.test(t); }\nfunction isRightDown(t) { return /^RD/i.test(t); }\n\n// ---------- EE872: CO2 block (avg+raw at 0x424..0x427) (LU is 1A08; RU is 2A18; LD is 1A01; RD is 2A11) ----------\n// 1. CALIBRATION CONFIGURATION\nconst CO2_CAL = {\n  LU: { slope: 1.0, offset: 0.0 }, //1A02\n  RU: { slope: 0.9363, offset: -95.209}, //2A12\n  LD: { slope: 0.9913, offset: -36.576 }, //1A01\n  RD: { slope: 0.9639, offset: -53.167 } //2A11\n};\n\n// 2. PROCESSING LOGIC\nif (/EE872CO2$/i.test(tag)) {\n  if (regs.length < 4) { node.error(`${tag} requires 4 registers`, msg); return null; }\n\n  const zone = tag.substring(0, 2).toUpperCase();\n  const avg_val = f32at(regs, 0);\n  const raw_val = round2(f32at(regs, 2)); // 0x426..0x427\n  const co2_initial = round2(avg_val);\n  const co2_calibrated = round2((avg_val * CO2_CAL[zone].slope) + CO2_CAL[zone].offset);\n\n  let idxAvg, idxRaw;\n  if (zone === \"LU\") { idxAvg = 0; idxRaw = 1; }\n  else if (zone === \"RU\") { idxAvg = 5; idxRaw = 6; }\n  else if (zone === \"LD\") { idxAvg = 10; idxRaw = 11; }\n  else if (zone === \"RD\") { idxAvg = 15; idxRaw = 16; }\n\n  out[idxAvg] = { topic: `${zone}.CO2.avg`, payload: co2_calibrated };\n  out[idxRaw] = { topic: `${zone}.CO2.raw`, payload: raw_val };\n\n  mirror(`${zone}.CO2.calibrated`, co2_calibrated, { zone: zone.toLowerCase(), status: \"calibrated\" });\n  mirror(`${zone}.CO2.initial`, co2_initial, { zone: zone.toLowerCase(), status: \"initial\" });\n  mirror(`${zone}.CO2.raw`, raw_val, { zone: zone.toLowerCase(), status: \"raw\" });\n  out[32] = out33;\n  return out;\n} \n\n// ---------- EE872: TRH wide block (Temp at 0x3EA..0x3EB, RH at 0x3FC..0x3FD) (LU is 1A08; RU is 2A18; LD is 1A01; RD is 2A11) ----------\nif (/EE872TRH$/i.test(tag)) {\n  if (regs.length < 20) { node.error(`${tag} requires 20 registers`, msg); return null; }\n  const temperature_c = round2(f32at(regs, 0));   // 0x3EA..0x3EB\n  const rh_percent = round2(f32at(regs, 18));     // 0x3FC..0x3FD\n\n  if (isLeftUp(tag)) {\n    out[2] = { topic: \"LU.Temp.C\", payload: temperature_c };\n    out[3] = { topic: \"LU.RH.%\", payload: rh_percent };\n    mirror(\"LU.Temp.C\", temperature_c, { zone: \"lu\" });\n    mirror(\"LU.RH.%\", rh_percent, { zone: \"lu\" });\n  }\n  else if (isRightUp(tag)) {\n    out[7] = { topic: \"RU.Temp.C\", payload: temperature_c };\n    out[8] = { topic: \"RU.RH.%\", payload: rh_percent };\n    mirror(\"RU.Temp.C\", temperature_c, { zone: \"ru\" });\n    mirror(\"RU.RH.%\", rh_percent, { zone: \"ru\" });\n  }\n  else if (isLeftDown(tag)) {\n    out[12] = { topic: \"LD.Temp.C\", payload: temperature_c };\n    out[13] = { topic: \"LD.RH.%\", payload: rh_percent };\n    mirror(\"LD.Temp.C\", temperature_c, { zone: \"ld\" });\n    mirror(\"LD.RH.%\", rh_percent, { zone: \"ld\" });\n  }\n  else if (isRightDown(tag)) {\n    out[17] = { topic: \"RD.Temp.C\", payload: temperature_c };\n    out[18] = { topic: \"RD.RH.%\", payload: rh_percent };\n    mirror(\"RD.Temp.C\", temperature_c, { zone: \"rd\" });\n    mirror(\"RD.RH.%\", rh_percent, { zone: \"rd\" });\n  }\n  else node.warn(`Unhandled TRH tag: ${tag}`);\n\n  out[32] = out33;\n  return out;\n}\n\n// ---------- EE872: Pressure (0x4B0..0x4B1)(LU is 1A08; RU is 2A18; LD is 1A01; RD is 2A11) ----------\nif (/EE872P$/i.test(tag)) {\n  if (regs.length < 2) { node.error(`${tag} requires 2 registers`, msg); return null; }\n  const pressure_hpa = round2(f32at(regs, 0));\n\n  if (isLeftUp(tag)) {\n    out[4] = { topic: \"LU.P.hPa\", payload: pressure_hpa };\n    mirror(\"LU.P.hPa\", pressure_hpa, { zone: \"lu\" });\n  }\n  else if (isRightUp(tag)) {\n    out[9] = { topic: \"RU.P.hPa\", payload: pressure_hpa };\n    mirror(\"RU.P.hPa\", pressure_hpa, { zone: \"ru\" });\n  }\n  else if (isLeftDown(tag)) {\n    out[14] = { topic: \"LD.P.hPa\", payload: pressure_hpa };\n    mirror(\"LD.P.hPa\", pressure_hpa, { zone: \"ld\" });\n  }\n  else if (isRightDown(tag)) {\n    out[19] = { topic: \"RD.P.hPa\", payload: pressure_hpa };\n    mirror(\"RD.P.hPa\", pressure_hpa, { zone: \"rd\" });\n  }\n  else node.warn(`Unhandled Pressure tag: ${tag}`);\n\n  out[32] = out33;\n  return out;\n}\n\n// ---------- EE600 / EE650 (single float32 swap) (LEE650 is 1A08; REE650 is 2A18; LEE600 is 1A05; REE600 is 2A15) ----------\nif (tag === \"1A05\" || tag === \"2A15\" || tag === \"LEE650T\" || tag === \"REE650T\" || tag === \"LEE650AV\" || tag === \"REE650AV\") {\n  if (regs.length < 2) { node.error(`${tag} requires 2 registers`, msg); return null; }\n  const val = round2(f32at(regs, 0));\n\n  switch (tag) {\n    case \"1A05\": out[20] = { topic: \"1A05\", payload: val }; mirror(\"1A05\", val, { sensor: \"1A05\" }); break;\n    case \"2A15\": out[21] = { topic: \"2A15\", payload: val }; mirror(\"2A15\", val, { sensor: \"2A15\" }); break;\n    case \"LEE650T\": out[22] = { topic: \"LEE650T.C\", payload: val }; mirror(\"LEE650T.C\", val, { sensor: \"LEE650T\" }); break;\n    case \"REE650T\": out[23] = { topic: \"REE650T.C\", payload: val }; mirror(\"REE650T.C\", val, { sensor: \"REE650T\" }); break;\n    case \"LEE650AV\": out[24] = { topic: \"LEE650AV.mps\", payload: val }; mirror(\"LEE650AV.mps\",  val, { sensor: \"LEE650AV\"}); break;\n    case \"REE650AV\": out[25] = { topic: \"REE650AV.mps\", payload: val }; mirror(\"REE650AV.mps\",  val, { sensor: \"REE650AV\"}); break;\n    \n  }\n  out[32] = out33;\n  return out;\n}\n\n// ---------- Energy meters ----------\n// SDM230 (LEM/REM): float32 in Input Registers (FC=4), MS-register first\nif (tag === \"LEM\" || tag === \"REM\") {\n  if (regs.length < 2) { node.error(`${tag} requires 2 registers`, msg); return null; }\n  const watts = round2(f32be(regs[0], regs[1]));   // Active Power (W)\n  if (tag === \"LEM\") { out[26] = { topic: \"LEM.W\", payload: watts }; mirror(\"LEM.W\", watts, { sensor: \"LEM\" }); }\n  else { out[27] = { topic: \"REM.W\", payload: watts }; mirror(\"REM.W\", watts, { sensor: \"REM\" }); }\n  out[32] = out33;\n  return out;\n}\n\n// ---------- PIDs: pass-through full 15-register variables block (addr 1..15) ----------\nif (tag === \"LPID\" || tag === \"RPID\") {\n  if (regs.length < 15) { node.error(`${tag} requires 15 registers (addr 1..15)`, msg); return null; }\n  const block = regs.slice(0, 15); // keep raw words; decode downstream\n\n  if (tag === \"LPID\") out[28] = { topic: \"LPID.block\", payload: block };\n  else out[29] = { topic: \"RPID.block\", payload: block };\n\n  // Not mirrored to metrics (block/array). Add if you want.\n  out[32] = out33;\n  return out;\n}\n\n// ---------- VFDs (6 regs pass-through to your splitter nodes) ----------\nif (tag === \"LVFD\" || tag === \"2FN11\") {\n  if (regs.length < 6) { node.error(`${tag} requires 6 registers`, msg); return null; }\n  const arr6 = regs.slice(0, 6);\n  if (tag === \"LVFD\") out[30] = { topic: \"LVFD\", payload: arr6 };\n  else out[31] = { topic: \"2FN11\", payload: arr6 };\n\n  // Not mirrored to metrics (array). Add if you want.\n  out[32] = out33;\n  return out;\n}\n\nnode.warn(`Decoder: unhandled tag \"${tag}\"`);\nout[32] = out33;\nreturn out;\n",
        "outputs": 33,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 500,
        "wires": [
            [
                "9d8b9620ef0f0ce9"
            ],
            [
                "9f5a0f30d3449312"
            ],
            [
                "6f5cdcbd7e5cb1bf"
            ],
            [
                "52103ff8eb9bd88c"
            ],
            [
                "dda5933f4ba06375"
            ],
            [
                "7ff7bcedab7fbea1"
            ],
            [
                "ce61628ad1a77e95"
            ],
            [
                "4f19ea30d9453e03"
            ],
            [
                "ba4a97f7b2771a77"
            ],
            [
                "2a2d3ec53c111c16"
            ],
            [
                "d8e2860fba7176d9"
            ],
            [
                "981abf88d31ee20f"
            ],
            [
                "a7f1444928606f20"
            ],
            [
                "2fae17bce3b25869"
            ],
            [
                "1642dbd3499b96f8"
            ],
            [
                "08a51bcbe831615d"
            ],
            [
                "300cb7eaefa4a529"
            ],
            [
                "c3181626a8bd5fe0"
            ],
            [
                "2fcaa658905612c3"
            ],
            [
                "95d3f3a8936c5dff"
            ],
            [
                "56be357dc8e0ee39"
            ],
            [
                "9ddfa1e6653269ed"
            ],
            [
                "d57293716f9a2e57"
            ],
            [
                "40e43d48fde50feb"
            ],
            [
                "7e5ea86aad748998"
            ],
            [
                "767eb1360d0db082"
            ],
            [
                "9e819b4f8603a9f4"
            ],
            [
                "5b6aa9c794b4d6ca"
            ],
            [
                "85f09583b79293ab"
            ],
            [
                "1e6cd92195f09053"
            ],
            [
                "af1233ca75f866d5"
            ],
            [
                "2ec7981f8058b999"
            ],
            [
                "e1ce315d4c1826b2",
                "17da716469bfee6a"
            ]
        ]
    },
    {
        "id": "4860798f5e89720f",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "Delay between each Modbus Command",
        "info": "",
        "x": 790,
        "y": 100,
        "wires": []
    },
    {
        "id": "46545015a97dd7cb",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "Start Delay",
        "info": "",
        "x": 540,
        "y": 180,
        "wires": []
    },
    {
        "id": "f53db8df8d7eced5",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "Modbus Registers",
        "info": "",
        "x": 330,
        "y": 180,
        "wires": []
    },
    {
        "id": "aad7d6244e0f338c",
        "type": "inject",
        "z": "b994839ba412691b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 480,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "e1ce315d4c1826b2",
        "type": "function",
        "z": "b994839ba412691b",
        "name": "33rd → metrics cache",
        "func": "'use strict';\n\n// 1. Initialize the store\nconst store = flow.get('metrics') || {};\n\n/**\n * Classify topic into specific metric names\n */\nfunction classify(topic) {\n  const N = String(topic || '').trim().toUpperCase();\n\n  // Default fallback\n  let metric = 'generic_gauge';\n  let help = 'Generic gauge';\n\n  // --- LOGIC: Use .includes() or relaxed Regex to catch keywords ---\n\n  // 1. CO2\n  if (N.includes('.CO2.')) {\n    metric = 'co2_ppm';\n    help = 'CO2 concentration';\n  }\n\n  // 2. TEMPERATURE (Matches \"TEMP.C\" anywhere in the string)\n  else if (N.includes('TEMP.C')) {\n    metric = 'temperature_celsius';\n    help = 'Air temperature';\n  }\n\n  // 3. HUMIDITY (Matches \"RH.%\" anywhere)\n  else if (N.includes('RH.%')) {\n    metric = 'humidity_percent';\n    help = 'Relative humidity';\n  }\n\n  // 4. PRESSURE (Matches \"P.HPA\")\n  else if (N.includes('P.HPA')) {\n    // NOTE: Your Grafana looks for 'generic_gauge' for pressure. \n    // If you want to support that without changing Grafana, change the string below.\n    metric = 'pressure_hpa';\n    help = 'Atmospheric pressure';\n  }\n\n  // 5. POWER (Matches LEM.W or REM.W at start)\n  else if (N.startsWith('LEM.W') || N.startsWith('REM.W')) {\n    metric = 'power_watts';\n    help = 'Active power';\n  }\n\n  // 6. AIR VELOCITY (Matches specific sensor names)\n  else if (N.includes('LEE650AV') || N.includes('REE650AV')) {\n    metric = 'air_velocity_mps';\n    help = 'Air velocity';\n  }\n\n  // 7. GENERIC SENSORS\n  else if (N.includes('LEE600') || N.includes('2A15')) {\n    metric = 'sensor_value';\n    help = 'Generic sensor value';\n  }\n\n  return { metric, help };\n}\n\n// --- MAIN EXECUTION ---\nconst topic = String(msg.topic || '');\nconst val = Number(msg.payload);\n\n// Exit if data is invalid\nif (!topic || !Number.isFinite(val)) return null;\n\n// 2. Identify Zone\n// Looks for LU, RU, LD, RD as a distinct word\nconst z = topic.match(/\\b(LU|RU|LD|RD)\\b/i)?.[1]?.toLowerCase();\n\n// 3. Identify Sensor Hardware ID (for labeling)\nlet sensor = 'default';\nif (/LEE650AV/i.test(topic)) sensor = 'LEE650AV';\nelse if (/REE650AV/i.test(topic)) sensor = 'REE650AV';\nelse if (/LEE650T|REE650T/i.test(topic)) sensor = 'EE650T';\nelse if (/LEM\\.W/i.test(topic)) sensor = 'LEM';\nelse if (/REM\\.W/i.test(topic)) sensor = 'REM';\n\n// 4. Classify Topic\nconst { metric, help } = classify(topic);\n\n// 5. Prepare Labels\nconst labels = { ...msg.labels };\nif (z && !labels.zone) labels.zone = z;\nif (sensor !== 'default' && !labels.sensor) labels.sensor = sensor;\n\n// 6. Generate Unique Key & Save\n// This key ensures different sensors/zones don't overwrite each other\nconst statusLabel = labels.status || 'default';\nconst key = `${metric}|zone=${labels.zone || 'none'}|sensor=${labels.sensor || 'none'}|status=${statusLabel}`;\n\nstore[key] = {\n  metric,\n  value: val,\n  labels: { ...labels, zone: labels.zone || z || 'none', sensor: labels.sensor || sensor },\n  help\n};\n\nflow.set('metrics', store);\n\nreturn null;",
        "outputs": 0,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 1200,
        "wires": []
    },
    {
        "id": "b1acf4dc9f622ba1",
        "type": "http in",
        "z": "b994839ba412691b",
        "name": "GET /metrics",
        "url": "/metrics",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1970,
        "y": 1200,
        "wires": [
            [
                "e384a8451810e4a2"
            ]
        ]
    },
    {
        "id": "e384a8451810e4a2",
        "type": "function",
        "z": "b994839ba412691b",
        "name": "Render Prometheus exposition",
        "func": "'use strict';\nconst m = flow.get('metrics') || {};\nconst out = [];\nconst seen = new Set();\nfor (const k of Object.keys(m)) {\n  const { metric, help } = m[k];\n  if (!seen.has(metric)) {\n    out.push(`# HELP ${metric} ${help}`);\n    out.push(`# TYPE ${metric} gauge`);\n    seen.add(metric);\n  }\n}\nfor (const k of Object.keys(m)) {\n  const { metric, value, labels } = m[k];\n  const labelStr = Object.entries(labels || {})\n    .map(([kk, vv]) => `${kk}=\"${String(vv).replace(/\"/g, '\\\\\"')}\"`)\n    .join(',');\n  out.push(labelStr ? `${metric}{${labelStr}} ${value}` : `${metric} ${value}`);\n}\nmsg.headers = { 'Content-Type': 'text/plain; version=0.0.4; charset=utf-8' };\nmsg.payload = out.join('\\n') + '\\n';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2230,
        "y": 1200,
        "wires": [
            [
                "94ad273264cd498f"
            ]
        ]
    },
    {
        "id": "94ad273264cd498f",
        "type": "http response",
        "z": "b994839ba412691b",
        "name": "HTTP Response",
        "statusCode": "",
        "headers": {},
        "x": 2520,
        "y": 1200,
        "wires": []
    },
    {
        "id": "d8e2860fba7176d9",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A01-Co2Avg out",
        "mode": "link",
        "links": [
            "0254d0206ff26664"
        ],
        "x": 1665,
        "y": 360,
        "wires": []
    },
    {
        "id": "981abf88d31ee20f",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A01-Co2Row out",
        "mode": "link",
        "links": [
            "4f19c05b159c630e"
        ],
        "x": 1665,
        "y": 400,
        "wires": []
    },
    {
        "id": "a7f1444928606f20",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A01-inT out",
        "mode": "link",
        "links": [
            "1542fc5850b83c10"
        ],
        "x": 1665,
        "y": 440,
        "wires": []
    },
    {
        "id": "2fae17bce3b25869",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A01-inRH Out",
        "mode": "link",
        "links": [
            "1129d8d3869f5de6"
        ],
        "x": 1665,
        "y": 480,
        "wires": []
    },
    {
        "id": "9d8b9620ef0f0ce9",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A02-Co2Avg out",
        "mode": "link",
        "links": [
            "4e2b315de26381b2"
        ],
        "x": 1665,
        "y": 40,
        "wires": [],
        "info": "test"
    },
    {
        "id": "9f5a0f30d3449312",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A02-Co2Row out",
        "mode": "link",
        "links": [
            "684a32c9a5581dfc"
        ],
        "x": 1665,
        "y": 80,
        "wires": []
    },
    {
        "id": "6f5cdcbd7e5cb1bf",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A02-inT out",
        "mode": "link",
        "links": [
            "1977e3ef1f68fdc6"
        ],
        "x": 1665,
        "y": 120,
        "wires": []
    },
    {
        "id": "52103ff8eb9bd88c",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A02-inRH Out",
        "mode": "link",
        "links": [
            "28ce05a291d20fa7"
        ],
        "x": 1665,
        "y": 160,
        "wires": []
    },
    {
        "id": "08a51bcbe831615d",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A11-Co2Avg out",
        "mode": "link",
        "links": [
            "797da0fc6afe129d"
        ],
        "x": 1665,
        "y": 520,
        "wires": []
    },
    {
        "id": "300cb7eaefa4a529",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A11-Co2Row out",
        "mode": "link",
        "links": [
            "a333d286cfdef342"
        ],
        "x": 1665,
        "y": 560,
        "wires": []
    },
    {
        "id": "c3181626a8bd5fe0",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A11-inT out",
        "mode": "link",
        "links": [
            "28bc777d2e3ca27e"
        ],
        "x": 1665,
        "y": 600,
        "wires": []
    },
    {
        "id": "2fcaa658905612c3",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A11-inRH Out",
        "mode": "link",
        "links": [
            "979d5fc6c4db06df"
        ],
        "x": 1665,
        "y": 640,
        "wires": []
    },
    {
        "id": "7ff7bcedab7fbea1",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A12-Co2Avg out",
        "mode": "link",
        "links": [
            "713910d477499b7c"
        ],
        "x": 1665,
        "y": 200,
        "wires": []
    },
    {
        "id": "ce61628ad1a77e95",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A12-Co2Row out",
        "mode": "link",
        "links": [
            "bb067629307b39a5"
        ],
        "x": 1665,
        "y": 240,
        "wires": []
    },
    {
        "id": "4f19ea30d9453e03",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A12-inT out",
        "mode": "link",
        "links": [
            "7f00a66d3933a71e"
        ],
        "x": 1665,
        "y": 280,
        "wires": []
    },
    {
        "id": "ba4a97f7b2771a77",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A12-inRH Out",
        "mode": "link",
        "links": [
            "30d025f862387527"
        ],
        "x": 1665,
        "y": 320,
        "wires": []
    },
    {
        "id": "f252469d5f2c6f9f",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "1A02 data",
        "info": "",
        "x": 1800,
        "y": 40,
        "wires": []
    },
    {
        "id": "4029a1821555c805",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "2A12 data",
        "info": "",
        "x": 1800,
        "y": 180,
        "wires": []
    },
    {
        "id": "eadde791601c7675",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "1A01 data",
        "info": "",
        "x": 1800,
        "y": 360,
        "wires": []
    },
    {
        "id": "86ce9faad7721ea4",
        "type": "comment",
        "z": "b994839ba412691b",
        "name": "2A11 data",
        "info": "",
        "x": 1800,
        "y": 520,
        "wires": []
    },
    {
        "id": "56be357dc8e0ee39",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A05-DP Out",
        "mode": "link",
        "links": [
            "0a33548b293abdee"
        ],
        "x": 1665,
        "y": 680,
        "wires": []
    },
    {
        "id": "9ddfa1e6653269ed",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A15-DP Out",
        "mode": "link",
        "links": [
            "970f4af5aefd4544"
        ],
        "x": 1665,
        "y": 720,
        "wires": []
    },
    {
        "id": "d57293716f9a2e57",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A08-T Out",
        "mode": "link",
        "links": [
            "5ab7a65a2ccf77ca"
        ],
        "x": 1665,
        "y": 760,
        "wires": []
    },
    {
        "id": "40e43d48fde50feb",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A18-T Out",
        "mode": "link",
        "links": [
            "8af7c497d2cf05c0"
        ],
        "x": 1665,
        "y": 800,
        "wires": []
    },
    {
        "id": "7e5ea86aad748998",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A08-VEL 1VEL-CLMN out",
        "mode": "link",
        "links": [
            "64a26e46b03e9148"
        ],
        "x": 1665,
        "y": 840,
        "wires": []
    },
    {
        "id": "767eb1360d0db082",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A18-VEL 2VEL-CLMN out",
        "mode": "link",
        "links": [
            "fcec934dc86f4db3"
        ],
        "x": 1665,
        "y": 880,
        "wires": []
    },
    {
        "id": "9e819b4f8603a9f4",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1EM-3A20 out",
        "mode": "link",
        "links": [
            "ac0773dd308a64e8"
        ],
        "x": 1665,
        "y": 920,
        "wires": []
    },
    {
        "id": "5b6aa9c794b4d6ca",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2EM-3A21 out",
        "mode": "link",
        "links": [
            "2b47f606fbbca572"
        ],
        "x": 1665,
        "y": 960,
        "wires": []
    },
    {
        "id": "17da716469bfee6a",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "Sensor CSV Log",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 1665,
        "y": 1160,
        "wires": []
    },
    {
        "id": "85f09583b79293ab",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "PID CLM 1 out",
        "mode": "link",
        "links": [
            "7ea8b8fee60faf5a"
        ],
        "x": 1665,
        "y": 1000,
        "wires": []
    },
    {
        "id": "1e6cd92195f09053",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "PID CLMN 2 out",
        "mode": "link",
        "links": [
            "536d15e7d4edb52c"
        ],
        "x": 1665,
        "y": 1040,
        "wires": []
    },
    {
        "id": "af1233ca75f866d5",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1FN01 out",
        "mode": "link",
        "links": [
            "b0bdeb5fbab50e6e"
        ],
        "x": 1665,
        "y": 1080,
        "wires": []
    },
    {
        "id": "2ec7981f8058b999",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2FN11 out",
        "mode": "link",
        "links": [
            "6733695465f9e172"
        ],
        "x": 1665,
        "y": 1120,
        "wires": []
    },
    {
        "id": "8e6bb9f81f1d993e",
        "type": "switch",
        "z": "b994839ba412691b",
        "name": "test mode",
        "property": "TestMode",
        "propertyType": "env",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1020,
        "y": 340,
        "wires": [
            [],
            [
                "8860c66f06ec6461"
            ]
        ]
    },
    {
        "id": "1642dbd3499b96f8",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A01-Pressure out",
        "mode": "link",
        "links": [
            "e096bbf90304d4d5"
        ],
        "x": 1715,
        "y": 500,
        "wires": []
    },
    {
        "id": "95d3f3a8936c5dff",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A11-Pressure out",
        "mode": "link",
        "links": [
            "b8e9d953e7781e96"
        ],
        "x": 1725,
        "y": 660,
        "wires": []
    },
    {
        "id": "e575f9e1592fb52b",
        "type": "debug",
        "z": "b994839ba412691b",
        "d": true,
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 100,
        "wires": []
    },
    {
        "id": "dda5933f4ba06375",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "1A02-Pressure Out",
        "mode": "link",
        "links": [
            "85948bf4b7d93eb3"
        ],
        "x": 1705,
        "y": 160,
        "wires": []
    },
    {
        "id": "2a2d3ec53c111c16",
        "type": "link out",
        "z": "b994839ba412691b",
        "name": "2A12-Pressure out",
        "mode": "link",
        "links": [
            "a2d4c9edaa706614"
        ],
        "x": 1765,
        "y": 320,
        "wires": []
    },
    {
        "id": "65476c8e674be340",
        "type": "modbus-flex-write",
        "z": "1403119fa516edbc",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "server": "d3e8251c2f05a30e",
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1850,
        "y": 380,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ddf63abc196c7fe7",
        "type": "ui-slider",
        "z": "1403119fa516edbc",
        "group": "b135539d7634acf8",
        "name": "CTRL_1FN01_Speed",
        "label": "Frequency",
        "tooltip": "",
        "order": 1,
        "width": "5",
        "height": "1",
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "thumbLabel": "true",
        "showTicks": "always",
        "min": "20",
        "max": "60",
        "step": "5",
        "className": "my-slider",
        "iconPrepend": "",
        "iconAppend": "",
        "color": "",
        "colorTrack": "",
        "colorThumb": "",
        "showTextField": true,
        "x": 420,
        "y": 820,
        "wires": [
            [
                "16753be2826a77ad"
            ]
        ]
    },
    {
        "id": "0e0e09c9b8eb4cf6",
        "type": "ui-slider",
        "z": "1403119fa516edbc",
        "group": "13816c2f51c27294",
        "name": "CTRL_2FN11_Speed",
        "label": "Frequency",
        "tooltip": "",
        "order": 1,
        "width": "5",
        "height": "1",
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "thumbLabel": "true",
        "showTicks": "always",
        "min": "20",
        "max": "60",
        "step": "5",
        "className": "",
        "iconPrepend": "",
        "iconAppend": "",
        "color": "",
        "colorTrack": "",
        "colorThumb": "",
        "showTextField": true,
        "x": 1260,
        "y": 820,
        "wires": [
            [
                "9816148ee9f05e18"
            ]
        ]
    },
    {
        "id": "fc070faa685a7962",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "b135539d7634acf8",
        "name": "CTRL_1FN01_ON",
        "label": "Motor (1FN01) ON",
        "order": 4,
        "width": "2",
        "height": "2",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1798,   \"value\": 1,   \"unitid\": 101 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 450,
        "y": 620,
        "wires": [
            [
                "80cea74c793dfd99"
            ]
        ]
    },
    {
        "id": "f6c3055ad83f504a",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "b135539d7634acf8",
        "name": "CTRL_1FN01_OFF",
        "label": "Motor OFF",
        "order": 5,
        "width": "2",
        "height": "2",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1798,   \"value\": 0,   \"unitid\": 101 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 450,
        "y": 660,
        "wires": [
            [
                "80cea74c793dfd99"
            ]
        ]
    },
    {
        "id": "ddbc20e69cb59034",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "13816c2f51c27294",
        "name": "CTRL_2FN11_ON",
        "label": "Motor (2FN11) ON",
        "order": 4,
        "width": "2",
        "height": "2",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1798,   \"value\": 1,   \"unitid\": 201 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1230,
        "y": 660,
        "wires": [
            [
                "0f5589e780c8199d"
            ]
        ]
    },
    {
        "id": "3e26c8be5b1a37db",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "13816c2f51c27294",
        "name": "CTRL_2FN11_OFF",
        "label": "Motor OFF",
        "order": 5,
        "width": "2",
        "height": "2",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1798,   \"value\": 0,   \"unitid\": 201 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1230,
        "y": 700,
        "wires": [
            [
                "0f5589e780c8199d"
            ]
        ]
    },
    {
        "id": "de29c55982b29d21",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "b135539d7634acf8",
        "name": "CTRL_1FN01_ApplySpeed",
        "label": "Set",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1797,   \"unitid\": 101 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 480,
        "y": 700,
        "wires": [
            [
                "80cea74c793dfd99"
            ]
        ]
    },
    {
        "id": "626a46cace2c8b83",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "13816c2f51c27294",
        "name": "CTRL_2FN11_ApplySpeed",
        "label": "Set",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{   \"address\": 1797,   \"unitid\": 201 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1260,
        "y": 740,
        "wires": [
            [
                "0f5589e780c8199d"
            ]
        ]
    },
    {
        "id": "16753be2826a77ad",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "Store Slider Val Globally",
        "func": "// Store the current slider value in flow.leftSliderValue\nflow.set(\"leftSliderValue\", msg.payload);\n\n// Optional warning for debugging\n//node.warn(\"Slider left value stored in flow context: \" + msg.payload);\n\n// Do not send anything downstream\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "9816148ee9f05e18",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "Store Slider Val Globally",
        "func": "// Store the current slider value in flow.leftSliderValue\nflow.set(\"rightSliderValue\", msg.payload);\n\n// Optional warning for debugging\n//node.warn(\"Slider Right value stored in flow context: \" + msg.payload);\n\n// Do not send anything downstream\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1490,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "80cea74c793dfd99",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "Mb Packet Left",
        "func": "if (msg.payload && msg.payload.address !== undefined && msg.payload.unitid !== undefined) {\n\n    let val;\n\n    // If value is provided in the payload, use it\n    if (msg.payload.value !== undefined) {\n        val = Number(msg.payload.value);\n    }\n    // Otherwise, get it from the stored slider value\n    else {\n        val = flow.get(\"leftSliderValue\");\n        if (val === undefined || isNaN(val)) {\n            node.warn(\"Slider value not set or invalid, defaulting to 0\");\n            val = 0;\n        }\n        val = Number(val) * 100;\n    }\n\n    // Build Modbus packet (same as before)\n    msg.payload = {\n        fc: 6,\n        unitid: Number(msg.payload.unitid),\n        address: Number(msg.payload.address),\n        quantity: 1,\n        value: [val]\n    };\n\n    return msg;\n}\n// Ignore other messages\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 620,
        "wires": [
            [
                "65476c8e674be340"
            ]
        ]
    },
    {
        "id": "0f5589e780c8199d",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "Mb Packet Right",
        "func": "if (msg.payload && msg.payload.address !== undefined && msg.payload.unitid !== undefined) {\n\n    let val;\n\n    // If value is provided in the payload, use it\n    if (msg.payload.value !== undefined) {\n        val = Number(msg.payload.value);\n    }\n    // Otherwise, get it from the stored slider value\n    else {\n        val = flow.get(\"rightSliderValue\");\n        if (val === undefined || isNaN(val)) {\n            node.warn(\"Slider value not set or invalid, defaulting to 0\");\n            val = 0;\n        }\n        val = Number(val) * 100;\n    }\n\n    // Build Modbus Flex Write payload\n    msg.payload = {\n        fc: 6,                               // Write Single Register\n        unitid: Number(msg.payload.unitid),  // From button\n        address: Number(msg.payload.address),// From button\n        quantity: 1,\n        value: [val]                         // From slider or fixed button value\n    };\n\n    return msg;\n}\n\n// Ignore other messages\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 620,
        "wires": [
            [
                "65476c8e674be340"
            ]
        ]
    },
    {
        "id": "65f746f29b2a1b79",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "30",
        "payloadType": "num",
        "x": 1115,
        "y": 820,
        "wires": [
            [
                "0e0e09c9b8eb4cf6"
            ]
        ],
        "l": false
    },
    {
        "id": "9ff8e8baa3835407",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "7aa27d4b2d1c0ea6",
        "name": "CTRL_1H01_ON",
        "label": "Heater (1H01) ON",
        "order": 1,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 103, \"address\": 15, \"value\": 0 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 280,
        "wires": [
            [
                "90e713b2cda4d31e"
            ]
        ]
    },
    {
        "id": "93f93896d83f6fcd",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "7aa27d4b2d1c0ea6",
        "name": "CTRL_1H01_OFF",
        "label": "Heater OFF",
        "order": 3,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 103, \"address\": 15, \"value\": 2 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 240,
        "wires": [
            [
                "90e713b2cda4d31e"
            ]
        ]
    },
    {
        "id": "8a94f546723679fe",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "1150877cb6638246",
        "name": "CTRL_2H11_ON",
        "label": "Heater (2H11) ON",
        "order": 1,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 203, \"address\": 15, \"value\": 0 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1310,
        "y": 240,
        "wires": [
            [
                "c3e6fc3fc13f5b56"
            ]
        ]
    },
    {
        "id": "41386c2f7e4ebe88",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "1150877cb6638246",
        "name": "CTRL_2H11_OFF",
        "label": "Heater OFF",
        "order": 3,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 203, \"address\": 15, \"value\": 2 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1310,
        "y": 200,
        "wires": [
            [
                "c3e6fc3fc13f5b56"
            ]
        ]
    },
    {
        "id": "cb0496c183825ba3",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "7aa27d4b2d1c0ea6",
        "name": "CTRL_1H01_ApplySetpoint",
        "label": "Set",
        "order": 7,
        "width": "1",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 103, \"address\": 6 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 640,
        "y": 200,
        "wires": [
            [
                "90e713b2cda4d31e"
            ]
        ]
    },
    {
        "id": "ced6add6200c5335",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "1150877cb6638246",
        "name": "CTRL_2H11_ApplySetpoint",
        "label": "Set",
        "order": 7,
        "width": "1",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"unitid\": 203, \"address\": 6 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 1340,
        "y": 160,
        "wires": [
            [
                "c3e6fc3fc13f5b56"
            ]
        ]
    },
    {
        "id": "90e713b2cda4d31e",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "1SV Set",
        "func": "// Expects: msg.payload = { address:<number>, unitid:<number> }\n// Optional: msg.payload.value -> write this (integer)\n// If address = SP (6..9 or 16): falls back to leftSliderPIDValue if no value\n// If address = 15: Control Status (0=Auto,1=Manual,2=Standby)\n\nif (msg && msg.payload && msg.payload.address !== undefined && msg.payload.unitid !== undefined) {\n    if (typeof msg.payload === \"string\") {\n        try { msg.payload = JSON.parse(msg.payload); }\n        catch(e) { node.error(\"Button payload is not valid JSON\", msg); return null; }\n    }\n\n    const unitid  = Number(msg.payload.unitid);\n    const address = Number(msg.payload.address);\n\n    if (!Number.isInteger(unitid) || unitid <= 0) { node.error(\"Invalid unitid\", msg); return null; }\n    if (!Number.isInteger(address) || address < 0) { node.error(\"Invalid address\", msg); return null; }\n\n    let val;\n\n    if (msg.payload.value !== undefined) {\n        val = Number(msg.payload.value);\n    } else {\n        // For SP registers only → fallback to slider\n        if ([6,7,8,9,16].includes(address)) {\n            val = flow.get(\"leftSliderPIDValue\");\n            if (val === undefined || isNaN(val)) {\n                node.warn(\"leftSliderPIDValue not set, defaulting to 0\");\n                val = 0;\n            }\n            val = Math.round(val);\n            if (val < 0) val = 0;\n            if (val > 55) val = 55;\n        } else {\n            node.error(\"No value provided for non-SP address\", msg);\n            return null;\n        }\n    }\n\n    // Build Flex Write\n    msg.payload = {\n        fc: 6,\n        unitid,\n        address,     // zero-based offset\n        quantity: 1,\n        value: [ val ]\n    };\n\n    node.status({ fill: \"green\", shape: \"dot\", text: `Write ${val} @U${unitid}:${address}` });\n    return msg;\n}\n\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 240,
        "wires": [
            [
                "65476c8e674be340"
            ]
        ]
    },
    {
        "id": "9150670b95c762a0",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 425,
        "y": 160,
        "wires": [
            [
                "cb0496c183825ba3"
            ]
        ],
        "l": false
    },
    {
        "id": "c3e6fc3fc13f5b56",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "2SV Set",
        "func": "// Expects: msg.payload = { address:<number>, unitid:<number> }\n// Optional: msg.payload.value -> write this (integer)\n// If address = SP (6..9 or 16): falls back to rihghtSliderPIDValue if no value\n// If address = 15: Control Status (0=Auto,1=Manual,2=Standby)\n\nif (msg && msg.payload && msg.payload.address !== undefined && msg.payload.unitid !== undefined) {\n    if (typeof msg.payload === \"string\") {\n        try { msg.payload = JSON.parse(msg.payload); }\n        catch(e) { node.error(\"Button payload is not valid JSON\", msg); return null; }\n    }\n\n    const unitid  = Number(msg.payload.unitid);\n    const address = Number(msg.payload.address);\n\n    if (!Number.isInteger(unitid) || unitid <= 0) { node.error(\"Invalid unitid\", msg); return null; }\n    if (!Number.isInteger(address) || address < 0) { node.error(\"Invalid address\", msg); return null; }\n\n    let val;\n\n    if (msg.payload.value !== undefined) {\n        val = Number(msg.payload.value);\n    } else {\n        // For SP registers only → fallback to slider\n        if ([6,7,8,9,16].includes(address)) {\n            val = flow.get(\"rightSliderPIDValue\");\n            if (val === undefined || isNaN(val)) {\n                node.warn(\"rightSliderPIDValue not set, defaulting to 0\");\n                val = 0;\n            }\n            val = Math.round(val);\n            if (val < 0) val = 0;\n            if (val > 55) val = 55;\n        } else {\n            node.error(\"No value provided for non-SP address\", msg);\n            return null;\n        }\n    }\n\n    // Build Flex Write\n    msg.payload = {\n        fc: 6,\n        unitid,\n        address,     // zero-based offset\n        quantity: 1,\n        value: [ val ]\n    };\n\n    node.status({ fill: \"green\", shape: \"dot\", text: `Write ${val} @U${unitid}:${address}` });\n    return msg;\n}\n\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 280,
        "wires": [
            [
                "65476c8e674be340"
            ]
        ]
    },
    {
        "id": "4e9efb402ddcff94",
        "type": "serial request",
        "z": "1403119fa516edbc",
        "name": "",
        "serial": "c2b3dd79366cad0c",
        "x": 910,
        "y": 1240,
        "wires": [
            [
                "75be98f0e1eb74e5"
            ]
        ]
    },
    {
        "id": "83281996a2f1a2db",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "function 5",
        "func": "// Inputs:\n// msg.payload = { relay: N, state: \"ON\" or \"OFF\", bankByte: <number> }\n\nconst relayNum = msg.payload.relay;\nconst state = msg.payload.state.toUpperCase();\nconst bankByte = msg.payload.bankByte;\n\nif (relayNum < 1 || relayNum > 8) {\n    node.error(\"Relay number must be 1 to 8\", msg);\n    return null;\n}\n\nif (typeof bankByte !== 'number') {\n    node.error(\"bankByte must be a number\", msg);\n    return null;\n}\n\nconst header = 0xAA;\nconst cmd1 = 0x03;\nconst cmd2 = 0xFE;\n\nlet relayByte;\nif (state === \"ON\") {\n    relayByte = 108 + (relayNum - 1);\n} else if (state === \"OFF\") {\n    relayByte = 100 + (relayNum - 1);\n} else {\n    node.error(\"State must be ON or OFF\", msg);\n    return null;\n}\n\nconst command = [header, cmd1, cmd2, relayByte, bankByte];\nconst checksum = command.reduce((sum, b) => sum + b, 0) % 256;\ncommand.push(checksum);\n\nmsg.payload = Buffer.from(command);\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 1240,
        "wires": [
            [
                "4e9efb402ddcff94"
            ]
        ]
    },
    {
        "id": "75be98f0e1eb74e5",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "function 7",
        "func": "let bytes = msg.payload;\n\nif (!Buffer.isBuffer(bytes)) {\n    //node.error(\"Payload is not a Buffer\", msg);\n    return null;\n}\n\nif (bytes.length !== 4) {\n    //node.error(\"Invalid response length\", msg);\n    return null;\n}\n\nconst header1 = bytes[0];\nconst header2 = bytes[1];\nconst dataByte = bytes[2];\nconst checksum = bytes[3];\n\n// Validate headers\nif (header1 !== 0xAA || header2 !== 0x01) {\n    //node.error(\"Invalid response header\", msg);\n    return null;\n}\n\n// Calculate expected checksum\nconst calcChecksum = (header1 + header2 + dataByte) % 256;\nif (calcChecksum !== checksum) {\n    node.error(`Checksum mismatch. Got ${checksum}, expected ${calcChecksum}`, msg);\n    return null;\n}\n\nif (checksum === 0x00) {\n    // On/off response - just send null on all outputs to keep ui-leds unchanged\n    return [null, null, null, null, null, null, null, null];\n} else {\n    // Status response - send relay states on outputs 1-8\n    let msgs = [];\n    for (let i = 0; i < 8; i++) {\n        msgs.push({\n            topic: `relay${i + 1}`,\n            payload: !!((dataByte >> i) & 1)\n        });\n    }\n    return msgs;\n}\n",
        "outputs": 8,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1240,
        "wires": [
            [
                "bfe89f4f998d9406"
            ],
            [
                "ea54de18c999e13b"
            ],
            [
                "e34e06365c0d5bc8"
            ],
            [
                "4601559a5fd11f34"
            ],
            [
                "3ab309b8b5fdfa7a"
            ],
            [
                "b43868214a767915"
            ],
            [],
            []
        ]
    },
    {
        "id": "9f7baeafedec69ad",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "function 8",
        "func": "const command = [0xAA, 0x03, 0xFE, 0x7C, 0x01];\nconst checksum = command.reduce((sum, b) => sum + b, 0) % 256;\ncommand.push(checksum);\n\nmsg.payload = Buffer.from(command);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 1320,
        "wires": [
            [
                "4e9efb402ddcff94"
            ]
        ]
    },
    {
        "id": "fa46a92b51ca27bb",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Check Status - Auto 1s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 950,
        "y": 1380,
        "wires": [
            [
                "9f7baeafedec69ad"
            ]
        ]
    },
    {
        "id": "99bbddf82c7472b3",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "CTRL_1W01_ON",
        "label": "1W01 (WATER) ON",
        "order": 1,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 1, \"state\": \"ON\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 370,
        "y": 1040,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "bb2f858bd4037237",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "CTRL_1W01_OFF",
        "label": "1W01 OFF",
        "order": 2,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 1, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 690,
        "y": 1040,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "79820c3aeeea098d",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "Column 2 (Relay 5 to 8)",
        "info": "",
        "x": 1620,
        "y": 1440,
        "wires": []
    },
    {
        "id": "529ccb527d7a1adb",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "1W01LedLeft",
        "group": "c34f777b31ff0d3e",
        "order": 3,
        "width": "2",
        "height": "1",
        "label": "1W01 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1630,
        "y": 1020,
        "wires": []
    },
    {
        "id": "9038a30e79fa9b9e",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "2W11LedRight",
        "group": "6cf2ef424cfcf0b9",
        "order": 3,
        "width": "2",
        "height": "1",
        "label": "2W11 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1620,
        "y": 1260,
        "wires": []
    },
    {
        "id": "333a49da219ff689",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "1V03LedLeft",
        "group": "c34f777b31ff0d3e",
        "order": 6,
        "width": "2",
        "height": "1",
        "label": "1V03 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1630,
        "y": 1080,
        "wires": []
    },
    {
        "id": "9930b50f4d0c218a",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "1V02LedLeft",
        "group": "c34f777b31ff0d3e",
        "order": 9,
        "width": "2",
        "height": "1",
        "label": "1V02 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1630,
        "y": 1140,
        "wires": []
    },
    {
        "id": "f42ded24bb9d9760",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "2V12LedRight",
        "group": "6cf2ef424cfcf0b9",
        "order": 9,
        "width": "2",
        "height": "1",
        "label": "2V12 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1620,
        "y": 1320,
        "wires": []
    },
    {
        "id": "31c402973caf54c1",
        "type": "ui-led",
        "z": "1403119fa516edbc",
        "name": "2V13LedRight",
        "group": "6cf2ef424cfcf0b9",
        "order": 6,
        "width": "2",
        "height": "1",
        "label": "2V13 Status",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1620,
        "y": 1380,
        "wires": []
    },
    {
        "id": "0a12bf04e3c6abf7",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "column 1 (Relay 1 to 4)",
        "info": "",
        "x": 1540,
        "y": 960,
        "wires": []
    },
    {
        "id": "254c18bc8adcee36",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "Column 1 (Relay 1 to 4)",
        "info": "",
        "x": 400,
        "y": 980,
        "wires": []
    },
    {
        "id": "c22f968b0e173907",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "Relay 2W11 ON",
        "label": "2W11 (WATER) ON",
        "order": 1,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 2, \"state\": \"ON\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 360,
        "y": 1520,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "0e75d61a0352e440",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "Relay 2W11 OFF",
        "label": "2W11 OFF",
        "order": 2,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 2, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 1520,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "0542dd81abdb5ddd",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "1V03 ON",
        "label": "1V03 (TO GRH) ON",
        "order": 4,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 3, \"state\": \"ON\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 320,
        "y": 1120,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "49ebb9db97d03d31",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "1V03 OFF",
        "label": "1V03 OFF",
        "order": 5,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 3, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 1120,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "0c3281735a9c2b7f",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "1V02 ON",
        "label": "1V02 (TO AMB) ON",
        "order": 7,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{\"relay\":4,\"state\":\"ON\",\"bankByte\":1}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 340,
        "y": 1160,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "126047ba84c69f48",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "c34f777b31ff0d3e",
        "name": "1V02 OFF",
        "label": "1V02 OFF",
        "order": 8,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 4, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 1160,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "a77166e3053dac14",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "2V12 ON",
        "label": "2V12 (TO AMB) ON",
        "order": 7,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 5, \"state\": \"ON\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 360,
        "y": 1380,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "9f166e3e92b2bd9a",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "2V12 OFF",
        "label": "2V12 OFF",
        "order": 8,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 5, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 1380,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "1b24835d8cc576bc",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "Column 2 (Relay 5 to 8)",
        "info": "",
        "x": 400,
        "y": 1340,
        "wires": []
    },
    {
        "id": "ec78ed9651dc3290",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "2V13 ON",
        "label": "2V13 (TO GRH) ON",
        "order": 4,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 6, \"state\": \"ON\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "green",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 360,
        "y": 1420,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "8b32061fead7a451",
        "type": "ui-button",
        "z": "1403119fa516edbc",
        "group": "6cf2ef424cfcf0b9",
        "name": "2V13 OFF",
        "label": "2V13 OFF",
        "order": 5,
        "width": "2",
        "height": "1",
        "emulateClick": true,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "right",
        "payload": "{ \"relay\": 6, \"state\": \"OFF\", \"bankByte\": 1 }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "red",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 1420,
        "wires": [
            [
                "83281996a2f1a2db"
            ]
        ]
    },
    {
        "id": "b11400b735d1d6dc",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "Timeout 1000ms",
        "info": "",
        "x": 900,
        "y": 1200,
        "wires": []
    },
    {
        "id": "7a213a3f70e51f5c",
        "type": "comment",
        "z": "1403119fa516edbc",
        "name": "Trigger Status check every 1s",
        "info": "",
        "x": 980,
        "y": 1420,
        "wires": []
    },
    {
        "id": "bfe89f4f998d9406",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log W1LedLeft_status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.W1",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "1W01Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 1020,
        "wires": [
            [
                "529ccb527d7a1adb",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "e34e06365c0d5bc8",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log RD1LedLeft_status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.D1",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "1V03Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 1080,
        "wires": [
            [
                "333a49da219ff689",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "ea54de18c999e13b",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log W2LedRight state",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.W2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "2W11Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 1260,
        "wires": [
            [
                "9038a30e79fa9b9e",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "4601559a5fd11f34",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log RA1LedLeft_status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.A1",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "1V02Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 1140,
        "wires": [
            [
                "9930b50f4d0c218a",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "3ab309b8b5fdfa7a",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log RA2LedRight",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.A2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "2V12Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 1320,
        "wires": [
            [
                "f42ded24bb9d9760",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "b43868214a767915",
        "type": "change",
        "z": "1403119fa516edbc",
        "name": "Log RD2LedRight",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LD.Relay.D2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "2V13Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 1380,
        "wires": [
            [
                "31c402973caf54c1",
                "0c6b5d400a664fd1"
            ]
        ]
    },
    {
        "id": "0c6b5d400a664fd1",
        "type": "link out",
        "z": "1403119fa516edbc",
        "name": "Relays status CSV logger",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 1765,
        "y": 1180,
        "wires": []
    },
    {
        "id": "d8db1cabaa417771",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 415,
        "y": 400,
        "wires": [
            [
                "957396dddd79c2e1"
            ]
        ],
        "l": false
    },
    {
        "id": "957396dddd79c2e1",
        "type": "ui-slider",
        "z": "1403119fa516edbc",
        "group": "7aa27d4b2d1c0ea6",
        "name": "CTRL_1H01_Setpoint",
        "label": "SV",
        "tooltip": "",
        "order": 8,
        "width": "5",
        "height": "1",
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "thumbLabel": "true",
        "showTicks": "always",
        "min": "20",
        "max": "60",
        "step": "2",
        "className": "my-slider",
        "iconPrepend": "",
        "iconAppend": "",
        "color": "",
        "colorTrack": "",
        "colorThumb": "",
        "showTextField": true,
        "x": 580,
        "y": 400,
        "wires": [
            [
                "548d5058b74f2c39"
            ]
        ]
    },
    {
        "id": "548d5058b74f2c39",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "1PID Slider Val",
        "func": "\nflow.set(\"leftSliderPIDValue\", msg.payload);\n\n// Do not send anything downstream\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b2e9cccf5acf91ef",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 1145,
        "y": 380,
        "wires": [
            [
                "9b4941cf159aa305"
            ]
        ],
        "l": false
    },
    {
        "id": "9b4941cf159aa305",
        "type": "ui-slider",
        "z": "1403119fa516edbc",
        "group": "1150877cb6638246",
        "name": "2PID Slider",
        "label": "SV",
        "tooltip": "",
        "order": 8,
        "width": "5",
        "height": "1",
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "thumbLabel": "true",
        "showTicks": "always",
        "min": "20",
        "max": "60",
        "step": "2",
        "className": "my-slider",
        "iconPrepend": "",
        "iconAppend": "",
        "color": "",
        "colorTrack": "",
        "colorThumb": "",
        "showTextField": true,
        "x": 1280,
        "y": 380,
        "wires": [
            [
                "ed60cf8c6270dfbc"
            ]
        ]
    },
    {
        "id": "ed60cf8c6270dfbc",
        "type": "function",
        "z": "1403119fa516edbc",
        "name": "2PID Slider Val",
        "func": "\nflow.set(\"rightSliderPIDValue\", msg.payload);\n\n// Do not send anything downstream\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "b7c1199c7919c331",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1FN01_ON in",
        "links": [
            "a037d2362fd47b93",
            "7eb3590dbbadb68e",
            "5aa7b2eb8ab8c9eb",
            "47dd48fc9e098588"
        ],
        "x": 285,
        "y": 620,
        "wires": [
            [
                "fc070faa685a7962"
            ]
        ]
    },
    {
        "id": "48188a019460dd9b",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1FN01_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "14d1a2fe9e70cc51",
            "bda9a6fe572ae332",
            "b79b7884db6675ac"
        ],
        "x": 285,
        "y": 660,
        "wires": [
            [
                "f6c3055ad83f504a"
            ]
        ]
    },
    {
        "id": "a65e9356ac5d5ccb",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1FN01_ApplySpeed in",
        "links": [
            "cf214d0fcdf3a04e",
            "2419d74791a9c6b5",
            "ae0b12cdb3fad181",
            "43780727072cb924"
        ],
        "x": 285,
        "y": 700,
        "wires": [
            [
                "de29c55982b29d21"
            ]
        ]
    },
    {
        "id": "6df33e4d6a1a8207",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2FN11_ON in",
        "links": [
            "fd823111105788a9",
            "eea0bfc48448055f",
            "aadb86bee5b72c2d",
            "8c7ef42f0a7f092c"
        ],
        "x": 1075,
        "y": 660,
        "wires": [
            [
                "ddbc20e69cb59034"
            ]
        ]
    },
    {
        "id": "47774455ab8e2c96",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2FN11_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "6d99ec4bfb77a2cd",
            "c222848494997c7d",
            "d778401d952d7dc4"
        ],
        "x": 1075,
        "y": 700,
        "wires": [
            [
                "3e26c8be5b1a37db"
            ]
        ]
    },
    {
        "id": "993d9e6fabaa52f8",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2FN11_ApplySpeed in",
        "links": [
            "fb7565d11c1319f8",
            "5a302aa9f7b6d1cf",
            "09cf83999662e5af",
            "e6f1abeaf5bff63a"
        ],
        "x": 1075,
        "y": 740,
        "wires": [
            [
                "626a46cace2c8b83"
            ]
        ]
    },
    {
        "id": "f85db89020a0aff9",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1H01_ApplySetpoint in",
        "links": [
            "ca9092bcffc78745"
        ],
        "x": 425,
        "y": 200,
        "wires": [
            [
                "cb0496c183825ba3"
            ]
        ]
    },
    {
        "id": "3c96868f0b9621e4",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1H01_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "8822bbb942cb70e6"
        ],
        "x": 415,
        "y": 240,
        "wires": [
            [
                "93f93896d83f6fcd"
            ]
        ]
    },
    {
        "id": "d23910d5a02ab1f4",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1H01_ON in",
        "links": [
            "256e0a12b875a3d0"
        ],
        "x": 415,
        "y": 280,
        "wires": [
            [
                "9ff8e8baa3835407"
            ]
        ]
    },
    {
        "id": "8db5d40bdb0d309c",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2H11_ApplySetpoint in",
        "links": [
            "09d8813f376dd4a5"
        ],
        "x": 1135,
        "y": 160,
        "wires": [
            [
                "ced6add6200c5335"
            ]
        ]
    },
    {
        "id": "c5115244cbcb2d9e",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2H11_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "50abfad8dabfef4f"
        ],
        "x": 1135,
        "y": 200,
        "wires": [
            [
                "41386c2f7e4ebe88"
            ]
        ]
    },
    {
        "id": "e10185e7eac6d30e",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2H11_ON in",
        "links": [
            "7777eb537a6221bf"
        ],
        "x": 1135,
        "y": 240,
        "wires": [
            [
                "8a94f546723679fe"
            ]
        ]
    },
    {
        "id": "f1e4aab8e9fb67df",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1FN01_Speed in",
        "links": [
            "df01790b1592d828",
            "54fe1a2eacf168c5",
            "7c3b452f7014656e",
            "c48bea9e8ca86b4a"
        ],
        "x": 275,
        "y": 860,
        "wires": [
            [
                "ddf63abc196c7fe7"
            ]
        ]
    },
    {
        "id": "51134e2252ba24d4",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2FN11_Speed in",
        "links": [
            "e20e3959bc92f233",
            "6b5dcc4839b69522",
            "db3e69ea15232edf",
            "9d61bf538a4577bf"
        ],
        "x": 1115,
        "y": 860,
        "wires": [
            [
                "0e0e09c9b8eb4cf6"
            ]
        ]
    },
    {
        "id": "b512cfc18767ec53",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "30",
        "payloadType": "num",
        "x": 275,
        "y": 820,
        "wires": [
            [
                "ddf63abc196c7fe7"
            ]
        ],
        "l": false
    },
    {
        "id": "e58e678170ee2984",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1W01_ON in",
        "links": [
            "a86c6467c9fb6208"
        ],
        "x": 245,
        "y": 1040,
        "wires": [
            [
                "99bbddf82c7472b3"
            ]
        ]
    },
    {
        "id": "c05f7cce29a93a77",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1W01_OFF in",
        "links": [
            "3cd802cee8dd1f24",
            "3f75c26370e71eae",
            "f3414174ec3121f6"
        ],
        "x": 545,
        "y": 1040,
        "wires": [
            [
                "bb2f858bd4037237"
            ]
        ]
    },
    {
        "id": "4dad63c5a98beada",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1V03_ON in",
        "links": [
            "8c38c169120ca6c7"
        ],
        "x": 215,
        "y": 1120,
        "wires": [
            [
                "0542dd81abdb5ddd"
            ]
        ]
    },
    {
        "id": "2d20461dc714f005",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1V02_ON in",
        "links": [
            "ab602ecabc0d25f7",
            "b6b83c0b8cbf9409",
            "b6e0406cea5c1d18",
            "22dfc4f93e242e03",
            "d52e013585772451"
        ],
        "x": 235,
        "y": 1160,
        "wires": [
            [
                "0c3281735a9c2b7f"
            ]
        ]
    },
    {
        "id": "7ddae7dbd89f18a8",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1V03_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "5c988f635d8d8665",
            "b6e0406cea5c1d18",
            "f0419d96ee475a28",
            "d52e013585772451"
        ],
        "x": 545,
        "y": 1120,
        "wires": [
            [
                "49ebb9db97d03d31"
            ]
        ]
    },
    {
        "id": "80ef6666de84cde2",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1V02_OFF in",
        "links": [
            "3f75c26370e71eae",
            "f3414174ec3121f6",
            "f0419d96ee475a28",
            "f743a5a91418bb97"
        ],
        "x": 545,
        "y": 1160,
        "wires": [
            [
                "126047ba84c69f48"
            ]
        ]
    },
    {
        "id": "7374501bf2acd69f",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_1H01_Setpoint in",
        "links": [
            "4e7dcee64f4e6b59"
        ],
        "x": 405,
        "y": 440,
        "wires": [
            [
                "957396dddd79c2e1"
            ]
        ]
    },
    {
        "id": "7eca395656d5630a",
        "type": "inject",
        "z": "1403119fa516edbc",
        "name": "Start Value",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 1125,
        "y": 120,
        "wires": [
            [
                "ced6add6200c5335"
            ]
        ],
        "l": false
    },
    {
        "id": "c9c851ba11e88b24",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2H11_Setpoint in",
        "links": [
            "2b90992de9c737d2"
        ],
        "x": 1155,
        "y": 460,
        "wires": [
            [
                "9b4941cf159aa305"
            ]
        ]
    },
    {
        "id": "86567cf45245b2ee",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2W11_ON in",
        "links": [
            "0a7f0db00a90e009"
        ],
        "x": 215,
        "y": 1520,
        "wires": [
            [
                "c22f968b0e173907"
            ]
        ]
    },
    {
        "id": "a91115b20e76d8e1",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2V13_ON in",
        "links": [
            "4f454c5f23f00735"
        ],
        "x": 215,
        "y": 1420,
        "wires": [
            [
                "ec78ed9651dc3290"
            ]
        ]
    },
    {
        "id": "e989b4793a13d2bb",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2V12_ON in",
        "links": [
            "e8a4489430a5d5a1",
            "53856e8b313517fa",
            "f65b6c12f213e1f7",
            "a22be4dfe1e33821",
            "1f279fa7342e49fb"
        ],
        "x": 215,
        "y": 1380,
        "wires": [
            [
                "a77166e3053dac14"
            ]
        ]
    },
    {
        "id": "ab6e740910978d95",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2W11_OFF in",
        "links": [
            "56125b61d42406bc"
        ],
        "x": 545,
        "y": 1520,
        "wires": [
            [
                "0e75d61a0352e440"
            ]
        ]
    },
    {
        "id": "aa016c455a12fb99",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2V13_OFF in",
        "links": [
            "44777a65f27b2b93",
            "f65b6c12f213e1f7",
            "f8e69cce0876ff82"
        ],
        "x": 545,
        "y": 1420,
        "wires": [
            [
                "8b32061fead7a451"
            ]
        ]
    },
    {
        "id": "f761d7939247ce4f",
        "type": "link in",
        "z": "1403119fa516edbc",
        "name": "CTRL_2V12_OFF in",
        "links": [
            "f8e69cce0876ff82",
            "ecd319ddeca2cb48"
        ],
        "x": 545,
        "y": 1380,
        "wires": [
            [
                "9f166e3e92b2bd9a"
            ]
        ]
    },
    {
        "id": "5924d433d754919a",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A01-Co2Avg",
        "group": "1b0119535e1d3350",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Co2 Avg - ppm",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 740,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "19c98ca519eee321",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A01-Pressure",
        "group": "1b0119535e1d3350",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Pressure - Pa",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 480,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "0254d0206ff26664",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-Co2Avg in",
        "links": [
            "d8e2860fba7176d9"
        ],
        "x": 345,
        "y": 100,
        "wires": [
            [
                "5924d433d754919a",
                "4ad3fc5b262c6e7b"
            ]
        ]
    },
    {
        "id": "4f19c05b159c630e",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-Co2Row in",
        "links": [
            "981abf88d31ee20f"
        ],
        "x": 315,
        "y": 200,
        "wires": [
            [
                "ead7db65fa8570b0"
            ]
        ]
    },
    {
        "id": "d4760b58710f0e60",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A01-inT",
        "group": "1b0119535e1d3350",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 440,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "b8e7410383906526",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A01-inRH",
        "group": "1b0119535e1d3350",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Relative Humidity - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 450,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "89946beed66ccf16",
        "type": "function",
        "z": "c66b7a551a64a662",
        "name": "1A01- Abs Hum Calc",
        "func": "'use strict';\n\n// Expect msg.topic like \"LD.Temp.C\" or \"LD.RH.%\"\nconst zone = \"LD\";\nconst kind = String(msg.topic || '').toLowerCase();\n\nconst keyT  = `${zone}:T`;\nconst keyRH = `${zone}:RH`;\n\n// Cache latest readings in flow context\nif (kind.includes('temp.c')) {\n  const T = Number(msg.payload);\n  if (Number.isFinite(T)) flow.set(keyT, T);\n} else if (kind.includes('rh.%')) {\n  const RH = Number(msg.payload);\n  if (Number.isFinite(RH)) flow.set(keyRH, RH);\n}\n\n// Retrieve stored values\nconst T  = Number(flow.get(keyT));\nconst RH = Number(flow.get(keyRH));\n\n// Wait until both temperature and RH are available\nif (!Number.isFinite(T) || !Number.isFinite(RH)) return null;\n\n// --- Psychrometric formula for humidity ratio (kg water / kg dry air) ---\nconst P  = 1013.25; // hPa (standard atmospheric pressure)\nconst es = 6.112 * Math.exp((17.67 * T) / (T + 243.5)); // hPa\nconst Pv = (RH / 100) * es;                              // hPa\nconst w  = 0.622 * Pv / (P - Pv);                        // kg/kg\n\n// Round to 4 decimal places\nconst rounded = Math.round(w * 10000) / 10000;\n\nnode.status({ fill: 'yellow', shape: 'dot', text: `${zone} w=${rounded} kg/kg` });\n\nreturn {\n  topic: `${zone}.HumidityRatio.kgkg`,\n  payload: rounded\n};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 480,
        "wires": [
            [
                "9f374943c7d92fbd",
                "13ca1502899d0449"
            ]
        ]
    },
    {
        "id": "9f374943c7d92fbd",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A01- Abs Hum",
        "group": "1b0119535e1d3350",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": 3,
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Abs Hum (kgW/kgDA)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 680,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "1542fc5850b83c10",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-inT in",
        "links": [
            "a7f1444928606f20"
        ],
        "x": 315,
        "y": 300,
        "wires": [
            [
                "d4760b58710f0e60",
                "89946beed66ccf16",
                "5d9525d082d907b5"
            ]
        ]
    },
    {
        "id": "1129d8d3869f5de6",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-inRH in",
        "links": [
            "2fae17bce3b25869"
        ],
        "x": 315,
        "y": 380,
        "wires": [
            [
                "b8e7410383906526",
                "89946beed66ccf16",
                "3217634aebb2ecd2"
            ]
        ]
    },
    {
        "id": "7217733db8e3de6b",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A02-Co2Avg",
        "group": "44de1c430cbb5601",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Co2 Avg - ppm",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1600,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "8ad2cfef3ba1cd4e",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A02-Pressure",
        "group": "44de1c430cbb5601",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Pressure - Pa",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1500,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "18bf98dd11849e22",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A02-outT",
        "group": "44de1c430cbb5601",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1390,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "9bfa0a4da9379480",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A02-outRH",
        "group": "44de1c430cbb5601",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Relative Humidity - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1390,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "3575866c2c9e24fc",
        "type": "function",
        "z": "c66b7a551a64a662",
        "name": "1A02- Abs Hum Calc",
        "func": "'use strict';\n\n// Expect msg.topic like \"LU.Temp.C\" or \"LU.RH.%\"\nconst zone = \"LU\";\nconst kind = String(msg.topic || '').toLowerCase();\n\nconst keyT = `${zone}:T`;\nconst keyRH = `${zone}:RH`;\n\n// Cache latest values\nif (kind.includes('temp.c')) {\n  const T = Number(msg.payload);\n  if (Number.isFinite(T)) flow.set(keyT, T);\n} else if (kind.includes('rh.%')) {\n  const RH = Number(msg.payload);\n  if (Number.isFinite(RH)) flow.set(keyRH, RH);\n}\n\nconst T = Number(flow.get(keyT));\nconst RH = Number(flow.get(keyRH));\nif (!Number.isFinite(T) || !Number.isFinite(RH)) return null;\n\n// --- Humidity ratio (kg water / kg dry air) ---\nconst P = 1013.25; // hPa\nconst es = 6.112 * Math.exp((17.67 * T) / (T + 243.5));\nconst Pv = (RH / 100) * es;\nconst w = 0.622 * Pv / (P - Pv); // kg/kg\n\nconst rounded = Math.round(w * 10000) / 10000;  // 4 decimal places\nnode.status({ fill: 'blue', shape: 'dot', text: `${zone} w=${rounded} kg/kg` });\n\nreturn {\n  topic: `${zone}.HumidityRatio.kgkg`,\n  payload: rounded\n};\n",
        "outputs": 1,
        "timeout": "2",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 420,
        "wires": [
            [
                "3c6dc3feb57bf8f7",
                "11b167d717a13779"
            ]
        ]
    },
    {
        "id": "3c6dc3feb57bf8f7",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A02- Abs Hum",
        "group": "44de1c430cbb5601",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": 3,
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Abs Hum (kgW/kgDA)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1620,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "4e2b315de26381b2",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A02-Co2Avg in",
        "links": [
            "9d8b9620ef0f0ce9"
        ],
        "x": 1215,
        "y": 80,
        "wires": [
            [
                "7217733db8e3de6b",
                "53c6815f83aa8f1b"
            ]
        ]
    },
    {
        "id": "684a32c9a5581dfc",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A02-Co2Row in",
        "links": [
            "9f5a0f30d3449312"
        ],
        "x": 1235,
        "y": 160,
        "wires": [
            [
                "39be6ff2a1a6b063"
            ]
        ]
    },
    {
        "id": "1977e3ef1f68fdc6",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A02-inT in",
        "links": [
            "6f5cdcbd7e5cb1bf"
        ],
        "x": 1235,
        "y": 240,
        "wires": [
            [
                "18bf98dd11849e22",
                "3575866c2c9e24fc",
                "40d9f2b54a1b36cc"
            ]
        ]
    },
    {
        "id": "28ce05a291d20fa7",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A02-inRH in",
        "links": [
            "52103ff8eb9bd88c"
        ],
        "x": 1235,
        "y": 320,
        "wires": [
            [
                "9bfa0a4da9379480",
                "3575866c2c9e24fc",
                "7b735cdcb402a623"
            ]
        ]
    },
    {
        "id": "12718dd87da0fb99",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A05-DP",
        "group": "be8e2d192e710aa5",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "3",
        "gtype": "gauge-half",
        "gstyle": "rounded",
        "title": "Diff Pressure (1A05)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Pa",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#5cd65c",
                "text": "",
                "textType": "label"
            },
            {
                "from": "400",
                "color": "#5250e2",
                "text": "",
                "textType": "label"
            },
            {
                "from": "1000",
                "color": "#ffc800",
                "text": "",
                "textType": "label"
            },
            {
                "from": "2000",
                "color": "#ea5353",
                "text": "",
                "textType": "label"
            }
        ],
        "min": "0",
        "max": "4000",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 495,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "0a33548b293abdee",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A05-DP in",
        "links": [
            "56be357dc8e0ee39"
        ],
        "x": 335,
        "y": 800,
        "wires": [
            [
                "12718dd87da0fb99",
                "ce1fca5a360eee31"
            ]
        ]
    },
    {
        "id": "5ab7a65a2ccf77ca",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A08-T in",
        "links": [
            "d57293716f9a2e57"
        ],
        "x": 330,
        "y": 900,
        "wires": [
            [
                "13f2452fbbaf7999",
                "4b6e78c1d369a8fc"
            ]
        ]
    },
    {
        "id": "13f2452fbbaf7999",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A08-T",
        "group": "d0e68dc802300da0",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "EE650-Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 480,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "e54373885f182723",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1A08-VEL",
        "group": "d0e68dc802300da0",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Air flow (m3/hr)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 705,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "8ebcf932c1308633",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "calc-flow",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round($number(payload) * 25, 2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 495,
        "y": 1020,
        "wires": [
            [
                "e54373885f182723",
                "13d2cbb62580a713"
            ]
        ]
    },
    {
        "id": "9e481d32aed00684",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1VEL-CLMN",
        "group": "d0e68dc802300da0",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Column Velocity (m/s)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 705,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "11983bc4c08f43c8",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "calc-clmn vel",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round($number(payload) * 0.21673, 2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 505,
        "y": 1100,
        "wires": [
            [
                "9e481d32aed00684",
                "e5bb6d8d812ff10f"
            ]
        ]
    },
    {
        "id": "64a26e46b03e9148",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A08-VEL 1VEL-CLMN in",
        "links": [
            "7e5ea86aad748998"
        ],
        "x": 320,
        "y": 1020,
        "wires": [
            [
                "8ebcf932c1308633",
                "11983bc4c08f43c8"
            ]
        ]
    },
    {
        "id": "44a92d7f9978c35d",
        "type": "ui-led",
        "z": "c66b7a551a64a662",
        "name": "Clm1- PID Status",
        "group": "7aa27d4b2d1c0ea6",
        "order": 2,
        "width": "2",
        "height": "1",
        "label": "Heater ON",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 905,
        "y": 1420,
        "wires": []
    },
    {
        "id": "0d414470f7a5c557",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1PID SV",
        "group": "7aa27d4b2d1c0ea6",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Current Set Point Value - SV",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 695,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "c665507c0d49ac43",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1PID PV",
        "group": "7aa27d4b2d1c0ea6",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Current Measured Value - PV",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 695,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "ce22d9986f5e1adc",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1PID PecrentP",
        "group": "7aa27d4b2d1c0ea6",
        "order": 6,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Power Output - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 715,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "1ce3654b0d7fa904",
        "type": "function",
        "z": "c66b7a551a64a662",
        "name": "PID Split- Clm1",
        "func": "// Outputs (5):\n// 1: PV (number)\n// 2: SP (number)\n// 3: Power % (number)\n// 4: Mode text (\"Auto\"/\"Manual\"/\"Standby\"/\"Unknown\")\n// 5: LED boolean (Auto=true; Manual/Standby/Unknown=false)\n\nconst r = msg.payload;\nif (!Array.isArray(r) || r.length < 15) {\n  node.error(\"PID block requires 15 registers (addr 1..15)\", msg);\n  return [null, null, null, null, null];\n}\n\n// dP and scaler\nconst dP = Number(r[1] || 0);\nconst scale = v => Math.round((v / Math.pow(10, dP)) * 100) / 100;\n\n// Decode basics\nconst pv = scale(r[0]);                          // addr 1\nconst sp = scale(r[2]);                          // addr 3 (operative SP)\nconst powerPct = Math.round((r[3] / 100) * 100) / 100; // addr 4 (2 implied dp)\nconst modeCode = Number(r[14] || 0);                   // addr 15 (0=Auto,1=Manual,2=Standby)\n\n// Text + LED boolean (Auto = true)\nconst modeText = (modeCode === 0) ? \"Auto\" : (modeCode === 1) ? \"Manual\" :\n  (modeCode === 2) ? \"Standby\" : \"Unknown\";\nconst ledOn = (modeCode === 0); // ONLY Auto turns the LED on\n\n// Status\n//node.status({\n//  fill: ledOn ? \"green\" : (modeCode === 2 ? \"grey\" : \"yellow\"),\n//  shape: \"dot\",\n//  text: `PV ${pv}  SP ${sp}  ${powerPct}%  ${modeText}`\n//});\n\n// Fan out\nreturn [\n  { topic: \"PID.PV\", payload: pv },\n  { topic: \"PID.SP\", payload: sp },\n  { topic: \"PID.Power.%\", payload: powerPct },\n  { topic: \"PID.Mode.Text\", payload: modeText },\n  { topic: \"PID.Mode.Boolean\", payload: ledOn }  // <-- wire this to ui_led\n];\n",
        "outputs": 5,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 395,
        "y": 1300,
        "wires": [
            [
                "c665507c0d49ac43",
                "8ee7cdcdea2af38f"
            ],
            [
                "0d414470f7a5c557",
                "5087d0bb87055591"
            ],
            [
                "ce22d9986f5e1adc"
            ],
            [],
            [
                "0b4e54d8f971e0ed"
            ]
        ]
    },
    {
        "id": "0b4e54d8f971e0ed",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "log 1H01 status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "L.1H01",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "1H01Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 715,
        "y": 1360,
        "wires": [
            [
                "44a92d7f9978c35d",
                "a4e54ab6b18d6591"
            ]
        ]
    },
    {
        "id": "a4e54ab6b18d6591",
        "type": "link out",
        "z": "c66b7a551a64a662",
        "name": "1H01 status CSV Log",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 860,
        "y": 1360,
        "wires": []
    },
    {
        "id": "7ea8b8fee60faf5a",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "PID CLMN 1 in",
        "links": [
            "85f09583b79293ab"
        ],
        "x": 270,
        "y": 1300,
        "wires": [
            [
                "1ce3654b0d7fa904"
            ]
        ]
    },
    {
        "id": "f755b0164be3dbe2",
        "type": "ui-led",
        "z": "c66b7a551a64a662",
        "name": "1FN01-LED",
        "group": "b135539d7634acf8",
        "order": 3,
        "width": "1",
        "height": "1",
        "label": "Motor ON",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1670,
        "y": 1000,
        "wires": []
    },
    {
        "id": "ec922cdd6a0c1c3e",
        "type": "ui-gauge",
        "z": "c66b7a551a64a662",
        "name": "1FN01-freq",
        "group": "b135539d7634acf8",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "1",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Frequency- HZ",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "20",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "20",
        "max": "60",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1670,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "ce724453e9e98d61",
        "type": "function",
        "z": "c66b7a551a64a662",
        "name": "split Clm1 drive",
        "func": "// Expect input: msg.payload = [frequency, power, current, voltage, motorLedRaw, extra1]\nif (!Array.isArray(msg.payload) || msg.payload.length < 6) {\n  node.error(\"Expected an array of 6 values: [f, p, i, v, motorLedRaw, extra1]\", msg);\n  return null;\n}\n\n// Destructure in correct order\nconst [fRaw, pRaw, iRaw, vRaw, motorLedRaw, extra1] = msg.payload;\n\n// helper: round to 2 dp\nconst r2 = n => Math.round(n * 100) / 100;\n\n// Scale per your spec\nconst frequencyHz = r2(fRaw / 100);   // Hz\nconst powerW      = r2(pRaw / 100);   // W\nconst currentA    = r2(iRaw / 100);   // A\nconst voltageV    = r2(vRaw / 10);    // V\nconst motorOn     = (motorLedRaw !== 0); // boolean\n\n// Six outputs: 1 Freq, 2 Power, 3 Current, 4 Voltage, 5 Motor LED, 6 Extra1\nreturn [\n  { topic: \"L.VFD.freq.Hz\",   payload: frequencyHz }, // Output 1\n  { topic: \"VFD.power.W\",   payload: powerW },      // Output 2\n  { topic: \"VFD.current.A\", payload: currentA },    // Output 3\n  { topic: \"VFD.voltage.V\", payload: voltageV },    // Output 4\n  { topic: \"VFD.motorLED\",  payload: motorOn },     // Output 5\n  { topic: \"VFD.extra1\",    payload: extra1 }       // Output 6\n];\n",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 980,
        "wires": [
            [
                "ec922cdd6a0c1c3e",
                "191128db1e72b7a8",
                "3896b7a73dd3614c"
            ],
            [],
            [],
            [],
            [
                "f755b0164be3dbe2",
                "a9fae1ce8b9c92ba"
            ],
            []
        ]
    },
    {
        "id": "191128db1e72b7a8",
        "type": "link out",
        "z": "c66b7a551a64a662",
        "name": "1FN01 freq CSV log",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 1785,
        "y": 920,
        "wires": []
    },
    {
        "id": "b0bdeb5fbab50e6e",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1FN01 in",
        "links": [
            "af1233ca75f866d5"
        ],
        "x": 1265,
        "y": 980,
        "wires": [
            [
                "ce724453e9e98d61"
            ]
        ]
    },
    {
        "id": "4ad3fc5b262c6e7b",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-Co2Avg",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "ce1fca5a360eee31",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A05-DP",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 525,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "4b6e78c1d369a8fc",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A08-T",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 505,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "13d2cbb62580a713",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A08-VEL",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 735,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "e5bb6d8d812ff10f",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1VEL-CLMN",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 735,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "8ee7cdcdea2af38f",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1PIDPV",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 625,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "3896b7a73dd3614c",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1FN01Freq",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "53c6815f83aa8f1b",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-Co2Avg",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1630,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "39be6ff2a1a6b063",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-Co2Raw",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1430,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "40d9f2b54a1b36cc",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-inT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "7b735cdcb402a623",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-inRH",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1420,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "11b167d717a13779",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-AbsHum",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "13ca1502899d0449",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-AbsHum",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "3217634aebb2ecd2",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-inRH",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "ead7db65fa8570b0",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-Co2Raw",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "5d9525d082d907b5",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-inT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "5087d0bb87055591",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1PIDSV",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 885,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "a9fae1ce8b9c92ba",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1FN01Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1690,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "e096bbf90304d4d5",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-Pressure in",
        "links": [
            "1642dbd3499b96f8"
        ],
        "x": 329.33331298828125,
        "y": 606.3333129882812,
        "wires": [
            [
                "c58debd836e4473c",
                "dfeac1c909260d22",
                "19c98ca519eee321"
            ]
        ]
    },
    {
        "id": "c58debd836e4473c",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A01-pressure",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "dfeac1c909260d22",
        "type": "debug",
        "z": "c66b7a551a64a662",
        "d": true,
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 660,
        "wires": []
    },
    {
        "id": "85948bf4b7d93eb3",
        "type": "link in",
        "z": "c66b7a551a64a662",
        "name": "1A01-Pressure in",
        "links": [
            "dda5933f4ba06375"
        ],
        "x": 1345,
        "y": 620,
        "wires": [
            [
                "e5bf57c79046ebf0",
                "8ad2cfef3ba1cd4e"
            ]
        ]
    },
    {
        "id": "e5bf57c79046ebf0",
        "type": "change",
        "z": "c66b7a551a64a662",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "1A02-pressure",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1517.333251953125,
        "y": 682.3333129882812,
        "wires": [
            []
        ]
    },
    {
        "id": "bb1abfd8b402a5f4",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A11-Co2Avg",
        "group": "b4e0dab4bd8c05b7",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Co2 Avg - ppm",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 660,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "47cb9c72ec97b10d",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A11-Pressure",
        "group": "b4e0dab4bd8c05b7",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Pressure - Pa",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 540,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "f0465fdbfea65f13",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A11-inT",
        "group": "b4e0dab4bd8c05b7",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 440,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "4754da5f4a7d1529",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A11-inRH",
        "group": "b4e0dab4bd8c05b7",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Relative Humidity - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 450,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "3ee48b919be3de48",
        "type": "function",
        "z": "10001e665f59bd89",
        "name": "2A11- Abs Hum Calc",
        "func": "'use strict';\n\n// Expect msg.topic like \"RD.Temp.C\" or \"RD.RH.%\"\nconst zone = \"RD\";\nconst kind = String(msg.topic || '').toLowerCase();\n\nconst keyT = `${zone}:T`;\nconst keyRH = `${zone}:RH`;\n\nif (kind.includes('temp.c')) {\n  const T = Number(msg.payload);\n  if (Number.isFinite(T)) flow.set(keyT, T);\n} else if (kind.includes('rh.%')) {\n  const RH = Number(msg.payload);\n  if (Number.isFinite(RH)) flow.set(keyRH, RH);\n}\n\nconst T = Number(flow.get(keyT));\nconst RH = Number(flow.get(keyRH));\nif (!Number.isFinite(T) || !Number.isFinite(RH)) return null;\n\nconst P = 1013.25; // hPa\nconst es = 6.112 * Math.exp((17.67 * T) / (T + 243.5));\nconst Pv = (RH / 100) * es;\nconst w = 0.622 * Pv / (P - Pv);\n\nconst rounded = Math.round(w * 10000) / 10000;\nnode.status({ fill: 'green', shape: 'dot', text: `${zone} w=${rounded} kg/kg` });\n\nreturn {\n  topic: `${zone}.HumidityRatio.kgkg`,\n  payload: rounded\n};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 460,
        "wires": [
            [
                "4d6df227625b3720",
                "145fc32aa186a1ae"
            ]
        ]
    },
    {
        "id": "4d6df227625b3720",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A11- Abs Hum",
        "group": "b4e0dab4bd8c05b7",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": 3,
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Abs Hum (kgW/kgDA)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 680,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "797da0fc6afe129d",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-Co2Avg in",
        "links": [
            "08a51bcbe831615d"
        ],
        "x": 325,
        "y": 140,
        "wires": [
            [
                "bb1abfd8b402a5f4",
                "219325094fcfd1a2"
            ]
        ]
    },
    {
        "id": "a333d286cfdef342",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-Co2Row in",
        "links": [
            "300cb7eaefa4a529"
        ],
        "x": 325,
        "y": 220,
        "wires": [
            [
                "bc9783b91c6d1102"
            ]
        ]
    },
    {
        "id": "28bc777d2e3ca27e",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-inT in",
        "links": [
            "c3181626a8bd5fe0"
        ],
        "x": 325,
        "y": 300,
        "wires": [
            [
                "f0465fdbfea65f13",
                "3ee48b919be3de48",
                "cc97661bea02342e"
            ]
        ]
    },
    {
        "id": "979d5fc6c4db06df",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-inRH in",
        "links": [
            "2fcaa658905612c3"
        ],
        "x": 325,
        "y": 380,
        "wires": [
            [
                "4754da5f4a7d1529",
                "3ee48b919be3de48",
                "3332de44eb9a842e"
            ]
        ]
    },
    {
        "id": "15aed3b435a6b395",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A12-Co2Avg",
        "group": "ac6a5966878e6de8",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Co2 Avg - ppm",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "9ce225f4822551a7",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A12-Pressure",
        "group": "ac6a5966878e6de8",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Pressure - Pa",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1560,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "fcd98a67ec89d6ac",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A12-outT",
        "group": "ac6a5966878e6de8",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1490,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "4c210153dc785293",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A12-outRH",
        "group": "ac6a5966878e6de8",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Relative Humidity - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1490,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "1dd0a6b04fc30b84",
        "type": "function",
        "z": "10001e665f59bd89",
        "name": "2A12- Abs Hum Calc",
        "func": "'use strict';\n\n// Expect msg.topic like \"RU.Temp.C\" or \"RU.RH.%\"\nconst zone = \"RU\";\nconst kind = String(msg.topic || '').toLowerCase();\n\nconst keyT  = `${zone}:T`;\nconst keyRH = `${zone}:RH`;\n\nif (kind.includes('temp.c')) {\n  const T = Number(msg.payload);\n  if (Number.isFinite(T)) flow.set(keyT, T);\n} else if (kind.includes('rh.%')) {\n  const RH = Number(msg.payload);\n  if (Number.isFinite(RH)) flow.set(keyRH, RH);\n}\n\nconst T  = Number(flow.get(keyT));\nconst RH = Number(flow.get(keyRH));\nif (!Number.isFinite(T) || !Number.isFinite(RH)) return null;\n\nconst P  = 1013.25; // hPa\nconst es = 6.112 * Math.exp((17.67 * T) / (T + 243.5));\nconst Pv = (RH / 100) * es;\nconst w  = 0.622 * Pv / (P - Pv);\n\nconst rounded = Math.round(w * 10000) / 10000;\nnode.status({ fill: 'purple', shape: 'dot', text: `${zone} w=${rounded} kg/kg` });\n\nreturn {\n  topic: `${zone}.HumidityRatio.kgkg`,\n  payload: rounded\n};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 440,
        "wires": [
            [
                "b7910a618b594370",
                "ed974824741ebd46"
            ]
        ]
    },
    {
        "id": "b7910a618b594370",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A12- Abs Hum",
        "group": "ac6a5966878e6de8",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": 3,
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Abs Hum (kgW/kgDA)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1720,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "713910d477499b7c",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A12-Co2Avg in",
        "links": [
            "7ff7bcedab7fbea1"
        ],
        "x": 1145,
        "y": 120,
        "wires": [
            [
                "15aed3b435a6b395",
                "3be0f9e49b622fe0"
            ]
        ]
    },
    {
        "id": "bb067629307b39a5",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A12-Co2Row in",
        "links": [
            "ce61628ad1a77e95"
        ],
        "x": 1335,
        "y": 200,
        "wires": [
            [
                "6b8b0165e808ceb4"
            ]
        ]
    },
    {
        "id": "7f00a66d3933a71e",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A12-inT in",
        "links": [
            "4f19ea30d9453e03"
        ],
        "x": 1335,
        "y": 280,
        "wires": [
            [
                "fcd98a67ec89d6ac",
                "1dd0a6b04fc30b84",
                "f680dcb589bdde17"
            ]
        ]
    },
    {
        "id": "30d025f862387527",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A12-inRH in",
        "links": [
            "ba4a97f7b2771a77"
        ],
        "x": 1335,
        "y": 320,
        "wires": [
            [
                "4c210153dc785293",
                "1dd0a6b04fc30b84",
                "3eb143b402bef361"
            ]
        ]
    },
    {
        "id": "44e07ced2b05b1a4",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A18-T",
        "group": "c4b796b294db2552",
        "order": 3,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "EE650-Temperature - C",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 500,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "9ca2e6f085e2fe43",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A15-DP",
        "group": "14ffaba87334b6a7",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "3",
        "gtype": "gauge-half",
        "gstyle": "rounded",
        "title": "Diff Pressure (2A15)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Pa",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#5cd65c",
                "text": "",
                "textType": "label"
            },
            {
                "from": "400",
                "color": "#5250e2",
                "text": "",
                "textType": "label"
            },
            {
                "from": "1000",
                "color": "#ffc800",
                "text": "",
                "textType": "label"
            },
            {
                "from": "2000",
                "color": "#ea5353",
                "text": "",
                "textType": "label"
            }
        ],
        "min": "0",
        "max": "4000",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 500,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "970f4af5aefd4544",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A15-DP in",
        "links": [
            "9ddfa1e6653269ed"
        ],
        "x": 365,
        "y": 820,
        "wires": [
            [
                "9ca2e6f085e2fe43",
                "58b6cee9bc06e584"
            ]
        ]
    },
    {
        "id": "8af7c497d2cf05c0",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A18-T in",
        "links": [
            "40e43d48fde50feb"
        ],
        "x": 365,
        "y": 920,
        "wires": [
            [
                "44e07ced2b05b1a4",
                "0add66e39b9c2354"
            ]
        ]
    },
    {
        "id": "a6de4656924fdb09",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2A18-VEL",
        "group": "c4b796b294db2552",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Air flow (m3/hr)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 690,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "f7814370c9fa405c",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2VEL-CLMN",
        "group": "c4b796b294db2552",
        "order": 1,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "needle",
        "title": "Column Velocity (m/s)",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "units",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": 0,
        "max": 10,
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 690,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "c44c367aba755023",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "calc-clmn vel",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round($number(payload) * 0.21673, 2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1080,
        "wires": [
            [
                "f7814370c9fa405c",
                "db111dcaa0df8f30"
            ]
        ]
    },
    {
        "id": "6cc079a1bb910371",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "calc-flow",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round($number(payload) * 25, 2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1000,
        "wires": [
            [
                "a6de4656924fdb09",
                "efe036abc4e1da45"
            ]
        ]
    },
    {
        "id": "fcec934dc86f4db3",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A18-VEL 2VEL-CLMN in",
        "links": [
            "767eb1360d0db082"
        ],
        "x": 365,
        "y": 1000,
        "wires": [
            [
                "6cc079a1bb910371",
                "c44c367aba755023"
            ]
        ]
    },
    {
        "id": "002138fbdff70508",
        "type": "ui-led",
        "z": "10001e665f59bd89",
        "name": "Clm2- Heater Status",
        "group": "1150877cb6638246",
        "order": 2,
        "width": "2",
        "height": "1",
        "label": "Heater ON",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 740,
        "y": 1520,
        "wires": []
    },
    {
        "id": "5c96c06cde18cb0d",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2PID SV",
        "group": "1150877cb6638246",
        "order": 4,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Current Set Point Value - SV",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 680,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "a21b5e225a789540",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2PID PV",
        "group": "1150877cb6638246",
        "order": 5,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Current Measure Value - PV",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 680,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "3f26d60bb828db53",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2PID PecrentP",
        "group": "1150877cb6638246",
        "order": 6,
        "value": "payload",
        "valueType": "msg",
        "width": "2",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Power Output - %",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#fcfcfc",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "0",
        "max": "100",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 700,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "9731f1f3aeebbf04",
        "type": "function",
        "z": "10001e665f59bd89",
        "name": "PID Split - Clm2",
        "func": "// Outputs (5):\n// 1: PV (number)\n// 2: SP (number)\n// 3: Power % (number)\n// 4: Mode text (\"Auto\"/\"Manual\"/\"Standby\"/\"Unknown\")\n// 5: LED boolean (Auto=true; Manual/Standby/Unknown=false)\n\nconst r = msg.payload;\nif (!Array.isArray(r) || r.length < 15) {\n  node.error(\"PID block requires 15 registers (addr 1..15)\", msg);\n  return [null, null, null, null, null];\n}\n\n// dP and scaler\nconst dP = Number(r[1] || 0);\nconst scale = v => Math.round((v / Math.pow(10, dP)) * 100) / 100;\n\n// Decode basics\nconst pv = scale(r[0]);                          // addr 1\nconst sp = scale(r[2]);                          // addr 3 (operative SP)\nconst powerPct = Math.round((r[3] / 100) * 100) / 100; // addr 4 (2 implied dp)\nconst modeCode = Number(r[14] || 0);                   // addr 15 (0=Auto,1=Manual,2=Standby)\n\n// Text + LED boolean (Auto = true)\nconst modeText = (modeCode === 0) ? \"Auto\" : (modeCode === 1) ? \"Manual\" :\n  (modeCode === 2) ? \"Standby\" : \"Unknown\";\nconst ledOn = (modeCode === 0); // ONLY Auto turns the LED on\n\n// Status\n//node.status({\n//  fill: ledOn ? \"green\" : (modeCode === 2 ? \"grey\" : \"yellow\"),\n//  shape: \"dot\",\n//  text: `PV ${pv}  SP ${sp}  ${powerPct}%  ${modeText}`\n//});\n\n// Fan out\nreturn [\n  { topic: \"PID.PV\", payload: pv },\n  { topic: \"PID.SP\", payload: sp },\n  { topic: \"PID.Power.%\", payload: powerPct },\n  { topic: \"PID.Mode.Text\", payload: modeText },\n  { topic: \"PID.Mode.Boolean\", payload: ledOn }  // <-- wire this to ui_led\n];\n",
        "outputs": 5,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1360,
        "wires": [
            [
                "a21b5e225a789540",
                "17f3512aa1e630b7"
            ],
            [
                "5c96c06cde18cb0d",
                "eab6f5a37730533a"
            ],
            [
                "3f26d60bb828db53"
            ],
            [],
            [
                "ef8b6befafec9e25",
                "034f5085c925d2bc"
            ]
        ]
    },
    {
        "id": "ef8b6befafec9e25",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "log 2H11 status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "R.2H11",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "2H11Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1440,
        "wires": [
            [
                "002138fbdff70508",
                "034f5085c925d2bc"
            ]
        ]
    },
    {
        "id": "536d15e7d4edb52c",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "PID CLMN 2 in",
        "links": [
            "1e6cd92195f09053"
        ],
        "x": 285,
        "y": 1360,
        "wires": [
            [
                "9731f1f3aeebbf04"
            ]
        ]
    },
    {
        "id": "034f5085c925d2bc",
        "type": "link out",
        "z": "10001e665f59bd89",
        "name": "2H11 status CSV Log",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 685,
        "y": 1440,
        "wires": []
    },
    {
        "id": "be32f546048c8eea",
        "type": "ui-led",
        "z": "10001e665f59bd89",
        "name": "2FN11-LED",
        "group": "13816c2f51c27294",
        "order": 3,
        "width": "1",
        "height": "1",
        "label": "Motor ON",
        "labelPlacement": "left",
        "labelAlignment": "flex-end",
        "states": [
            {
                "value": "false",
                "valueType": "bool",
                "color": "#ff0000"
            },
            {
                "value": "true",
                "valueType": "bool",
                "color": "#00ff00"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showBorder": true,
        "showGlow": true,
        "x": 1510,
        "y": 900,
        "wires": []
    },
    {
        "id": "c618e2adf5ac70b1",
        "type": "function",
        "z": "10001e665f59bd89",
        "name": "split Clm2 drive",
        "func": "// Expect input: msg.payload = [frequency, power, current, voltage, motorLedRaw, extra1]\nif (!Array.isArray(msg.payload) || msg.payload.length < 6) {\n  node.error(\"Expected an array of 6 values: [f, p, i, v, motorLedRaw, extra1]\", msg);\n  return null;\n}\n\n// Destructure in correct order\nconst [fRaw, pRaw, iRaw, vRaw, motorLedRaw, extra1] = msg.payload;\n\n// helper: round to 2 dp\nconst r2 = n => Math.round(n * 100) / 100;\n\n// Scale per your spec\nconst frequencyHz = r2(fRaw / 100);   // Hz\nconst powerW      = r2(pRaw / 100);   // W\nconst currentA    = r2(iRaw / 100);   // A\nconst voltageV    = r2(vRaw / 10);    // V\nconst motorOn     = (motorLedRaw !== 0); // boolean\n\n// Six outputs: 1 Freq, 2 Power, 3 Current, 4 Voltage, 5 Motor LED, 6 Extra1\nreturn [\n  { topic: \"R.VFD.freq.Hz\",   payload: frequencyHz }, // Output 1\n  { topic: \"VFD.power.W\",   payload: powerW },      // Output 2\n  { topic: \"VFD.current.A\", payload: currentA },    // Output 3\n  { topic: \"VFD.voltage.V\", payload: voltageV },    // Output 4\n  { topic: \"VFD.motorLED\",  payload: motorOn },     // Output 5\n  { topic: \"VFD.extra1\",    payload: extra1 }       // Output 6\n];\n\n\n/*\n// --- Expect input: msg.payload = [f, p, i, v, extra1, motorLed]\nif (!Array.isArray(msg.payload) || msg.payload.length < 6) {\n    node.error(\"Expected an array of at least 6 values (TagX/TagX2)\", msg);\n    return null;\n}\n\n// Destructure 6 values\nconst [frequency, power, current, voltage, motorLedRaw, extra1] = msg.payload;\n\n// Scale & send each value to its own output\nreturn [\n    { payload: frequency / 100 }, // Output 1 - Frequency\n    { payload: power / 100 },     // Output 2 - Power\n    { payload: current / 100 },   // Output 3 - Current\n    { payload: voltage / 10 },    // Output 4 - Voltage\n    { payload: motorLedRaw !== 0 },          // Output 5 - Extra value (raw or scale if needed)\n    { payload: extra1 } // Output 6 - MotorLed (boolean)\n];\n*/",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 880,
        "wires": [
            [
                "5905f8216b79b4a8",
                "21cf8a6d2cb722b0",
                "9d8434bddb4fed70"
            ],
            [],
            [],
            [],
            [
                "be32f546048c8eea",
                "4201ef065015798b"
            ],
            []
        ]
    },
    {
        "id": "5905f8216b79b4a8",
        "type": "ui-gauge",
        "z": "10001e665f59bd89",
        "name": "2FN11-freq",
        "group": "13816c2f51c27294",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "1",
        "height": "2",
        "gtype": "gauge-tile",
        "gstyle": "rounded",
        "title": "Frequency - HZ",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Hz",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "20",
                "color": "#fafafa",
                "text": "",
                "textType": "value"
            }
        ],
        "min": "20",
        "max": "60",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 1510,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "21cf8a6d2cb722b0",
        "type": "link out",
        "z": "10001e665f59bd89",
        "name": "2FN11 freq CSV log",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 1655,
        "y": 820,
        "wires": []
    },
    {
        "id": "6733695465f9e172",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2FN11 in",
        "links": [
            "2ec7981f8058b999"
        ],
        "x": 1155,
        "y": 880,
        "wires": [
            [
                "c618e2adf5ac70b1"
            ]
        ]
    },
    {
        "id": "145fc32aa186a1ae",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-AbsHum",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "3332de44eb9a842e",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-inRH",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "cc97661bea02342e",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-inT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "bc9783b91c6d1102",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-Co2Raw",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "219325094fcfd1a2",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-Co2Avg",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "3be0f9e49b622fe0",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-Co2Avg",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "6b8b0165e808ceb4",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-Co2Raw",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "f680dcb589bdde17",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-inT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "3eb143b402bef361",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-inRH",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1520,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ed974824741ebd46",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-AbsHum",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1750,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "58b6cee9bc06e584",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A15-DP",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "0add66e39b9c2354",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A18-T",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "efe036abc4e1da45",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A18-VEL",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "db111dcaa0df8f30",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2VEL-CLMN",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "17f3512aa1e630b7",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2PIDPV",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "9d8434bddb4fed70",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2FN11Freq",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "eab6f5a37730533a",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2PIDSV",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "4201ef065015798b",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2FN11Status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1586.333251953125,
        "y": 950.3333129882812,
        "wires": [
            []
        ]
    },
    {
        "id": "b8e9d953e7781e96",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-Pressure in",
        "links": [
            "95d3f3a8936c5dff"
        ],
        "x": 405,
        "y": 600,
        "wires": [
            [
                "1eb8b90ea7ab4c8f",
                "9524053d1cec01c6",
                "47cb9c72ec97b10d"
            ]
        ]
    },
    {
        "id": "1eb8b90ea7ab4c8f",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A11-pressure",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565.6666870117188,
        "y": 613.6666870117188,
        "wires": [
            []
        ]
    },
    {
        "id": "9524053d1cec01c6",
        "type": "debug",
        "z": "10001e665f59bd89",
        "d": true,
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 680,
        "wires": []
    },
    {
        "id": "a2d4c9edaa706614",
        "type": "link in",
        "z": "10001e665f59bd89",
        "name": "2A11-Pressure in",
        "links": [
            "2a2d3ec53c111c16"
        ],
        "x": 1425,
        "y": 620,
        "wires": [
            [
                "4547d7583f188c27",
                "9ce225f4822551a7"
            ]
        ]
    },
    {
        "id": "4547d7583f188c27",
        "type": "change",
        "z": "10001e665f59bd89",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "2A12-pressure",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1585.6666870117188,
        "y": 633.6666870117188,
        "wires": [
            []
        ]
    },
    {
        "id": "5c7f367b37c3a2d1",
        "type": "ui-gauge",
        "z": "075d77875852cf19",
        "name": "1EM-3A20",
        "group": "be8e2d192e710aa5",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "3",
        "gtype": "gauge-half",
        "gstyle": "rounded",
        "title": "Energy Meter w/ Fans",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Watt",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#5cd65c",
                "text": "",
                "textType": "label"
            },
            {
                "from": "2000",
                "color": "#ffc800",
                "text": "",
                "textType": "label"
            },
            {
                "from": "3000",
                "color": "#ea5353",
                "text": "",
                "textType": "label"
            }
        ],
        "min": "0",
        "max": "4000",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 590,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "ac0773dd308a64e8",
        "type": "link in",
        "z": "075d77875852cf19",
        "name": "1EM-3A20 in",
        "links": [
            "9e819b4f8603a9f4"
        ],
        "x": 485,
        "y": 220,
        "wires": [
            [
                "5c7f367b37c3a2d1"
            ]
        ]
    },
    {
        "id": "7e09f978d15d0233",
        "type": "ui-gauge",
        "z": "075d77875852cf19",
        "name": "2EM-3A21",
        "group": "14ffaba87334b6a7",
        "order": 2,
        "value": "payload",
        "valueType": "msg",
        "width": "3",
        "height": "3",
        "gtype": "gauge-half",
        "gstyle": "rounded",
        "title": "Energy Meter w/ Heaters",
        "alwaysShowTitle": true,
        "floatingTitlePosition": "top-left",
        "units": "Watt",
        "icon": "",
        "prefix": "",
        "suffix": "",
        "segments": [
            {
                "from": "0",
                "color": "#5cd65c",
                "text": "",
                "textType": "label"
            },
            {
                "from": "2000",
                "color": "#ffc800",
                "text": "",
                "textType": "label"
            },
            {
                "from": "3000",
                "color": "#ea5353",
                "text": "",
                "textType": "label"
            }
        ],
        "min": "0",
        "max": "4000",
        "sizeThickness": 16,
        "sizeGap": 4,
        "sizeKeyThickness": 8,
        "styleRounded": true,
        "styleGlow": false,
        "className": "",
        "x": 590,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "2b47f606fbbca572",
        "type": "link in",
        "z": "075d77875852cf19",
        "name": "2EM-3A21 in",
        "links": [
            "5b6aa9c794b4d6ca"
        ],
        "x": 485,
        "y": 300,
        "wires": [
            [
                "7e09f978d15d0233"
            ]
        ]
    },
    {
        "id": "89c54662580c396e",
        "type": "change",
        "z": "075d77875852cf19",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "3A10GHCo2",
                "pt": "global",
                "to": "1200",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "1bc8038dd9023dcd",
        "type": "inject",
        "z": "da547dd676c18c16",
        "name": "Toggle CSV logging",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "x": 630,
        "y": 260,
        "wires": [
            [
                "1b4f0d4666513ac8"
            ]
        ]
    },
    {
        "id": "1b4f0d4666513ac8",
        "type": "function",
        "z": "da547dd676c18c16",
        "name": "Toggle CSV logging (ON/OFF)",
        "func": "// Toggle flow.csv_enabled\n'use strict';\n\n// Use the SAME store everywhere (I recommend \"file\" so it survives restart)\nlet enabled = flow.get('csv_enabled', 'file') === true;\nenabled = !enabled;\nflow.set('csv_enabled', enabled, 'file');\n\nif (enabled) {\n /* enable this to rewrite header\n  const filePath = flow.get(\"current_csv_path\", \"file\") || \"unknown_file\";\n  const headerKey = `csv_header_written::${filePath}`;\n  flow.set(headerKey, false, \"file\");*/\n  node.status({ fill: 'green', shape: 'dot', text: 'CSV logging ENABLED' });\n  node.warn('CSV logging ENABLED');\n} else {\n  node.status({ fill: 'red', shape: 'ring', text: 'CSV logging DISABLED' });\n  node.warn('CSV logging DISABLED');\n}\n\nreturn null;\n",
        "outputs": 0,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 260,
        "wires": []
    },
    {
        "id": "86c4cc9b355b8386",
        "type": "ui-switch",
        "z": "da547dd676c18c16",
        "name": "",
        "label": "Logging ON/OFF",
        "group": "e86ce08b06c0beb4",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-spread",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 610,
        "y": 200,
        "wires": [
            [
                "1b4f0d4666513ac8"
            ]
        ]
    },
    {
        "id": "7dd3aac494045546",
        "type": "function",
        "z": "da547dd676c18c16",
        "name": "CSV logging gate (flow.csv_enabled)",
        "func": "// Function: Logging Gate (timestamp + 36 columns from pivoted example)\nconst COLS = [\n  \"LD.Relay.W1\",\n  \"LD.Relay.W2\",\n  \"L.VFD.freq.Hz\",\n  \"R.VFD.freq.Hz\",\n  \"LEM.W\",\n  \"REM.W\",\n  \"LU.Temp.C\",\n  \"LU.RH.%\",  \n  \"LU.CO2.calibrated\", \"LU.CO2.initial\",\n  \"LU.CO2.raw\",\n  \"LU.P.hPa\",\n  \"RU.Temp.C\",\n  \"RU.RH.%\",\n  \"RU.CO2.calibrated\", \"RU.CO2.initial\",\n  \"RU.CO2.raw\",\n  \"RU.P.hPa\",\n  \"LD.Temp.C\",\n  \"LD.RH.%\",\n  \"LD.CO2.raw\",\n  \"LD.CO2.calibrated\", \"LD.CO2.initial\",\n  \"LD.P.hPa\",\n  \"RD.Temp.C\",\n  \"RD.RH.%\",\n  \"RD.CO2.raw\",\n  \"RD.CO2.calibrated\", \"RD.CO2.initial\",\n  \"RD.P.hPa\",\n  \"2A15\",\n  \"1A05\",\n  \"REE650AV.mps\",\n  \"REE650T.C\",\n  \"LEE650AV.mps\",\n  \"LEE650T.C\",\n  \"LD.Relay.D1\",\n  \"LD.Relay.A1\",\n  \"LD.Relay.A2\",\n  \"LD.Relay.D2\",\n  \"L.1H01\",\n  \"R.2H11\",\n  \"COLM_1_Automation.Status\",\n  \"COLM_2_Automation.Status\"\n  ];\n\nconst snap   = global.get('snap')   || {};\nconst snapTs = global.get('snap_ts') || {};\nconst now = Date.now();\nconst STALE_MS = 4800; // mark blank if older than 4.8 s\n\n// --- build timestamp in local timezone ---\nconst d = new Date();\nconst row = {\n  timestamp: d.toLocaleString(\"en-GB\", {\n    timeZone: \"Asia/Riyadh\", // set to your local zone\n    hour12: false\n  })\n};\n\n// --- fill columns, blank stale ones ---\nfor (const k of COLS) {\n  const age = now - (snapTs[k] || 0);\n  if (age > STALE_MS) {\n    row[k] = \"\"; // blank if not fresh\n  } else {\n    const v = snap[k];\n    row[k] = (v === undefined || Number.isNaN(v)) ? \"\" : v;\n  }\n}\n\n// output row object for CSV conversion or direct write\nmsg.payload = row;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 340,
        "wires": [
            [
                "f2236c15fcaa90bd"
            ]
        ]
    },
    {
        "id": "eeab1c0b7e38acd4",
        "type": "file",
        "z": "da547dd676c18c16",
        "name": "Append /var/lib/revpi-nodered/csvlogs/filename",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1660,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "a8ed9c91e450eaf7",
        "type": "function",
        "z": "da547dd676c18c16",
        "name": "set daily csv filename",
        "func": "'use strict';\n\n// where to store logs\nconst baseDir = \"/var/lib/revpi-nodered/csvlogs\";\nconst tz = \"Asia/Riyadh\";\n\n// get \"local\" date in the desired timezone\nconst now = new Date();\n// Build date parts without using locale formatters (which may add /)\nconst y = new Intl.DateTimeFormat('en', { timeZone: tz, year: 'numeric' }).format(now);\nconst m = new Intl.DateTimeFormat('en', { timeZone: tz, month: '2-digit' }).format(now);\nconst d = new Intl.DateTimeFormat('en', { timeZone: tz, day: '2-digit' }).format(now);\n\n// Assemble a filename that CANNOT contain slashes\nconst dateStr = `${y}_${m}_${d}`;                // e.g., 2025_10_26\nmsg.filename = `${baseDir}/sensors_${dateStr}.csv`;\n\n\nconst prev = global.get('current_csv_date');\n\nif (prev !== dateStr) {\n  global.set('csv_header_written', false);\n  global.set('current_csv_date', dateStr);\n}\nflow.set(\"current_csv_path\", msg.filename, \"file\");\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 340,
        "wires": [
            [
                "eeab1c0b7e38acd4"
            ]
        ]
    },
    {
        "id": "98e52bdf21ebb181",
        "type": "function",
        "z": "da547dd676c18c16",
        "name": "snapshot updater",
        "func": "// Snapshot Updater (cache + timestamps)\nlet snap = global.get('snap') || {};\nlet snapTs = global.get('snap_ts') || {};\n\n\nif (typeof msg.topic === 'string') {\n  snap[msg.topic] = msg.payload;\n  snapTs[msg.topic] = Date.now();\n  global.set('snap', snap);\n  global.set('snap_ts', snapTs);\n}\n\nreturn null; // don’t send anything downstream",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 340,
        "wires": [
            [
                "7dd3aac494045546"
            ]
        ]
    },
    {
        "id": "af4f09ef816f491e",
        "type": "inject",
        "z": "da547dd676c18c16",
        "name": "Tick every  5 second",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 400,
        "wires": [
            [
                "7dd3aac494045546"
            ]
        ]
    },
    {
        "id": "f2236c15fcaa90bd",
        "type": "function",
        "z": "da547dd676c18c16",
        "name": "Object -> CSV line (wiht header-once)",
        "func": "\n// Function: Object → CSV line (with header aliases, header-once)\n// Input:  msg.payload = { timestamp: \"...\", <keys like LU.Temp.C, RU.P.hPa, ...> }\n// Output: msg.payload = \"header?\\n\" + \"csv line\\n\" (string)\n\n'use strict';\n\n// --------------------\n// 1) Keep INTERNAL KEYS as-is (Grafana / pipeline relies on them)\n// 2) Change ONLY header labels for the CSV\n// --------------------\nconst COL_DEFS = [\n  // -------- LU → 1A02 --------\n  { key: \"LU.CO2.calibrated\", header: \"1A02 CO2 Avg Calibrated (ppm)\" },\n  { key: \"LU.CO2.initial\", header: \"1A02 CO2 Avg Initial (ppm)\" },\n  { key: \"LU.CO2.raw\", header: \"1A02 CO2 Raw (ppm)\" },\n  { key: \"LU.Temp.C\", header: \"1A02 Temperature (°C)\" },\n  { key: \"LU.RH.%\", header: \"1A02 Humidity (%)\" },\n  { key: \"LU.P.hPa\", header: \"1A02 Pressure (hPa)\" },\n\n  // -------- RU → 2A12 --------\n  { key: \"RU.CO2.calibrated\", header: \"2A12 CO2 Avg Calibrated (ppm)\" },\n  { key: \"RU.CO2.initial\", header: \"2A12 CO2 Avg Initial (ppm)\" },\n  { key: \"RU.CO2.raw\", header: \"2A12 CO2 Raw (ppm)\" },\n  { key: \"RU.Temp.C\", header: \"2A12 Temperature (°C)\" },\n  { key: \"RU.RH.%\", header: \"2A12 Humidity (%)\" },\n  { key: \"RU.P.hPa\", header: \"2A12 Pressure (hPa)\" },\n\n  // -------- LD → 1A01 --------\n  { key: \"LD.CO2.calibrated\", header: \"1A01 CO2 Avg Calibrated (ppm)\" },\n  { key: \"LD.CO2.initial\", header: \"1A01 CO2 Avg Initial (ppm)\" },\n  { key: \"LD.CO2.raw\", header: \"1A01 CO2 Raw (ppm)\" },\n  { key: \"LD.Temp.C\", header: \"1A01 Temperature (°C)\" },\n  { key: \"LD.RH.%\", header: \"1A01 Humidity (%)\" },\n  { key: \"LD.P.hPa\", header: \"1A01 Pressure (hPa)\" },\n\n  // -------- RD → 2A11 --------\n  { key: \"RD.CO2.calibrated\", header: \"2A11 CO2 Avg Calibrated (ppm)\" },\n  { key: \"RD.CO2.initial\", header: \"2A11 CO2 Avg Initial (ppm)\" },\n  { key: \"RD.CO2.raw\", header: \"2A11 CO2 Raw (ppm)\" },\n  { key: \"RD.Temp.C\", header: \"2A11 Temperature (°C)\" },\n  { key: \"RD.RH.%\", header: \"2A11 Humidity (%)\" },\n  { key: \"RD.P.hPa\", header: \"2A11 Pressure (hPa)\" },\n\n  // -------- EE / airflow --------\n  { key: \"1A05\", header: \"1A05\" },\n  { key: \"2A15\", header: \"2A15\" },\n  { key: \"LEE650T.C\", header: \"1A05 Temperature (°C)\" },\n  { key: \"REE650T.C\", header: \"2A15 Temperature (°C)\" },\n  { key: \"LEE650AV.mps\", header: \"1A05 Air Velocity (m/s)\" },\n  { key: \"REE650AV.mps\", header: \"2A15 Air Velocity (m/s)\" },\n\n  // -------- Energy --------\n  { key: \"LEM.W\", header: \"Fans Energy Meter Power (W)\" },\n  { key: \"REM.W\", header: \"Heaters Energy Meter Power (W)\" },\n\n  // -------- relays + vfd keys --------\n  { key: \"LD.Relay.W1\", header: \"1W01\" },\n  { key: \"LD.Relay.W2\", header: \"2W11\" },\n  { key: \"LD.Relay.D1\", header: \"1V03\" },\n  { key: \"LD.Relay.A1\", header: \"1V02\" },\n  { key: \"LD.Relay.A2\", header: \"2V12\" },\n  { key: \"LD.Relay.D2\", header: \"2V13\" },\n  { key: \"L.VFD.freq.Hz\", header: \"1FN01 Frequency (Hz)\" },\n  { key: \"R.VFD.freq.Hz\", header: \"2FN11 Frequency (Hz)\" },\n  { key: \"L.1H01\", header: \"1H01\" },\n  { key: \"R.2H11\", header: \"2H11\" },\n  { key: \"COLM_1_Automation.Status\", header: \"Automation Status Col 1\" },\n  { key: \"COLM_2_Automation.Status\", header: \"Automation Status Col 2\" }\n];\n\n// Optional: obey a UI toggle\nconst enabled = flow.get(\"csv_enabled\", \"file\");\nif (enabled === false) return null;\n\n// ---------- helpers ----------\nfunction csvEscape(val) {\n  if (val === null || val === undefined) return \"\";\n  let s = String(val);\n  if (s.includes('\"')) s = s.replace(/\"/g, '\"\"');\n  const needsQuote = s.includes(\",\") || s.includes(\"\\n\") || s.includes(\"\\r\") || /^\\s|\\s$/.test(s);\n  return needsQuote ? `\"${s}\"` : s;\n}\n\n// Use current file path as the header-once key (best)\nconst filePath =\n  flow.get(\"current_csv_path\", \"file\") ||\n  msg.filename ||\n  \"unknown_file\";\n\nconst headerKey = `csv_header_written::${filePath}`;\nconst headerNeeded = flow.get(headerKey, \"file\") !== true;\n\n// Build header (only once per file)\nconst header = [\"timestamp\", ...COL_DEFS.map(c => c.header)]\n  .map(csvEscape).join(\",\") + \"\\n\";\n\n// Build data line\nconst p = msg.payload || {};\nconst ts = p.timestamp || new Date().toISOString();\n\nconst fields = [\n  ts,\n  ...COL_DEFS.map(c => {\n    const v = p[c.key];\n    if (v === undefined || v === null || Number.isNaN(v)) return \"\";\n    return v;\n  })\n];\n\nconst line = fields.map(csvEscape).join(\",\") + \"\\n\";\n\n// Output\nif (headerNeeded) {\n  flow.set(headerKey, true, \"file\");\n  msg.payload = header + line;\n} else {\n  msg.payload = line;\n}\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 340,
        "wires": [
            [
                "a8ed9c91e450eaf7"
            ]
        ]
    },
    {
        "id": "d5c9d268cb885b66",
        "type": "link in",
        "z": "da547dd676c18c16",
        "name": "CSV logger in",
        "links": [
            "0c6b5d400a664fd1",
            "17da716469bfee6a",
            "a4e54ab6b18d6591",
            "034f5085c925d2bc",
            "191128db1e72b7a8",
            "21cf8a6d2cb722b0",
            "a9c0ecd22d8fd56b",
            "528d31672e23ad77"
        ],
        "x": 205,
        "y": 340,
        "wires": [
            [
                "98e52bdf21ebb181"
            ]
        ]
    },
    {
        "id": "97156d17a88b076f",
        "type": "inject",
        "z": "da547dd676c18c16",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 550,
        "y": 80,
        "wires": [
            [
                "6001317e981d6a1f"
            ]
        ]
    },
    {
        "id": "6001317e981d6a1f",
        "type": "change",
        "z": "da547dd676c18c16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "csv_enabled",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "22a1dfe7b08e1df6",
        "type": "link in",
        "z": "da547dd676c18c16",
        "name": "Logging On in",
        "links": [
            "b923595acf16a68a"
        ],
        "x": 435,
        "y": 200,
        "wires": [
            [
                "86c4cc9b355b8386",
                "1b4f0d4666513ac8"
            ]
        ]
    },
    {
        "id": "9706624e9f53beb5",
        "type": "ui-switch",
        "z": "897898ed0b432706",
        "name": "Enable Auto mode",
        "label": "Enable Auto mode",
        "group": "42e80e50107ea143",
        "order": 1,
        "width": "6",
        "height": 5,
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-spread",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 410,
        "y": 1380,
        "wires": [
            [
                "6aec6c2587c52dfd",
                "b923595acf16a68a",
                "60481889881bf2f0",
                "d2008534115d1936"
            ]
        ]
    },
    {
        "id": "c13e252af574c007",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-regen-T",
        "label": "Regen Temprature Setpoint",
        "order": 2,
        "width": 0,
        "height": 0,
        "topic": "1-regen-T",
        "topicType": "str",
        "min": 0,
        "max": "60",
        "step": 1,
        "tooltip": "Regen temprature setpoint for column 1",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1260,
        "y": 260,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "c0fbd56186b348c0",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-regen-FanSpeed",
        "label": "Regen Fan Speed",
        "order": 4,
        "width": 0,
        "height": 0,
        "topic": "1-regen-FanSpeed",
        "topicType": "str",
        "min": "20",
        "max": "60",
        "step": 1,
        "tooltip": "Regen Fan speed during Regen for column 1",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1290,
        "y": 300,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "4a2bc59da7761b93",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-regen-HumidtyDiffThreshold",
        "label": "Regen Humidtity threshold %",
        "order": 3,
        "width": 0,
        "height": 0,
        "topic": "1-regen-HumidtyDiffThreshold",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": "1",
        "tooltip": "the is the threshold used to end regen process",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 340,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "18b5c317d13004e6",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-regen-T",
        "label": "Regen Temprature Setpoint",
        "order": 2,
        "width": 0,
        "height": 0,
        "topic": "2-regen-T",
        "topicType": "str",
        "min": 0,
        "max": "60",
        "step": 1,
        "tooltip": "Regen temprature setpoint for column 2",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1260,
        "y": 740,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "b853b244fa3dd816",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-regen-FanSpeed",
        "label": "Regen Fan Speed",
        "order": 4,
        "width": 0,
        "height": 0,
        "topic": "2-regen-FanSpeed",
        "topicType": "str",
        "min": "20",
        "max": "60",
        "step": 1,
        "tooltip": "Regen Fan speed during Regen for column 2",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1290,
        "y": 780,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "8166651c1046978d",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-regen-HumidtyDiffThreshold",
        "label": "Regen Humidtity threshold",
        "order": 3,
        "width": 0,
        "height": 0,
        "topic": "2-regen-HumidtyDiffThreshold",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": "1",
        "tooltip": "the is the threshold used to end regen process",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 820,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "fbc87a2badf6a417",
        "type": "ui-dropdown",
        "z": "897898ed0b432706",
        "group": "16c2d68fad5258bc",
        "name": "columnsOrder",
        "label": "Select Option:",
        "tooltip": "",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "chips": false,
        "clearable": false,
        "options": [
            {
                "label": "Alternating",
                "value": "Alternating",
                "type": "str"
            },
            {
                "label": "Simultaneously",
                "value": "Simultaneously",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "columnsOrder",
        "topicType": "str",
        "className": "",
        "typeIsComboBox": true,
        "msgTrigger": "onChange",
        "x": 1280,
        "y": 100,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "1dbec70b2da7a9b7",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Adsorption-FanSpeed",
        "label": "Adsorption Fan Speed",
        "order": 6,
        "width": 0,
        "height": 0,
        "topic": "1-Adsorption-FanSpeed",
        "topicType": "str",
        "min": "20",
        "max": "60",
        "step": "1",
        "tooltip": "Fan speed during Adsorption for column 1",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 380,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "67a9ae11e152c50d",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Adsorption-CO2Threshold",
        "label": "Adsorption CO2 threshold",
        "order": 5,
        "width": 0,
        "height": 0,
        "topic": "1-Adsorption-CO2Threshold",
        "topicType": "str",
        "min": 0,
        "max": "500",
        "step": 1,
        "tooltip": "threshold used to end Adsorption process",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1320,
        "y": 420,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "a92ddb925ca3dc92",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-permission-GHCo2Threshold",
        "label": "GH CO2 threshold",
        "order": 7,
        "width": 0,
        "height": 0,
        "topic": "1-permission-GHCo2Threshold",
        "topicType": "str",
        "min": 0,
        "max": "5000",
        "step": "20",
        "tooltip": "threshold from greenhouse to allow coulm to start Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 460,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "404c1a4d8768430d",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Desorption-FanSpeed",
        "label": "Desorption Fan Speed",
        "order": 8,
        "width": 0,
        "height": 0,
        "topic": "1-Desorption-FanSpeed",
        "topicType": "str",
        "min": "20",
        "max": "60",
        "step": 1,
        "tooltip": "Fan speed during Desorption for column 1",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 500,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "a6520f264b7c82e2",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Desorption-waterSprayBrusts",
        "label": "Desorption Water sprays",
        "order": 9,
        "width": 0,
        "height": 0,
        "topic": "1-Desorption-waterSprayBrusts",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "number of water sprays in Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 540,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "2f7e0c22ab525aef",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Desorption-WSBrustsLength",
        "label": "Water spray brust length",
        "order": 10,
        "width": 0,
        "height": 0,
        "topic": "1-Desorption-WSBrustsLength",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "the time for 1 water spray brust during Desorption in column 1",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 580,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "750c092ad0a59364",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Desorption-WSIntervals",
        "label": "interval between brusts",
        "order": 11,
        "width": 0,
        "height": 0,
        "topic": "1-Desorption-WSIntervals",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 620,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "ce19a5bfe3ffaf1d",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-Desorption-Co2StopThreshold",
        "label": "Desorption stop CO2 threshold",
        "order": 12,
        "width": 0,
        "height": 0,
        "topic": "1-Desorption-Co2StopThreshold",
        "topicType": "str",
        "min": 0,
        "max": "5000",
        "step": "5",
        "tooltip": "threshold to stop Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 660,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "a63cd8f408b5fbc3",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Adsorption-FanSpeed",
        "label": "Adsorption Fan Speed",
        "order": 6,
        "width": 0,
        "height": 0,
        "topic": "2-Adsorption-FanSpeed",
        "topicType": "str",
        "min": 0,
        "max": "60",
        "step": 1,
        "tooltip": "Fan speed during Adsorption for column 2",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 860,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "d7a7b57b5bb55843",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Adsorption-CO2Threshold",
        "label": "Adsorption CO2 threshold",
        "order": 5,
        "width": 0,
        "height": 0,
        "topic": "2-Adsorption-CO2Threshold",
        "topicType": "str",
        "min": 0,
        "max": "500",
        "step": 1,
        "tooltip": "threshold used to end Adsorption process",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1320,
        "y": 900,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "eb8a0f4c121923fe",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-permission-GHCo2Threshold",
        "label": "GH CO2 threshold",
        "order": 7,
        "width": 0,
        "height": 0,
        "topic": "2-permission-GHCo2Threshold",
        "topicType": "str",
        "min": 0,
        "max": "5000",
        "step": 1,
        "tooltip": "threshold from greenhouse to allow coulm to start Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 940,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "1881965177586ef1",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Desorption-FanSpeed",
        "label": "Desorption Fan Speed",
        "order": 8,
        "width": 0,
        "height": 0,
        "topic": "2-Desorption-FanSpeed",
        "topicType": "str",
        "min": 0,
        "max": "60",
        "step": 1,
        "tooltip": "Fan speed during Desorption for column 2",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 980,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "5075407177820431",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Desorption-waterSprayBrusts",
        "label": "Desorption Water sprays",
        "order": 9,
        "width": 0,
        "height": 0,
        "topic": "2-Desorption-waterSprayBrusts",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "number of water sprays in Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 1020,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "ad43c096563688ec",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Desorption-WSBrustsLength",
        "label": "Water spray brust length",
        "order": 10,
        "width": 0,
        "height": 0,
        "topic": "2-Desorption-WSBrustsLength",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "the time for 1 water spray brust during Desorption in column 2",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 1060,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "90481202170696e8",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Desorption-WSIntervals",
        "label": "interval between brusts",
        "order": 11,
        "width": 0,
        "height": 0,
        "topic": "2-Desorption-WSIntervals",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 1100,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "bfd95df1c3e2866f",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-Desorption-Co2StopThreshold",
        "label": "Desorption stop CO2 threshold",
        "order": 12,
        "width": 0,
        "height": 0,
        "topic": "2-Desorption-Co2StopThreshold",
        "topicType": "str",
        "min": 0,
        "max": "5000",
        "step": 1,
        "tooltip": "threshold to stop Desorption",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1330,
        "y": 1140,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "2b9b862295f005c9",
        "type": "ui-text-input",
        "z": "897898ed0b432706",
        "group": "b4435693f46f8ae5",
        "name": "1-StartTime",
        "label": "Start time in HH:MM 24 hour format",
        "order": 1,
        "width": 0,
        "height": 0,
        "topic": "1-StartTime",
        "topicType": "str",
        "mode": "text",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": true,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 1270,
        "y": 140,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "e58e04304d910121",
        "type": "ui-text-input",
        "z": "897898ed0b432706",
        "group": "16c2d68fad5258bc",
        "name": "ShutdownTime",
        "label": "Shutdown time in HH:MM 24 hour format",
        "order": 1,
        "width": 0,
        "height": 0,
        "topic": "ShutdownTime",
        "topicType": "str",
        "mode": "text",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": true,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 1280,
        "y": 180,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "ae79dbb3a31c2296",
        "type": "ui-number-input",
        "z": "897898ed0b432706",
        "group": "16c2d68fad5258bc",
        "name": "shutdownRegenInterval",
        "label": "Shutdown Regen interval in minutes",
        "order": 2,
        "width": 0,
        "height": 0,
        "topic": "shutdownRegenInterval",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "tooltip": "",
        "passthru": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "spinner": "default",
        "x": 1310,
        "y": 220,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "b8483e028f416011",
        "type": "ui-button",
        "z": "897898ed0b432706",
        "group": "0bc3f93a938c3005",
        "name": "SaveParameters",
        "label": "Save",
        "order": 1,
        "width": 0,
        "height": 2,
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 250,
        "y": 1920,
        "wires": [
            [
                "ab305a18431d7dcf"
            ]
        ]
    },
    {
        "id": "ab305a18431d7dcf",
        "type": "function",
        "z": "897898ed0b432706",
        "name": "format before saving into file",
        "func": "let params = global.get(\"autoParams\") || {};\n\n// pretty JSON string\nmsg.payload = params;\n\n// choose a path that Node-RED user can write to\nmsg.filename = \"/var/lib/revpi-nodered/.node-red/parameters.json\";\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1920,
        "wires": [
            [
                "08ef76a208fd29da"
            ]
        ]
    },
    {
        "id": "dfe0d35e5e9f2258",
        "type": "function",
        "z": "897898ed0b432706",
        "name": "save AutoParams in global",
        "func": "// Expects: msg.topic = parameter name, msg.payload = value\n\nif (typeof msg.topic !== \"string\" || msg.topic === \"\") {\n    return msg;   // nothing to store\n}\n\n// Get existing param object from global\nlet params = global.get(\"autoParams\") || {};\n\n// Update this parameter\nparams[msg.topic] = msg.payload;\n\n// Save back to global context\nglobal.set(\"autoParams\", params);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "0421ce0b54d934ab",
        "type": "ui-control",
        "z": "897898ed0b432706",
        "name": "",
        "ui": "8d17c08d50d1770f",
        "events": "all",
        "x": 1740,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "6aec6c2587c52dfd",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "AutoMode",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "e6cdd69a866162d2",
        "type": "switch",
        "z": "897898ed0b432706",
        "name": "",
        "property": "AutoMode",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1250,
        "y": 1380,
        "wires": [
            [
                "c2c7d5c889c0e935"
            ],
            [
                "d208682d9e110fea"
            ]
        ]
    },
    {
        "id": "b31e208c04f9d467",
        "type": "inject",
        "z": "897898ed0b432706",
        "d": true,
        "name": "",
        "props": [],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1050,
        "y": 1380,
        "wires": [
            [
                "e6cdd69a866162d2"
            ]
        ]
    },
    {
        "id": "c2c7d5c889c0e935",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "Disable UI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"disable\":[\"Automation Paramters:Column 1 Parameters\",\"Automation Paramters:column 2 parameters\",\"Automation Paramters:Shared Parameters\",\"Automation Paramters:Save commands\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 1360,
        "wires": [
            [
                "0421ce0b54d934ab"
            ]
        ]
    },
    {
        "id": "d208682d9e110fea",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "Enable UI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"enable\":[\"Automation Paramters:Column 1 Parameters\",\"Automation Paramters:column 2 parameters\",\"Automation Paramters:Shared Parameters\",\"Automation Paramters:Save commands\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 1420,
        "wires": [
            [
                "0421ce0b54d934ab"
            ]
        ]
    },
    {
        "id": "9f0eedc01b379c94",
        "type": "ui-text-input",
        "z": "897898ed0b432706",
        "group": "61db9a8b734103fe",
        "name": "2-StartTime",
        "label": "Start time in HH:MM 24 hour format",
        "order": 1,
        "width": 0,
        "height": 0,
        "topic": "2-StartTime",
        "topicType": "str",
        "mode": "text",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": true,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 1270,
        "y": 700,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "8812faf88912d9f5",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "Enable AutoMode out",
        "mode": "link",
        "links": [
            "76425c71d14518a4",
            "3684965bc780c5c6"
        ],
        "x": 925,
        "y": 1300,
        "wires": []
    },
    {
        "id": "3f75c26370e71eae",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "Init system",
        "mode": "link",
        "links": [
            "3c96868f0b9621e4",
            "47774455ab8e2c96",
            "80ef6666de84cde2",
            "c05f7cce29a93a77",
            "c5115244cbcb2d9e",
            "48188a019460dd9b",
            "7ddae7dbd89f18a8"
        ],
        "x": 855,
        "y": 1440,
        "wires": []
    },
    {
        "id": "2d5484210530de2f",
        "type": "inject",
        "z": "897898ed0b432706",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 250,
        "y": 1380,
        "wires": [
            [
                "9706624e9f53beb5"
            ]
        ]
    },
    {
        "id": "08ef76a208fd29da",
        "type": "file",
        "z": "897898ed0b432706",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 720,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "a1abf6dcd59a8c99",
        "type": "inject",
        "z": "897898ed0b432706",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 520,
        "wires": [
            [
                "3b62d427337872a2"
            ]
        ]
    },
    {
        "id": "3b62d427337872a2",
        "type": "file in",
        "z": "897898ed0b432706",
        "name": "",
        "filename": "/var/lib/revpi-nodered/.node-red/parameters.json",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 520,
        "wires": [
            [
                "6e0d907d77dbd343"
            ]
        ]
    },
    {
        "id": "6e0d907d77dbd343",
        "type": "json",
        "z": "897898ed0b432706",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 670,
        "y": 520,
        "wires": [
            [
                "41f3c37381794862"
            ]
        ]
    },
    {
        "id": "41f3c37381794862",
        "type": "function",
        "z": "897898ed0b432706",
        "name": "parse",
        "func": "// This function expects msg.payload to contain the parameters object\n// (either as an object or a JSON string).\n//\n// It will:\n// 1) Parse & store it in flow.autoParams\n// 2) Emit one msg per parameter:\n//      msg.topic  = parameter name\n//      msg.payload = parameter value\n//\n// Wire this function into a Switch node on msg.topic.\n\nlet params = msg.payload;\n\n// If payload is JSON string, parse it\nif (typeof params === \"string\") {\n    try {\n        params = JSON.parse(params);\n    } catch (err) {\n        node.error(\"Invalid JSON in msg.payload: \" + err.message, msg);\n        return null;\n    }\n}\n\n// Store the whole object in flow (for later use if needed)\nflow.set(\"autoParams\", params);\n\n// All parameter keys to fan out\nconst keys = [\n    \"columnsOrder\",\n    \"1-StartTime\",\n    \"ShutdownTime\",\n    \"shutdownRegenInterval\",\n    \"1-regen-T\",\n    \"1-regen-FanSpeed\",\n    \"1-regen-HumidtyDiffThreshold\",\n    \"1-Adsorption-FanSpeed\",\n    \"1-Adsorption-CO2Threshold\",\n    \"1-permission-GHCo2Threshold\",\n    \"1-Desorption-FanSpeed\",\n    \"1-Desorption-waterSprayBrusts\",\n    \"1-Desorption-WSBrustsLength\",\n    \"1-Desorption-WSIntervals\",\n    \"1-Desorption-Co2StopThreshold\",\n    \n    \"2-StartTime\", \n    \"2-regen-T\",\n    \"2-regen-FanSpeed\",\n    \"2-regen-HumidtyDiffThreshold\",\n    \"2-Adsorption-FanSpeed\",\n    \"2-Adsorption-CO2Threshold\",\n    \"2-permission-GHCo2Threshold\",\n    \"2-Desorption-FanSpeed\",\n    \"2-Desorption-waterSprayBrusts\",\n    \"2-Desorption-WSBrustsLength\",\n    \"2-Desorption-WSIntervals\",\n    \"2-Desorption-Co2StopThreshold\",\n    \"StartingColumn\"\n];\n\nlet outMsgs = [];\n\nfor (let i = 0; i < keys.length; i++) {\n    let name = keys[i];\n    if (Object.prototype.hasOwnProperty.call(params, name)) {\n        outMsgs.push({\n            topic: name,\n            payload: params[name]\n        });\n    }\n}\n\n// Single-output Function node, multiple messages\nreturn [outMsgs];\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 520,
        "wires": [
            [
                "39d6db71ddfe8781"
            ]
        ]
    },
    {
        "id": "39d6db71ddfe8781",
        "type": "switch",
        "z": "897898ed0b432706",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "columnsOrder",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-StartTime",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ShutdownTime",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "shutdownRegenInterval",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-regen-T",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-regen-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-regen-HumidtyDiffThreshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Adsorption-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Adsorption-CO2Threshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-permission-GHCo2Threshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Desorption-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Desorption-waterSprayBrusts",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Desorption-WSBrustsLength",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Desorption-WSIntervals",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1-Desorption-Co2StopThreshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-StartTime",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-regen-T",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-regen-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-regen-HumidtyDiffThreshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Adsorption-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Adsorption-CO2Threshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-permission-GHCo2Threshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Desorption-FanSpeed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Desorption-waterSprayBrusts",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Desorption-WSBrustsLength",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Desorption-WSIntervals",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2-Desorption-Co2StopThreshold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "StartingColumn",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 28,
        "x": 970,
        "y": 520,
        "wires": [
            [
                "fbc87a2badf6a417"
            ],
            [
                "2b9b862295f005c9"
            ],
            [
                "e58e04304d910121"
            ],
            [
                "ae79dbb3a31c2296"
            ],
            [
                "c13e252af574c007"
            ],
            [
                "c0fbd56186b348c0"
            ],
            [
                "4a2bc59da7761b93"
            ],
            [
                "1dbec70b2da7a9b7"
            ],
            [
                "67a9ae11e152c50d"
            ],
            [
                "a92ddb925ca3dc92"
            ],
            [
                "404c1a4d8768430d"
            ],
            [
                "a6520f264b7c82e2"
            ],
            [
                "2f7e0c22ab525aef"
            ],
            [
                "750c092ad0a59364"
            ],
            [
                "ce19a5bfe3ffaf1d"
            ],
            [
                "9f0eedc01b379c94"
            ],
            [
                "18b5c317d13004e6"
            ],
            [
                "b853b244fa3dd816"
            ],
            [
                "8166651c1046978d"
            ],
            [
                "a63cd8f408b5fbc3"
            ],
            [
                "d7a7b57b5bb55843"
            ],
            [
                "eb8a0f4c121923fe"
            ],
            [
                "1881965177586ef1"
            ],
            [
                "5075407177820431"
            ],
            [
                "ad43c096563688ec"
            ],
            [
                "90481202170696e8"
            ],
            [
                "bfd95df1c3e2866f"
            ],
            [
                "767921870c068e1e"
            ]
        ]
    },
    {
        "id": "ede53bd87111539e",
        "type": "ui-button",
        "z": "897898ed0b432706",
        "group": "0bc3f93a938c3005",
        "name": "LoadParameters",
        "label": "Load",
        "order": 2,
        "width": 0,
        "height": 2,
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 170,
        "y": 660,
        "wires": [
            [
                "3b62d427337872a2"
            ]
        ]
    },
    {
        "id": "b923595acf16a68a",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "logging on out",
        "mode": "link",
        "links": [
            "22a1dfe7b08e1df6"
        ],
        "x": 625,
        "y": 1480,
        "wires": []
    },
    {
        "id": "767921870c068e1e",
        "type": "ui-dropdown",
        "z": "897898ed0b432706",
        "group": "16c2d68fad5258bc",
        "name": "StartingColumn",
        "label": "Starting Column",
        "tooltip": "",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "chips": false,
        "clearable": false,
        "options": [
            {
                "label": "1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "2",
                "value": 2,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "StartingColumn",
        "topicType": "str",
        "className": "",
        "typeIsComboBox": true,
        "msgTrigger": "onChange",
        "x": 1280,
        "y": 1180,
        "wires": [
            [
                "dfe0d35e5e9f2258"
            ]
        ]
    },
    {
        "id": "b3cd73c2df7939fd",
        "type": "link in",
        "z": "897898ed0b432706",
        "name": "Auto_mode_off",
        "links": [
            "fe5064ba7269f554"
        ],
        "x": 275,
        "y": 1300,
        "wires": [
            [
                "9706624e9f53beb5"
            ]
        ]
    },
    {
        "id": "60481889881bf2f0",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "currentColumnTurn",
                "pt": "global",
                "to": "autoParams.StartingColumn",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1300,
        "wires": [
            [
                "8812faf88912d9f5"
            ]
        ]
    },
    {
        "id": "d2008534115d1936",
        "type": "switch",
        "z": "897898ed0b432706",
        "name": "",
        "property": "AutoMode",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 1460,
        "wires": [
            [
                "3f75c26370e71eae"
            ],
            [
                "04744287ec2a200a",
                "daeb80f3cbb27243",
                "e488b5186e9f6d78"
            ]
        ]
    },
    {
        "id": "04744287ec2a200a",
        "type": "delay",
        "z": "897898ed0b432706",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1040,
        "y": 1520,
        "wires": [
            [
                "7426eb8adddc72e2",
                "9cb02cbb274a84db",
                "763ae8ce2d7e45ab"
            ]
        ]
    },
    {
        "id": "e3d14a9d1e60a082",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "repeat cycle column1 out & standby",
        "mode": "link",
        "links": [
            "a509d5e9291f4e93"
        ],
        "x": 1895,
        "y": 1620,
        "wires": []
    },
    {
        "id": "7426eb8adddc72e2",
        "type": "delay",
        "z": "897898ed0b432706",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1210,
        "y": 1620,
        "wires": [
            [
                "c641fd6345bb4381"
            ]
        ]
    },
    {
        "id": "f8529a33686c0b87",
        "type": "switch",
        "z": "897898ed0b432706",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1750,
        "y": 1620,
        "wires": [
            [
                "7426eb8adddc72e2"
            ],
            [
                "1f0c246f99ee6ff9",
                "e3d14a9d1e60a082",
                "7d555c972527916f"
            ]
        ]
    },
    {
        "id": "c641fd6345bb4381",
        "type": "function",
        "z": "897898ed0b432706",
        "name": "heater cooled down?",
        "func": "\nlet heaterTemp = global.get(\"1PIDPV\")\n\nif (heaterTemp <40 ){\n    //cooldown is done\n    msg.payload = true\n    return msg;\n    \n}else{\n    //wait cooldown\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1620,
        "wires": [
            [
                "f8529a33686c0b87"
            ]
        ]
    },
    {
        "id": "1f0c246f99ee6ff9",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 1520,
        "wires": [
            [
                "7426eb8adddc72e2"
            ]
        ]
    },
    {
        "id": "d86189ca875a33b9",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "repeat cycle column2 out & standby",
        "mode": "link",
        "links": [
            "f8f4ea4c48b94722"
        ],
        "x": 1875,
        "y": 1800,
        "wires": []
    },
    {
        "id": "9cb02cbb274a84db",
        "type": "delay",
        "z": "897898ed0b432706",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1120,
        "y": 1800,
        "wires": [
            [
                "891b9d94c828fa70"
            ]
        ]
    },
    {
        "id": "8e9ffe01c75adb6d",
        "type": "switch",
        "z": "897898ed0b432706",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1660,
        "y": 1800,
        "wires": [
            [
                "9cb02cbb274a84db"
            ],
            [
                "9bb0edfc3b25316a",
                "d86189ca875a33b9",
                "0b27a6611611bb3f"
            ]
        ]
    },
    {
        "id": "891b9d94c828fa70",
        "type": "function",
        "z": "897898ed0b432706",
        "name": "heater cooled down?",
        "func": "\nlet heaterTemp = global.get(\"2PIDPV\")\n\nif (heaterTemp <40 ){\n    //cooldown is done\n    msg.payload = true\n    return msg;\n    \n}else{\n    //wait cooldown\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 1800,
        "wires": [
            [
                "8e9ffe01c75adb6d"
            ]
        ]
    },
    {
        "id": "9bb0edfc3b25316a",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 1700,
        "wires": [
            [
                "9cb02cbb274a84db"
            ]
        ]
    },
    {
        "id": "763ae8ce2d7e45ab",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - cooldown",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - cooldown",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1880,
        "wires": [
            [
                "a57a79c023cbb9b8"
            ]
        ]
    },
    {
        "id": "a57a79c023cbb9b8",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7",
            "9d13758f880dfba3"
        ],
        "x": 1456.333251953125,
        "y": 1881.3333129882812,
        "wires": []
    },
    {
        "id": "daeb80f3cbb27243",
        "type": "debug",
        "z": "897898ed0b432706",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 1600,
        "wires": []
    },
    {
        "id": "64fca6cfbd027cf4",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "turn off",
        "mode": "link",
        "links": [
            "d45dc857ec91a832"
        ],
        "x": 1205,
        "y": 1480,
        "wires": []
    },
    {
        "id": "e488b5186e9f6d78",
        "type": "link call",
        "z": "897898ed0b432706",
        "name": "",
        "links": [
            "ac7f07b9949a6114"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 950,
        "y": 1480,
        "wires": [
            [
                "d0954f668dd3afcf"
            ]
        ]
    },
    {
        "id": "d0954f668dd3afcf",
        "type": "delay",
        "z": "897898ed0b432706",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1110,
        "y": 1480,
        "wires": [
            [
                "64fca6cfbd027cf4"
            ]
        ]
    },
    {
        "id": "7d555c972527916f",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - cooldown",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920.333251953125,
        "y": 1699.3333740234375,
        "wires": [
            [
                "8346906d59d8d6a4"
            ]
        ]
    },
    {
        "id": "8346906d59d8d6a4",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2011.66650390625,
        "y": 1700.6666870117188,
        "wires": []
    },
    {
        "id": "0b27a6611611bb3f",
        "type": "change",
        "z": "897898ed0b432706",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - cooldown",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1870,
        "y": 1880,
        "wires": [
            [
                "e01ed069b2df018a"
            ]
        ]
    },
    {
        "id": "e01ed069b2df018a",
        "type": "link out",
        "z": "897898ed0b432706",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1996.333251953125,
        "y": 1881.3333129882812,
        "wires": []
    },
    {
        "id": "84a7a8976cc30cef",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "Auto mode On",
        "property": "AutoMode",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 420,
        "y": 220,
        "wires": [
            [
                "406f6383187fe9a2"
            ],
            [
                "6a8198f1c51ff8fe"
            ]
        ]
    },
    {
        "id": "1e7b704816fa2d05",
        "type": "inject",
        "z": "95d7a662357d5be5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 220,
        "wires": [
            [
                "84a7a8976cc30cef"
            ]
        ]
    },
    {
        "id": "6a8198f1c51ff8fe",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "Check start and shutdown time ",
        "func": "// Expected: msg.start = \"HH:MM\", msg.end = \"HH:MM\"\nlet stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\nfunction toMinutes(t) {\n    let parts = t.split(\":\");\n    return parseInt(parts[0]) * 60 + parseInt(parts[1]);\n}\n// Convert current time to Riyadh timezone (Asia/Riyadh)\nlet now = new Date();\nlet riyadhTimeString = now.toLocaleString(\"en-US\", { timeZone: \"Asia/Riyadh\" });\nlet riyadhDate = new Date(riyadhTimeString);\n\nlet currentMinutes = riyadhDate.getHours() * 60 + riyadhDate.getMinutes();\n\nlet start = toMinutes(global.get(\"autoParams\")[\"1-StartTime\"]);\nlet end = toMinutes(global.get(\"autoParams\")[\"ShutdownTime\"]);\n\nlet inRange = false;\n\n// Handle ranges that wrap past midnight (e.g. 22:00–03:00)\nif (start <= end) {\n    // Normal range\n    inRange = currentMinutes >= start && currentMinutes <= end;\n} else {\n    // Midnight wrap range\n    inRange = (currentMinutes >= start) || (currentMinutes <= end);\n}\n\nif(inRange){\n    flow.set(\"CLMN_1_finalRegenDone\", false); // Reset for next cycle\n    flow.set(\"CLMN_1_finalRegenActive\", false);\n    msg.payload=\"Start\"\n}\nelse if (!flow.get(\"CLMN_1_finalRegenDone\")){\n        msg.payload = \"Final Regeneration\"\n    flow.set(\"CLMN_1_finalRegenDone\", true)\n    flow.set(\"CLMN_1_finalRegenActive\", true);\n}else{\n    msg.payload = \"Shutdown\"\n}\nmsg.startTime=start\nmsg.endTime=end\nmsg.currentTime=currentMinutes\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 240,
        "wires": [
            [
                "60a495957bddaa29"
            ]
        ]
    },
    {
        "id": "74fc24ba01777d2a",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2710,
        "y": 200,
        "wires": [
            [
                "52b3b6e0a1de2a57"
            ]
        ]
    },
    {
        "id": "8bb44cb4d4fc69f2",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "Check permission status",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Standby",
                "vt": "str"
            },
            {
                "t": "else"
            },
            {
                "t": "eq",
                "v": "Start Desorption",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1710,
        "y": 580,
        "wires": [
            [
                "01bcf5c6c290ddf4",
                "417df9a511532c1c",
                "068a69d98f6dc417"
            ],
            [],
            [
                "6ae929ce7f4e7fc5",
                "58c8ea55558d135f",
                "7574e6f9a28edfe6"
            ]
        ]
    },
    {
        "id": "01bcf5c6c290ddf4",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1200,
        "y": 520,
        "wires": [
            [
                "700b241432b189cc"
            ]
        ]
    },
    {
        "id": "e03ecf1a7e79fe1a",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "water spraying",
        "func": "let waterBrusts = global.get(\"autoParams\")[\"1-Desorption-waterSprayBrusts\"] || 0;\nlet onTime = (1000*global.get(\"autoParams\")[\"1-Desorption-WSBrustsLength\"])|| 1000;\nlet offTime = (1000*global.get(\"autoParams\")[\"1-Desorption-WSIntervals\"]) || 1000;\nlet i = 0;\nlet co2Exceeded = false;\nnode.status({ fill: \"blue\", shape: \"ring\", text: \"current brust: \" + i });\nlet stop = global.get(\"AutoMode\") || false;\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null;\n}\nfunction iterate() {\n    let stop = global.get(\"AutoMode\") || false;\n    if (!stop) {\n        node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n        return null;\n    }\n    \n    // Check CO2 threshold - send signal only once\n    if (!co2Exceeded) {\n        let co2Avg = global.get(\"1A02-Co2Avg\") || 0;\n        let threshold = global.get(\"autoParams\")[\"1-Desorption-Co2StopThreshold\"] || 9999;\n        if (co2Avg > threshold) {\n            co2Exceeded = true;\n            // Output 4: CO2 exceeded signal\n            node.send([null, null, null, { payload: true }]);\n        }\n    }\n    \n    if (i >= waterBrusts) {\n        node.send([null, null, { payload: \"done\" }, null]);\n        node.status({});\n        return;\n    }\n    \n    node.send([{ payload: true }, null, null, null]);\n    node.status({ fill: \"green\", shape: \"dot\", text: \"on - brust: \" + i + (co2Exceeded ? \" [CO2!]\" : \"\") });\n    \n    setTimeout(() => {\n        node.send([null, { payload: true }, null, null]);\n        node.status({ fill: \"red\", shape: \"dot\", text: \"off\" });\n        setTimeout(() => {\n            i++;\n            iterate();\n        }, offTime);\n    }, onTime);\n}\niterate();\nreturn;",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 980,
        "wires": [
            [
                "a86c6467c9fb6208"
            ],
            [
                "3cd802cee8dd1f24"
            ],
            [
                "e93caa96a05963e5"
            ],
            [
                "48b713c2c9bd400d"
            ]
        ]
    },
    {
        "id": "e93caa96a05963e5",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1200,
        "y": 1000,
        "wires": [
            [
                "f6dd6aab9e5a8da0"
            ]
        ]
    },
    {
        "id": "60a495957bddaa29",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "which time",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Final Regeneration",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Shutdown",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 910,
        "y": 240,
        "wires": [
            [
                "e437df1fc03b7d99",
                "a9caf57e5def89d5"
            ],
            [
                "20f7678e8db16217",
                "a9caf57e5def89d5"
            ],
            [
                "67b3ac9be8779234",
                "0222901eeef482cc"
            ],
            []
        ]
    },
    {
        "id": "db2e4248d2f81c5b",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "turn off Heater ",
        "mode": "link",
        "links": [
            "ac7f07b9949a6114"
        ],
        "x": 3525,
        "y": 240,
        "wires": []
    },
    {
        "id": "a9d007d4a9c48541",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3250,
        "y": 200,
        "wires": [
            [
                "74fc24ba01777d2a",
                "5c9f5b090799d681"
            ],
            [
                "1bd7440dd1345ccb",
                "34c0ddf69a5813f1",
                "18dce7b82d182b07",
                "f3b4d3bb6a495278"
            ]
        ]
    },
    {
        "id": "0d478013e1c9454f",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 450,
        "y": 580,
        "wires": [
            [
                "0408c8ef268fd6c7"
            ]
        ]
    },
    {
        "id": "700b241432b189cc",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "get permission status",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\nnode.status({ fill: \"green\", shape: \"ring\", text: \"running\" });\nlet columnTurn=global.get(\"currentColumnTurn\")\nlet greenHouseA10Value = global.get(\"3A10GHCo2\")||60\nlet greenHouseThresholdValue=global.get(\"autoParams\")[\"1-permission-GHCo2Threshold\"]\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\n\nmsg.columnTurn=columnTurn\nmsg.GHCo2Value=greenHouseA10Value\nmsg.GHThershold=greenHouseThresholdValue\nif (columnOrder==\"Alternating\"){\n    if (columnTurn == 1 && greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}else if(columnOrder==\"Simultaneously\"){\n    if (greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}else{\n    if (columnTurn == 1 && greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}\n\nnode.status({});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 580,
        "wires": [
            [
                "8bb44cb4d4fc69f2"
            ]
        ]
    },
    {
        "id": "6f0fb2eba03b5286",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column1 in",
        "links": [
            "35afed580c2f9cb8",
            "54b2f37bdf946d8d",
            "8ff04f5c6d5105e7"
        ],
        "x": 415,
        "y": 300,
        "wires": [
            [
                "6a8198f1c51ff8fe"
            ]
        ]
    },
    {
        "id": "35afed580c2f9cb8",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column1 out",
        "mode": "link",
        "links": [
            "6f0fb2eba03b5286"
        ],
        "x": 2435,
        "y": 1000,
        "wires": []
    },
    {
        "id": "a86c6467c9fb6208",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Open 1W01",
        "mode": "link",
        "links": [
            "e58e678170ee2984"
        ],
        "x": 1005,
        "y": 920,
        "wires": []
    },
    {
        "id": "3cd802cee8dd1f24",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Close 1W01",
        "mode": "link",
        "links": [
            "c05f7cce29a93a77"
        ],
        "x": 1015,
        "y": 980,
        "wires": []
    },
    {
        "id": "ab602ecabc0d25f7",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Open V02",
        "mode": "link",
        "links": [
            "2d20461dc714f005"
        ],
        "x": 1865,
        "y": 920,
        "wires": []
    },
    {
        "id": "a20fd9bc1296289b",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "currentColumnTurn",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2230,
        "y": 1000,
        "wires": [
            [
                "35afed580c2f9cb8"
            ]
        ]
    },
    {
        "id": "76425c71d14518a4",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "Enable AutoMode in",
        "links": [
            "8812faf88912d9f5"
        ],
        "x": 235,
        "y": 320,
        "wires": [
            [
                "84a7a8976cc30cef"
            ]
        ]
    },
    {
        "id": "795d310aca7b7fc8",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2285,
        "y": 160,
        "wires": []
    },
    {
        "id": "15b6499cee45d76e",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2170,
        "y": 160,
        "wires": [
            [
                "795d310aca7b7fc8"
            ]
        ]
    },
    {
        "id": "cadf5b1b9ca973c9",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 3475,
        "y": 320,
        "wires": []
    },
    {
        "id": "34c0ddf69a5813f1",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Adsorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3390,
        "y": 320,
        "wires": [
            [
                "cadf5b1b9ca973c9"
            ]
        ]
    },
    {
        "id": "97a92bde58c686b8",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2015,
        "y": 660,
        "wires": []
    },
    {
        "id": "6ae929ce7f4e7fc5",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Desorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 660,
        "wires": [
            [
                "97a92bde58c686b8"
            ]
        ]
    },
    {
        "id": "06a6ab31812f1fe2",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2145,
        "y": 560,
        "wires": []
    },
    {
        "id": "417df9a511532c1c",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status standby",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Standby",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Standby",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2020,
        "y": 560,
        "wires": [
            [
                "06a6ab31812f1fe2"
            ]
        ]
    },
    {
        "id": "5a5f596a4b67b219",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 765,
        "y": 160,
        "wires": []
    },
    {
        "id": "406f6383187fe9a2",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Automation Disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Automation Disabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 160,
        "wires": [
            [
                "5a5f596a4b67b219"
            ]
        ]
    },
    {
        "id": "52b3b6e0a1de2a57",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >% criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n/*let a02ABSHum = global.get(\"1A02-AbsHum\")\nlet a01AbsHum = global.get(\"1A01-AbsHum\")\nlet percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = a02ABSHum*percentageThreshold\n\nmsg.a02AbsHum=a02ABSHum\nmsg.a01AbsHum=a01AbsHum\nmsg.percentage = percentageThreshold\nmsg.absHumCriteria=ceriteria\nif (a01AbsHum>ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}*/\n\n\nlet a02RHum = global.get(\"1A02-inRH\")\nlet a02Co2Avg = global.get(\"1A02-Co2Avg\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"]\nlet ceriteria2 = global.get(\"autoParams\")[\"1-Adsorption-CO2Threshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria && a02Co2Avg<(ceriteria2-30) ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3000,
        "y": 200,
        "wires": [
            [
                "a9d007d4a9c48541"
            ]
        ]
    },
    {
        "id": "fc6435998cefc6bb",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >%criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\nlet columnTurn = global.get(\"currentColumnTurn\")\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\nmsg.columnOrder = columnOrder;\nmsg.columnTurn = columnTurn;\n\n\n\n\nlet a02RHum = global.get(\"1A02-inRH\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 220,
        "wires": [
            [
                "5f2289263fde3989"
            ]
        ]
    },
    {
        "id": "5f2289263fde3989",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2070,
        "y": 220,
        "wires": [
            [
                "15b6499cee45d76e",
                "dc537c858811e487"
            ],
            [
                "6f8933a2c70149fe",
                "18dce7b82d182b07"
            ]
        ]
    },
    {
        "id": "0408c8ef268fd6c7",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "CO2(A02) is higher than threshold% of (A01)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n\nlet a02Co2Avg = global.get(\"1A02-Co2Avg\")\nlet a01Co2Avg = global.get(\"1A01-Co2Avg\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-Adsorption-CO2Threshold\"])/100\nlet ceriteria = (global.get(\"autoParams\")[\"1-Adsorption-CO2Threshold\"])\n\nmsg.a02Co2 = a02Co2Avg\nmsg.a01Co2 = a01Co2Avg\n//msg.Co2percentage = percentageThreshold\nmsg.Co2criteria=ceriteria\nif (a02Co2Avg >=ceriteria){\n    msg.payload=true\n    return msg;\n}else{\n    msg.payload=false\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 580,
        "wires": [
            [
                "e5ca675c4d11d63d"
            ]
        ]
    },
    {
        "id": "e5ca675c4d11d63d",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 580,
        "wires": [
            [
                "848a64c6d17fcc51",
                "01bcf5c6c290ddf4"
            ],
            [
                "0d478013e1c9454f",
                "49368708ccc2d66d"
            ]
        ]
    },
    {
        "id": "f6dd6aab9e5a8da0",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "CO2<threshold",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\nlet a02Co2Avg = global.get(\"1A02-Co2Avg\")\nlet desorptionCriteria = global.get(\"autoParams\")[\"1-Desorption-Co2StopThreshold\"]\n\n\nmsg.a02_des_Co2 = a02Co2Avg\nmsg.desorptionCriteria = desorptionCriteria\nif (a02Co2Avg < desorptionCriteria){\n    //go regen\n    msg.payload=true\n    return msg;\n}else{\n    //stay in desorption\n    msg.payload=false\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1000,
        "wires": [
            [
                "00f16324cfbdb6cb"
            ]
        ]
    },
    {
        "id": "00f16324cfbdb6cb",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1630,
        "y": 1000,
        "wires": [
            [
                "4ecb4bb9722c3390",
                "ff27912d5c4337a9"
            ],
            [
                "e93caa96a05963e5",
                "84e97f167e5aae8f"
            ]
        ]
    },
    {
        "id": "1bd7440dd1345ccb",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2990,
        "y": 100,
        "wires": [
            [
                "74fc24ba01777d2a"
            ]
        ]
    },
    {
        "id": "848a64c6d17fcc51",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 520,
        "wires": [
            [
                "0d478013e1c9454f"
            ]
        ]
    },
    {
        "id": "58c8ea55558d135f",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 640,
        "wires": [
            [
                "01bcf5c6c290ddf4"
            ]
        ]
    },
    {
        "id": "4ecb4bb9722c3390",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 920,
        "wires": [
            [
                "e93caa96a05963e5"
            ]
        ]
    },
    {
        "id": "632ac8dc5fed7c48",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2165,
        "y": 320,
        "wires": []
    },
    {
        "id": "6f8933a2c70149fe",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Adsorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2070,
        "y": 320,
        "wires": [
            [
                "632ac8dc5fed7c48"
            ]
        ]
    },
    {
        "id": "54b2f37bdf946d8d",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column1 out",
        "mode": "link",
        "links": [
            "6f0fb2eba03b5286"
        ],
        "x": 1155,
        "y": 300,
        "wires": []
    },
    {
        "id": "e9b37913f5b60a3f",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1185,
        "y": 340,
        "wires": []
    },
    {
        "id": "0222901eeef482cc",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Wait start time",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Wait start time",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 340,
        "wires": [
            [
                "e9b37913f5b60a3f"
            ]
        ]
    },
    {
        "id": "0ae41b89b05e2d68",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 3475,
        "y": 140,
        "wires": []
    },
    {
        "id": "5c9f5b090799d681",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration - Waiting Humidity(A02) criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "msg",
                "to": "Regeneration - Waiting Humidity(A02) criteria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3380,
        "y": 140,
        "wires": [
            [
                "0ae41b89b05e2d68"
            ]
        ]
    },
    {
        "id": "d4a3d180bb4d086f",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1145,
        "y": 680,
        "wires": []
    },
    {
        "id": "49368708ccc2d66d",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption - Waiting CO2(A02) > threshold% of (A01)",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "msg",
                "to": "Adsorption - Waiting CO2(A02) > thershold",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Adsorption - Waiting CO2(A02) > thershold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 680,
        "wires": [
            [
                "d4a3d180bb4d086f"
            ]
        ]
    },
    {
        "id": "9c831d5630432e66",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1805,
        "y": 1100,
        "wires": []
    },
    {
        "id": "84e97f167e5aae8f",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "msg",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 1100,
        "wires": [
            [
                "9c831d5630432e66"
            ]
        ]
    },
    {
        "id": "ff27912d5c4337a9",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1809.5078125,
        "y": 999.5078125,
        "wires": [
            [
                "ab602ecabc0d25f7",
                "4ff0327b911e407a"
            ]
        ]
    },
    {
        "id": "4ff0327b911e407a",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V03 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1960,
        "y": 1000,
        "wires": [
            [
                "a20fd9bc1296289b",
                "5c988f635d8d8665"
            ]
        ]
    },
    {
        "id": "5c988f635d8d8665",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLose V03",
        "mode": "link",
        "links": [
            "7ddae7dbd89f18a8"
        ],
        "x": 1995,
        "y": 940,
        "wires": []
    },
    {
        "id": "171d1a0621a73a89",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "60",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1460,
        "y": 240,
        "wires": [
            [
                "fc6435998cefc6bb",
                "545f2e5acea4933e"
            ]
        ]
    },
    {
        "id": "545f2e5acea4933e",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 180,
        "wires": [
            [
                "171d1a0621a73a89"
            ]
        ]
    },
    {
        "id": "f1dd27c32696cbd9",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1125,
        "y": 60,
        "wires": []
    },
    {
        "id": "e437df1fc03b7d99",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 60,
        "wires": [
            [
                "f1dd27c32696cbd9"
            ]
        ]
    },
    {
        "id": "a9caf57e5def89d5",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "prepare for Regen",
        "mode": "link",
        "links": [
            "c6d3cd56f3a8d311"
        ],
        "x": 1045,
        "y": 160,
        "wires": []
    },
    {
        "id": "61e175367b1c8129",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "regen prep done",
        "links": [
            "bebd69e244d3a07b"
        ],
        "x": 1315,
        "y": 240,
        "wires": [
            [
                "f170d5c203c1f297"
            ]
        ]
    },
    {
        "id": "dc537c858811e487",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN1 Regen",
        "mode": "link",
        "links": [
            "0b1ad9e67604268e"
        ],
        "x": 2215,
        "y": 200,
        "wires": []
    },
    {
        "id": "8612b9f1fba2ee2a",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN1 Regen Applied",
        "links": [
            "2685bc412dc5113c"
        ],
        "x": 2385,
        "y": 200,
        "wires": [
            [
                "de5f92360682d007"
            ]
        ]
    },
    {
        "id": "18dce7b82d182b07",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN1_Apply ADS",
        "mode": "link",
        "links": [
            "8612bc81c786ca50"
        ],
        "x": 95,
        "y": 580,
        "wires": []
    },
    {
        "id": "f5b501d03fb94fe9",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN1 Adsorption done in",
        "links": [
            "6b7acbfc8ec8db40"
        ],
        "x": 305,
        "y": 580,
        "wires": [
            [
                "0d478013e1c9454f"
            ]
        ]
    },
    {
        "id": "068a69d98f6dc417",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN1 apply standby",
        "mode": "link",
        "links": [
            "a509d5e9291f4e93"
        ],
        "x": 1935,
        "y": 500,
        "wires": []
    },
    {
        "id": "a5fc9a2946d60f83",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "Start Spraying",
        "links": [
            "9da6ea4b072cd356"
        ],
        "x": 645,
        "y": 980,
        "wires": [
            [
                "e03ecf1a7e79fe1a"
            ]
        ]
    },
    {
        "id": "7574e6f9a28edfe6",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Apply desorption",
        "mode": "link",
        "links": [
            "f1f72b3fbccde903"
        ],
        "x": 255,
        "y": 980,
        "wires": []
    },
    {
        "id": "7cc572ecfe2d569c",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "Auto mode On",
        "property": "AutoMode",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 400,
        "y": 1640,
        "wires": [
            [
                "a3c02d6fa45ded38"
            ],
            [
                "0c6ddbeca2d6dbdd"
            ]
        ]
    },
    {
        "id": "eb75d37351c96b0f",
        "type": "inject",
        "z": "95d7a662357d5be5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 1640,
        "wires": [
            [
                "7cc572ecfe2d569c"
            ]
        ]
    },
    {
        "id": "0c6ddbeca2d6dbdd",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "Check start and shutdown time CLMN2",
        "func": "// Expected: msg.start = \"HH:MM\", msg.end = \"HH:MM\"\nlet stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\nfunction toMinutes(t) {\n    let parts = t.split(\":\");\n    return parseInt(parts[0]) * 60 + parseInt(parts[1]);\n}\n// Convert current time to Riyadh timezone (Asia/Riyadh)\nlet now = new Date();\nlet riyadhTimeString = now.toLocaleString(\"en-US\", { timeZone: \"Asia/Riyadh\" });\nlet riyadhDate = new Date(riyadhTimeString);\n\nlet currentMinutes = riyadhDate.getHours() * 60 + riyadhDate.getMinutes();\n\nlet start = toMinutes(global.get(\"autoParams\")[\"2-StartTime\"]);\nlet end = toMinutes(global.get(\"autoParams\")[\"ShutdownTime\"]);\n\nlet inRange = false;\n\n// Handle ranges that wrap past midnight (e.g. 22:00–03:00)\nif (start <= end) {\n    // Normal range\n    inRange = currentMinutes >= start && currentMinutes <= end;\n} else {\n    // Midnight wrap range\n    inRange = (currentMinutes >= start) || (currentMinutes <= end);\n}\n\nif(inRange){\n    flow.set(\"CLMN_2_finalRegenDone\", false); // Reset for next cycle\n    flow.set(\"CLMN_2_finalRegenActive\", false);\n    msg.payload=\"Start\"\n}\nelse if (!flow.get(\"CLMN_2_finalRegenDone\")){\n        msg.payload = \"Final Regeneration\"\n    flow.set(\"CLMN_2_finalRegenDone\", true)\n    flow.set(\"CLMN_2_finalRegenActive\", true);\n}else{\n    msg.payload = \"Shutdown\"\n}\nmsg.startTime=start\nmsg.endTime=end\nmsg.currentTime=currentMinutes\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1660,
        "wires": [
            [
                "07493791f48f5299"
            ]
        ]
    },
    {
        "id": "405327a2e2ba9f94",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2770,
        "y": 1620,
        "wires": [
            [
                "feb9b10fd93c4268"
            ]
        ]
    },
    {
        "id": "3328f81893b56044",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "Check permission status",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Standby",
                "vt": "str"
            },
            {
                "t": "else"
            },
            {
                "t": "eq",
                "v": "Start Desorption",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1690,
        "y": 2000,
        "wires": [
            [
                "7fb0b534605ceac9",
                "cb2ecae7272d42de",
                "84b2ab53c359e399"
            ],
            [],
            [
                "3c152e8135442fd6",
                "4d01314548f729a3",
                "37274fb51ca74313"
            ]
        ]
    },
    {
        "id": "7fb0b534605ceac9",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1180,
        "y": 1940,
        "wires": [
            [
                "2439a48691c17b57"
            ]
        ]
    },
    {
        "id": "817a16edf4bb41ef",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "water spraying",
        "func": "let waterBrusts = global.get(\"autoParams\")[\"2-Desorption-waterSprayBrusts\"] || 0;\nlet onTime = (1000 * global.get(\"autoParams\")[\"2-Desorption-WSBrustsLength\"]) || 1000;\nlet offTime = (1000 * global.get(\"autoParams\")[\"2-Desorption-WSIntervals\"]) || 1000;\nlet i = 0;\nlet co2Exceeded = false;\nnode.status({ fill: \"blue\", shape: \"ring\", text: \"current brust: \" + i });\nlet stop = global.get(\"AutoMode\") || false;\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null;\n}\nlet columnTurn = global.get(\"currentColumnTurn\");\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"];\nmsg.columnOrder = columnOrder;\nmsg.columnTurn = columnTurn;\nfunction iterate() {\n    let stop = global.get(\"AutoMode\") || false;\n    if (!stop) {\n        node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n        return null;\n    }\n\n    // Check CO2 threshold - send signal only once\n    if (!co2Exceeded) {\n        let co2Avg = global.get(\"2A12-Co2Avg\") || 0;\n        let threshold = global.get(\"autoParams\")[\"2-Desorption-Co2StopThreshold\"] || 9999;\n        if (co2Avg > threshold) {\n            co2Exceeded = true;\n            // Output 4: CO2 exceeded signal\n            node.send([null, null, null, { payload: true }]);\n        }\n    }\n\n    if (i >= waterBrusts) {\n        node.send([null, null, { payload: \"done\" }, null]);\n        node.status({});\n        return;\n    }\n\n    node.send([{ payload: true }, null, null, null]);\n    node.status({ fill: \"green\", shape: \"dot\", text: \"on - brust: \" + i + (co2Exceeded ? \" [CO2!]\" : \"\") });\n\n    setTimeout(() => {\n        node.send([null, { payload: true }, null, null]);\n        node.status({ fill: \"red\", shape: \"dot\", text: \"off\" });\n        setTimeout(() => {\n            i++;\n            iterate();\n        }, offTime);\n    }, onTime);\n}\niterate();\nreturn;",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 2400,
        "wires": [
            [
                "0a7f0db00a90e009"
            ],
            [
                "56125b61d42406bc"
            ],
            [
                "3e411b6dc798fe2e"
            ],
            [
                "211cb4ecc51c1926"
            ]
        ]
    },
    {
        "id": "3e411b6dc798fe2e",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1180,
        "y": 2420,
        "wires": [
            [
                "b6a00565a17a8a65"
            ]
        ]
    },
    {
        "id": "07493791f48f5299",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "which time",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Final Regeneration",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Shutdown",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 970,
        "y": 1660,
        "wires": [
            [
                "12c37212e4c6c33a",
                "1a032ee582914cb8"
            ],
            [
                "1a032ee582914cb8",
                "64fef1dd06bdbee2"
            ],
            [
                "72ac31e9b6ee4b88",
                "4bef7eb673b1a7d5"
            ],
            []
        ]
    },
    {
        "id": "1f67d8bf0e0a040b",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 turn off Heater ",
        "mode": "link",
        "links": [
            "d45dc857ec91a832"
        ],
        "x": 3575,
        "y": 1660,
        "wires": []
    },
    {
        "id": "1836a25bca3ee805",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3310,
        "y": 1620,
        "wires": [
            [
                "405327a2e2ba9f94",
                "69da4e5cd772ee81"
            ],
            [
                "ccf62723588c4599",
                "e434547edcacef19",
                "67d48f18bf079fd1",
                "148e43c40950e451"
            ]
        ]
    },
    {
        "id": "99f4db7df0a1f86f",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 430,
        "y": 2000,
        "wires": [
            [
                "7442edc13307494a"
            ]
        ]
    },
    {
        "id": "2439a48691c17b57",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "get permission status",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\nnode.status({ fill: \"green\", shape: \"ring\", text: \"running\" });\nlet columnTurn=global.get(\"currentColumnTurn\")\nlet greenHouseA10Value = global.get(\"3A10GHCo2\")||60\nlet greenHouseThresholdValue=global.get(\"autoParams\")[\"2-permission-GHCo2Threshold\"]\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\nmsg.colOrder=columnOrder\nmsg.columnTurn=columnTurn\nmsg.GHCo2Value=greenHouseA10Value\nmsg.GHThershold=greenHouseThresholdValue\n\nif (columnOrder==\"Alternating\"){\n    if (columnTurn == 2 && greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}else if(columnOrder==\"Simultaneously\"){\n    if (greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}else{\n    if (columnTurn == 2 && greenHouseA10Value < greenHouseThresholdValue) {\n        msg.payload = \"Start Desorption\"\n    } else {\n        msg.payload = \"Standby\"\n    }\n\n}\nnode.status({});\n\nmsg.columnOrder=columnOrder;\nmsg.columnTurn = columnTurn;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 2000,
        "wires": [
            [
                "3328f81893b56044"
            ]
        ]
    },
    {
        "id": "d540342637ed07e7",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column2 in",
        "links": [
            "eccc45278712b2fc",
            "2e31654178ddbf8d",
            "fac03af2e825f129"
        ],
        "x": 395,
        "y": 1720,
        "wires": [
            [
                "0c6ddbeca2d6dbdd"
            ]
        ]
    },
    {
        "id": "eccc45278712b2fc",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle CLMN2 out",
        "mode": "link",
        "links": [
            "d540342637ed07e7"
        ],
        "x": 2415,
        "y": 2420,
        "wires": []
    },
    {
        "id": "0a7f0db00a90e009",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Open 2W11",
        "mode": "link",
        "links": [
            "86567cf45245b2ee"
        ],
        "x": 985,
        "y": 2340,
        "wires": []
    },
    {
        "id": "56125b61d42406bc",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Close 2W11",
        "mode": "link",
        "links": [
            "ab6e740910978d95"
        ],
        "x": 995,
        "y": 2400,
        "wires": []
    },
    {
        "id": "e8a4489430a5d5a1",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 Open V02",
        "mode": "link",
        "links": [
            "e989b4793a13d2bb"
        ],
        "x": 1845,
        "y": 2340,
        "wires": []
    },
    {
        "id": "81dee7fbd7204b17",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "currentColumnTurn",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2210,
        "y": 2420,
        "wires": [
            [
                "eccc45278712b2fc"
            ]
        ]
    },
    {
        "id": "3684965bc780c5c6",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "Enable AutoMode in",
        "links": [
            "8812faf88912d9f5"
        ],
        "x": 215,
        "y": 1740,
        "wires": [
            [
                "7cc572ecfe2d569c"
            ]
        ]
    },
    {
        "id": "f2b7a38b5b32d866",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 2265,
        "y": 1580,
        "wires": []
    },
    {
        "id": "6c816b9664ca7abc",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2150,
        "y": 1580,
        "wires": [
            [
                "f2b7a38b5b32d866"
            ]
        ]
    },
    {
        "id": "2283da3a8deb578c",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 3535,
        "y": 1740,
        "wires": []
    },
    {
        "id": "e434547edcacef19",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Adsorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3450,
        "y": 1740,
        "wires": [
            [
                "2283da3a8deb578c"
            ]
        ]
    },
    {
        "id": "77a15581ebb3f24a",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1995,
        "y": 2080,
        "wires": []
    },
    {
        "id": "3c152e8135442fd6",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Desorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1900,
        "y": 2080,
        "wires": [
            [
                "77a15581ebb3f24a"
            ]
        ]
    },
    {
        "id": "f736e36f9bb7e09f",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 2125,
        "y": 1980,
        "wires": []
    },
    {
        "id": "cb2ecae7272d42de",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status standby",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Standby",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Standby",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2000,
        "y": 1980,
        "wires": [
            [
                "f736e36f9bb7e09f"
            ]
        ]
    },
    {
        "id": "ea02a7f9d70602ae",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 745,
        "y": 1580,
        "wires": []
    },
    {
        "id": "a3c02d6fa45ded38",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Automation Disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Automation Disabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1580,
        "wires": [
            [
                "ea02a7f9d70602ae"
            ]
        ]
    },
    {
        "id": "feb9b10fd93c4268",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >% criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n/*let a02ABSHum = global.get(\"1A02-AbsHum\")\nlet a01AbsHum = global.get(\"1A01-AbsHum\")\nlet percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = a02ABSHum*percentageThreshold\n\nmsg.a02AbsHum=a02ABSHum\nmsg.a01AbsHum=a01AbsHum\nmsg.percentage = percentageThreshold\nmsg.absHumCriteria=ceriteria\nif (a01AbsHum>ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}*/\n\n\nlet a02RHum = global.get(\"2A12-inRH\")\nlet a02Co2Avg = global.get(\"2A12-Co2Avg\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"2-regen-HumidtyDiffThreshold\"]\nlet ceriteria2 = global.get(\"autoParams\")[\"2-Adsorption-CO2Threshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria && a02Co2Avg<(ceriteria2-30) ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3060,
        "y": 1620,
        "wires": [
            [
                "1836a25bca3ee805",
                "bac5215146fd761a"
            ]
        ]
    },
    {
        "id": "83ae93f92893f8e5",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >%criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n\n\n\nlet a02RHum = global.get(\"2A12-inRH\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"2-regen-HumidtyDiffThreshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 1640,
        "wires": [
            [
                "3c3ee1f162e1db82"
            ]
        ]
    },
    {
        "id": "3c3ee1f162e1db82",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2050,
        "y": 1640,
        "wires": [
            [
                "6c816b9664ca7abc",
                "f2d6b111e9c307f5"
            ],
            [
                "ed7fd271ebf1513d",
                "67d48f18bf079fd1"
            ]
        ]
    },
    {
        "id": "7442edc13307494a",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "CO2(A02) is higher than threshold% of (A01)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n\n\nlet a02Co2Avg = global.get(\"2A12-Co2Avg\")\nlet a01Co2Avg = global.get(\"2A11-Co2Avg\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-Adsorption-CO2Threshold\"])/100\nlet ceriteria = (global.get(\"autoParams\")[\"2-Adsorption-CO2Threshold\"])\n\nmsg.a02Co2 = a02Co2Avg\nmsg.a01Co2 = a01Co2Avg\n//msg.Co2percentage = percentageThreshold\nmsg.Co2criteria=ceriteria\nif (a02Co2Avg >=ceriteria){\n    msg.payload=true\n    return msg;\n}else{\n    msg.payload=false\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 2000,
        "wires": [
            [
                "3ebcef04f5ef7318",
                "063819300504c1ab"
            ]
        ]
    },
    {
        "id": "3ebcef04f5ef7318",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2000,
        "wires": [
            [
                "d66fd822ceeec27a",
                "7fb0b534605ceac9"
            ],
            [
                "99f4db7df0a1f86f",
                "210ab24be53b8918"
            ]
        ]
    },
    {
        "id": "b6a00565a17a8a65",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "CO2<threshold",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\nlet a02Co2Avg = global.get(\"2A12-Co2Avg\")\nlet desorptionCriteria = global.get(\"autoParams\")[\"2-Desorption-Co2StopThreshold\"]\n\n\nmsg.a02_des_Co2 = a02Co2Avg\nmsg.desorptionCriteria = desorptionCriteria\nif (a02Co2Avg < desorptionCriteria){\n    //go regen\n    msg.payload=true\n    return msg;\n}else{\n    //stay in desorption\n    msg.payload=false\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 2420,
        "wires": [
            [
                "f8b89dbb030c330c"
            ]
        ]
    },
    {
        "id": "f8b89dbb030c330c",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1610,
        "y": 2420,
        "wires": [
            [
                "af0a6dafebf8aead",
                "9374be6b80de596c"
            ],
            [
                "3e411b6dc798fe2e",
                "fb1970342c37f789"
            ]
        ]
    },
    {
        "id": "ccf62723588c4599",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3050,
        "y": 1520,
        "wires": [
            [
                "405327a2e2ba9f94"
            ]
        ]
    },
    {
        "id": "d66fd822ceeec27a",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 1940,
        "wires": [
            [
                "99f4db7df0a1f86f"
            ]
        ]
    },
    {
        "id": "4d01314548f729a3",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1170,
        "y": 2060,
        "wires": [
            [
                "7fb0b534605ceac9"
            ]
        ]
    },
    {
        "id": "af0a6dafebf8aead",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 2340,
        "wires": [
            [
                "3e411b6dc798fe2e"
            ]
        ]
    },
    {
        "id": "92f99becce6b5679",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 2145,
        "y": 1740,
        "wires": []
    },
    {
        "id": "ed7fd271ebf1513d",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Adsorption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2050,
        "y": 1740,
        "wires": [
            [
                "92f99becce6b5679"
            ]
        ]
    },
    {
        "id": "063819300504c1ab",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 Automation_data_out",
        "mode": "link",
        "links": [],
        "x": 875,
        "y": 2080,
        "wires": []
    },
    {
        "id": "bac5215146fd761a",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Automation_data_out",
        "mode": "link",
        "links": [],
        "x": 3235,
        "y": 1580,
        "wires": []
    },
    {
        "id": "2e31654178ddbf8d",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column2 out",
        "mode": "link",
        "links": [
            "d540342637ed07e7"
        ],
        "x": 1225,
        "y": 1700,
        "wires": []
    },
    {
        "id": "775624d16728c5bc",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1235,
        "y": 1760,
        "wires": []
    },
    {
        "id": "4bef7eb673b1a7d5",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Wait start time",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Wait start time",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 1760,
        "wires": [
            [
                "775624d16728c5bc"
            ]
        ]
    },
    {
        "id": "b4ea74b334035bd2",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 3535,
        "y": 1560,
        "wires": []
    },
    {
        "id": "69da4e5cd772ee81",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration - Waiting Humidity(A02) criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "msg",
                "to": "Regeneration - Waiting Humidity(A02) criteria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3440,
        "y": 1560,
        "wires": [
            [
                "b4ea74b334035bd2"
            ]
        ]
    },
    {
        "id": "d3efc63ceaa8df37",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1125,
        "y": 2100,
        "wires": []
    },
    {
        "id": "210ab24be53b8918",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Adsorption - Waiting CO2(A02) > threshold% of (A01)",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "msg",
                "to": "Adsorption - Waiting CO2(A02) > threshold",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Adsorption - Waiting CO2(A02) > threshold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 2100,
        "wires": [
            [
                "d3efc63ceaa8df37"
            ]
        ]
    },
    {
        "id": "ebe6c6c91b3c7eb9",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1825,
        "y": 2540,
        "wires": []
    },
    {
        "id": "fb1970342c37f789",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "msg",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Desorption - CO2(A02) < Criteria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 2540,
        "wires": [
            [
                "ebe6c6c91b3c7eb9"
            ]
        ]
    },
    {
        "id": "9374be6b80de596c",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V12 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1789.5078125,
        "y": 2419.5078125,
        "wires": [
            [
                "e8a4489430a5d5a1",
                "b8084678fe4fe291"
            ]
        ]
    },
    {
        "id": "b8084678fe4fe291",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V13 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1940,
        "y": 2420,
        "wires": [
            [
                "81dee7fbd7204b17",
                "44777a65f27b2b93"
            ]
        ]
    },
    {
        "id": "44777a65f27b2b93",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLose V03",
        "mode": "link",
        "links": [
            "aa016c455a12fb99"
        ],
        "x": 1975,
        "y": 2360,
        "wires": []
    },
    {
        "id": "32fcf3e9500cffc7",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "60",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1440,
        "y": 1660,
        "wires": [
            [
                "83ae93f92893f8e5",
                "60046311d0888bc9"
            ]
        ]
    },
    {
        "id": "60046311d0888bc9",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1600,
        "wires": [
            [
                "32fcf3e9500cffc7"
            ]
        ]
    },
    {
        "id": "8f1cf00fc54460cc",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1185,
        "y": 1480,
        "wires": []
    },
    {
        "id": "12c37212e4c6c33a",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 1480,
        "wires": [
            [
                "8f1cf00fc54460cc"
            ]
        ]
    },
    {
        "id": "1a032ee582914cb8",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 prepare for Regen",
        "mode": "link",
        "links": [
            "d097ec325dfa3dfe"
        ],
        "x": 1125,
        "y": 1640,
        "wires": []
    },
    {
        "id": "92f16ca9c350c654",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 regen prep done",
        "links": [
            "fb211c1909c3cb2b"
        ],
        "x": 1295,
        "y": 1660,
        "wires": [
            [
                "a616cd2ed4b42afd"
            ]
        ]
    },
    {
        "id": "f2d6b111e9c307f5",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 Regen",
        "mode": "link",
        "links": [
            "7056e07b07286f10"
        ],
        "x": 2195,
        "y": 1620,
        "wires": []
    },
    {
        "id": "1b9f97d4feddbd4c",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 RegnApplied",
        "links": [
            "afc02b88914e387a"
        ],
        "x": 2375,
        "y": 1620,
        "wires": [
            [
                "b18aa80125e4c931"
            ]
        ]
    },
    {
        "id": "6fc3644db175cf3d",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 ADS Applied",
        "links": [
            "2802fd0fd273021d"
        ],
        "x": 285,
        "y": 2000,
        "wires": [
            [
                "99f4db7df0a1f86f"
            ]
        ]
    },
    {
        "id": "84b2ab53c359e399",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 apply standby",
        "mode": "link",
        "links": [
            "f8f4ea4c48b94722"
        ],
        "x": 1915,
        "y": 1920,
        "wires": []
    },
    {
        "id": "dd7bcffef525bdb2",
        "type": "link in",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 Start Spraying",
        "links": [
            "255474fc04b3abc6"
        ],
        "x": 625,
        "y": 2400,
        "wires": [
            [
                "817a16edf4bb41ef"
            ]
        ]
    },
    {
        "id": "37274fb51ca74313",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2 Apply desorption",
        "mode": "link",
        "links": [
            "2f29505056a2f29c"
        ],
        "x": 235,
        "y": 2400,
        "wires": []
    },
    {
        "id": "67d48f18bf079fd1",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLMN2_Apply ADS",
        "mode": "link",
        "links": [
            "fa6e9fac704f7d09"
        ],
        "x": 155,
        "y": 2000,
        "wires": []
    },
    {
        "id": "1b6d9b49b041feee",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1285,
        "y": 160,
        "wires": []
    },
    {
        "id": "20f7678e8db16217",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 160,
        "wires": [
            [
                "1b6d9b49b041feee"
            ]
        ]
    },
    {
        "id": "de5f92360682d007",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "final regen Active",
        "property": "CLMN_1_finalRegenActive",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2510,
        "y": 200,
        "wires": [
            [
                "74fc24ba01777d2a"
            ],
            [
                "099cef74096dea5d",
                "4d7a979aa1460453"
            ]
        ]
    },
    {
        "id": "8557d4920a2c3cbd",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2870,
        "y": 380,
        "wires": [
            [
                "57627517d4da63d1"
            ]
        ]
    },
    {
        "id": "099cef74096dea5d",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "final regen wait",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\nlet columnTurn = global.get(\"currentColumnTurn\")\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\nmsg.columnOrder = columnOrder;\nmsg.columnTurn = columnTurn;\nlet finalRegenTime = global.get(\"autoParams\")[\"shutdownRegenInterval\"]\n\nmsg.delay = finalRegenTime*60000\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2640,
        "y": 380,
        "wires": [
            [
                "8557d4920a2c3cbd",
                "07c5e2f682bf5f5c"
            ]
        ]
    },
    {
        "id": "4d7a979aa1460453",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2770,
        "y": 320,
        "wires": [
            [
                "0faff3f788c78ab8"
            ]
        ]
    },
    {
        "id": "0faff3f788c78ab8",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2896.333251953125,
        "y": 321.33331298828125,
        "wires": []
    },
    {
        "id": "57627517d4da63d1",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "final regen done",
        "rules": [
            {
                "t": "set",
                "p": "CLMN_1_finalRegenActive",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "CLMN_1_finalRegenDone",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3060,
        "y": 380,
        "wires": [
            [
                "5399cb07726365a2",
                "c2696e68a97aeef6",
                "7b45b109267864a0"
            ]
        ]
    },
    {
        "id": "5399cb07726365a2",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "turn off heater",
        "mode": "link",
        "links": [
            "ac7f07b9949a6114"
        ],
        "x": 3165,
        "y": 340,
        "wires": []
    },
    {
        "id": "e3e5d94990c940b7",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1245,
        "y": 1560,
        "wires": []
    },
    {
        "id": "64fef1dd06bdbee2",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 1560,
        "wires": [
            [
                "e3e5d94990c940b7"
            ]
        ]
    },
    {
        "id": "f170d5c203c1f297",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "final regen Active?",
        "property": "CLMN_1_finalRegenActive",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 300,
        "wires": [
            [
                "171d1a0621a73a89",
                "9b4d5f8d69c3ae52"
            ],
            [
                "dc537c858811e487"
            ]
        ]
    },
    {
        "id": "a616cd2ed4b42afd",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "final regen Active",
        "property": "CLMN_2_finalRegenActive",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 1720,
        "wires": [
            [
                "32fcf3e9500cffc7",
                "9f2c6901c05ba39c"
            ],
            [
                "f2d6b111e9c307f5"
            ]
        ]
    },
    {
        "id": "b18aa80125e4c931",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "final regen Active",
        "property": "CLMN_2_finalRegenActive",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2530,
        "y": 1620,
        "wires": [
            [
                "405327a2e2ba9f94"
            ],
            [
                "2792f00858e301a0",
                "8a588111faa18c5f"
            ]
        ]
    },
    {
        "id": "f9fec525e24bf303",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2950,
        "y": 1800,
        "wires": [
            [
                "086ce0bc8b30c7df"
            ]
        ]
    },
    {
        "id": "8a588111faa18c5f",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "final regen wait",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\nlet columnTurn = global.get(\"currentColumnTurn\")\nlet columnOrder = global.get(\"autoParams\")[\"columnsOrder\"]\nmsg.columnOrder = columnOrder;\nmsg.columnTurn = columnTurn;\nlet finalRegenTime = global.get(\"autoParams\")[\"shutdownRegenInterval\"]\n\nmsg.delay = finalRegenTime*60000\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2700,
        "y": 1800,
        "wires": [
            [
                "f9fec525e24bf303",
                "cb2e6c61deba485e"
            ]
        ]
    },
    {
        "id": "2792f00858e301a0",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2830,
        "y": 1740,
        "wires": [
            [
                "a6058ce37831b531"
            ]
        ]
    },
    {
        "id": "a6058ce37831b531",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2956.333251953125,
        "y": 1741.3333129882812,
        "wires": []
    },
    {
        "id": "086ce0bc8b30c7df",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "final regen done",
        "rules": [
            {
                "t": "set",
                "p": "CLMN_2_finalRegenActive",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "CLMN_2_finalRegenDone",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3120,
        "y": 1800,
        "wires": [
            [
                "6cbebc0d2a99cdfe",
                "e95f7814cff3bdee",
                "803c2912f5185349"
            ]
        ]
    },
    {
        "id": "6cbebc0d2a99cdfe",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "Trun off heater clmn 2",
        "mode": "link",
        "links": [
            "d45dc857ec91a832"
        ],
        "x": 3255,
        "y": 1740,
        "wires": []
    },
    {
        "id": "b7d3d7177f23fc50",
        "type": "inject",
        "z": "95d7a662357d5be5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 560,
        "y": 340,
        "wires": [
            [
                "709bcede5fdcd83d"
            ]
        ]
    },
    {
        "id": "709bcede5fdcd83d",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "function 1",
        "func": "msg.payload = \"Final Regeneration\"\nflow.set(\"CLMN_1_finalRegenDone\", false)\nflow.set(\"CLMN_1_finalRegenActive\", true);\nglobal.set(\"AutoMode\",\"1\")\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 340,
        "wires": [
            [
                "60a495957bddaa29"
            ]
        ]
    },
    {
        "id": "8ff04f5c6d5105e7",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column1 out & standby",
        "mode": "link",
        "links": [
            "6f0fb2eba03b5286",
            "a509d5e9291f4e93"
        ],
        "x": 4235,
        "y": 420,
        "wires": []
    },
    {
        "id": "fac03af2e825f129",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "repeat cycle column2 out & standby",
        "mode": "link",
        "links": [
            "d540342637ed07e7",
            "f8f4ea4c48b94722"
        ],
        "x": 4325,
        "y": 1840,
        "wires": []
    },
    {
        "id": "67b3ac9be8779234",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1060,
        "y": 280,
        "wires": [
            [
                "54b2f37bdf946d8d"
            ]
        ]
    },
    {
        "id": "72ac31e9b6ee4b88",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1120,
        "y": 1680,
        "wires": [
            [
                "2e31654178ddbf8d"
            ]
        ]
    },
    {
        "id": "bf1619cf78821e52",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "CLMN_1_finalRegenDone",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "CLMN_2_finalRegenDone",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "d86043da0486f332",
        "type": "inject",
        "z": "95d7a662357d5be5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 80,
        "wires": [
            [
                "bf1619cf78821e52"
            ]
        ]
    },
    {
        "id": "148e43c40950e451",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3480,
        "y": 1660,
        "wires": [
            [
                "1f67d8bf0e0a040b"
            ]
        ]
    },
    {
        "id": "f3b4d3bb6a495278",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3420,
        "y": 240,
        "wires": [
            [
                "db2e4248d2f81c5b"
            ]
        ]
    },
    {
        "id": "d64582c41aaa0e88",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3110,
        "y": 560,
        "wires": [
            [
                "9bbbcd68a20e850c"
            ],
            [
                "452b92b6d464b77b",
                "57627517d4da63d1"
            ]
        ]
    },
    {
        "id": "07c5e2f682bf5f5c",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >% criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n/*let a02ABSHum = global.get(\"1A02-AbsHum\")\nlet a01AbsHum = global.get(\"1A01-AbsHum\")\nlet percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = a02ABSHum*percentageThreshold\n\nmsg.a02AbsHum=a02ABSHum\nmsg.a01AbsHum=a01AbsHum\nmsg.percentage = percentageThreshold\nmsg.absHumCriteria=ceriteria\nif (a01AbsHum>ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}*/\n\n\nlet a02RHum = global.get(\"1A02-inRH\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2860,
        "y": 560,
        "wires": [
            [
                "d64582c41aaa0e88"
            ]
        ]
    },
    {
        "id": "452b92b6d464b77b",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2850,
        "y": 460,
        "wires": [
            [
                "8557d4920a2c3cbd",
                "9bbbcd68a20e850c"
            ]
        ]
    },
    {
        "id": "9bbbcd68a20e850c",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2590,
        "y": 560,
        "wires": [
            [
                "07c5e2f682bf5f5c"
            ]
        ]
    },
    {
        "id": "60d2af60e56abcb3",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2750,
        "y": 2040,
        "wires": [
            [
                "cb2e6c61deba485e"
            ]
        ]
    },
    {
        "id": "fad8ee6efee95ec0",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3290,
        "y": 2040,
        "wires": [
            [
                "60d2af60e56abcb3"
            ],
            [
                "fa0ba5d0d045f483",
                "086ce0bc8b30c7df"
            ]
        ]
    },
    {
        "id": "cb2e6c61deba485e",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "AHumidity(A01) is >% criteria AHumidity (A02)",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n/*let a02ABSHum = global.get(\"1A02-AbsHum\")\nlet a01AbsHum = global.get(\"1A01-AbsHum\")\nlet percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = a02ABSHum*percentageThreshold\n\nmsg.a02AbsHum=a02ABSHum\nmsg.a01AbsHum=a01AbsHum\nmsg.percentage = percentageThreshold\nmsg.absHumCriteria=ceriteria\nif (a01AbsHum>ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}*/\n\n\nlet a02RHum = global.get(\"2A12-inRH\")\n//let a01RHum = global.get(\"1A01-inRH\")\n//let percentageThreshold = (global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"])/100\nlet ceriteria = global.get(\"autoParams\")[\"2-regen-HumidtyDiffThreshold\"]\n\nmsg.a02AbsHum = a02RHum\n//msg.a01AbsHum = a01RHum\n//msg.percentage = percentageThreshold\nmsg.rHumCriteria=ceriteria\nif (a02RHum <ceriteria ){\n    //go adsorption\n    msg.payload = true\n    return msg;\n    \n}else{\n    //go regen\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3040,
        "y": 2040,
        "wires": [
            [
                "fad8ee6efee95ec0"
            ]
        ]
    },
    {
        "id": "fa0ba5d0d045f483",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3030,
        "y": 1940,
        "wires": [
            [
                "60d2af60e56abcb3",
                "f9fec525e24bf303"
            ]
        ]
    },
    {
        "id": "c2696e68a97aeef6",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration - cooldown",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3270,
        "y": 460,
        "wires": [
            [
                "b51adb18de9913f9"
            ]
        ]
    },
    {
        "id": "b51adb18de9913f9",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 3396.333251953125,
        "y": 461.33331298828125,
        "wires": []
    },
    {
        "id": "e95f7814cff3bdee",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Final Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Final Regeneration - cooldown",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3330,
        "y": 1900,
        "wires": [
            [
                "92574d1f70639482"
            ]
        ]
    },
    {
        "id": "92574d1f70639482",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 3456.333251953125,
        "y": 1901.3333129882812,
        "wires": []
    },
    {
        "id": "803c2912f5185349",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3570,
        "y": 1840,
        "wires": [
            [
                "872aaa7bf7419fec"
            ]
        ]
    },
    {
        "id": "bfb7c0971a80fe35",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 4110,
        "y": 1840,
        "wires": [
            [
                "803c2912f5185349"
            ],
            [
                "31fdf4f14cf6cb3b",
                "fac03af2e825f129"
            ]
        ]
    },
    {
        "id": "872aaa7bf7419fec",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "heater cooled down?",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n\nlet heaterTemp = global.get(\"2PIDPV\")\n\nif (heaterTemp <40 ){\n    //cooldown is done\n    msg.payload = true\n    return msg;\n    \n}else{\n    //wait cooldown\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3780,
        "y": 1840,
        "wires": [
            [
                "bfb7c0971a80fe35"
            ]
        ]
    },
    {
        "id": "31fdf4f14cf6cb3b",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3850,
        "y": 1740,
        "wires": [
            [
                "803c2912f5185349"
            ]
        ]
    },
    {
        "id": "7b45b109267864a0",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "wait",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3550,
        "y": 420,
        "wires": [
            [
                "c491871f4330ede1"
            ]
        ]
    },
    {
        "id": "f6b71a28a415c502",
        "type": "switch",
        "z": "95d7a662357d5be5",
        "name": "check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 4090,
        "y": 420,
        "wires": [
            [
                "7b45b109267864a0"
            ],
            [
                "94b1602534539d1f",
                "8ff04f5c6d5105e7"
            ]
        ]
    },
    {
        "id": "c491871f4330ede1",
        "type": "function",
        "z": "95d7a662357d5be5",
        "name": "heater cooled down?",
        "func": "let stop = global.get(\"AutoMode\") || false;\n\nif (!stop) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Stopped\" });\n    return null; // stop this branch\n}\n\n\nlet heaterTemp = global.get(\"1PIDPV\")\n\nif (heaterTemp <40 ){\n    //cooldown is done\n    msg.payload = true\n    return msg;\n    \n}else{\n    //wait cooldown\n    msg.payload = false\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3760,
        "y": 420,
        "wires": [
            [
                "f6b71a28a415c502"
            ]
        ]
    },
    {
        "id": "94b1602534539d1f",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3830,
        "y": 320,
        "wires": [
            [
                "7b45b109267864a0"
            ]
        ]
    },
    {
        "id": "9ad00351d77f567a",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 1555,
        "y": 120,
        "wires": []
    },
    {
        "id": "9b4d5f8d69c3ae52",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - Initial wait",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1420,
        "y": 120,
        "wires": [
            [
                "9ad00351d77f567a"
            ]
        ]
    },
    {
        "id": "2a200f249959c411",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_AUTO_Status out",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 1675,
        "y": 1460,
        "wires": []
    },
    {
        "id": "9f2c6901c05ba39c",
        "type": "change",
        "z": "95d7a662357d5be5",
        "name": "status regen",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Regeneration",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Regeneration - Initial wait",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 1460,
        "wires": [
            [
                "2a200f249959c411"
            ]
        ]
    },
    {
        "id": "4f454c5f23f00735",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_Open V03_Desorp",
        "mode": "link",
        "links": [
            "a91115b20e76d8e1"
        ],
        "x": 1355,
        "y": 2600,
        "wires": []
    },
    {
        "id": "5826a53108238107",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V13 on",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1260,
        "y": 2520,
        "wires": [
            [
                "4f454c5f23f00735"
            ]
        ]
    },
    {
        "id": "211cb4ecc51c1926",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V12 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1063.666748046875,
        "y": 2511.3333129882812,
        "wires": [
            [
                "ecd319ddeca2cb48",
                "5826a53108238107"
            ]
        ]
    },
    {
        "id": "ecd319ddeca2cb48",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM2_Close V02_Desorp",
        "mode": "link",
        "links": [
            "f761d7939247ce4f"
        ],
        "x": 1073.666748046875,
        "y": 2591.3333129882812,
        "wires": []
    },
    {
        "id": "3546daa5d58dca7f",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V03 on",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1200,
        "y": 1100,
        "wires": [
            [
                "8c38c169120ca6c7"
            ]
        ]
    },
    {
        "id": "48b713c2c9bd400d",
        "type": "delay",
        "z": "95d7a662357d5be5",
        "name": "V02 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1003.666748046875,
        "y": 1091.3333129882812,
        "wires": [
            [
                "f743a5a91418bb97",
                "3546daa5d58dca7f"
            ]
        ]
    },
    {
        "id": "f743a5a91418bb97",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_Open V02_Desorp",
        "mode": "link",
        "links": [
            "80ef6666de84cde2"
        ],
        "x": 1013.666748046875,
        "y": 1171.3333129882812,
        "wires": []
    },
    {
        "id": "8c38c169120ca6c7",
        "type": "link out",
        "z": "95d7a662357d5be5",
        "name": "CLM1_Open V03_Desorp",
        "mode": "link",
        "links": [
            "4dad63c5a98beada"
        ],
        "x": 1295,
        "y": 1180,
        "wires": []
    },
    {
        "id": "e6106d0bc3891841",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "edb3219708e56efd",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Column 1 current status",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1580,
        "y": 480,
        "wires": []
    },
    {
        "id": "9d13758f880dfba3",
        "type": "link in",
        "z": "5e998f46e7500f44",
        "name": "CLM1_AUTO_Status in",
        "links": [
            "795d310aca7b7fc8",
            "cadf5b1b9ca973c9",
            "97a92bde58c686b8",
            "06a6ab31812f1fe2",
            "5a5f596a4b67b219",
            "632ac8dc5fed7c48",
            "e9b37913f5b60a3f",
            "0ae41b89b05e2d68",
            "d4a3d180bb4d086f",
            "0b4b3e649f46c8cd",
            "9c831d5630432e66",
            "f1dd27c32696cbd9",
            "38a20642314cf194",
            "1b6d9b49b041feee",
            "0faff3f788c78ab8",
            "a6058ce37831b531",
            "b51adb18de9913f9",
            "92574d1f70639482",
            "9ad00351d77f567a",
            "a57a79c023cbb9b8",
            "8346906d59d8d6a4"
        ],
        "x": 235,
        "y": 240,
        "wires": [
            [
                "3a1a36a2923731dd"
            ]
        ]
    },
    {
        "id": "3a1a36a2923731dd",
        "type": "change",
        "z": "5e998f46e7500f44",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLM_1_Automation.Status",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 240,
        "wires": [
            [
                "a9c0ecd22d8fd56b"
            ]
        ]
    },
    {
        "id": "a9c0ecd22d8fd56b",
        "type": "link out",
        "z": "5e998f46e7500f44",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 585,
        "y": 240,
        "wires": []
    },
    {
        "id": "51622ce0a62d0754",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "a2abbb9410c1e74d",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Column 2 current status",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1570,
        "y": 200,
        "wires": []
    },
    {
        "id": "53b8cc425155d0d7",
        "type": "link in",
        "z": "5e998f46e7500f44",
        "name": "CLM2_AUTO_Status in",
        "links": [
            "2283da3a8deb578c",
            "77a15581ebb3f24a",
            "8f1cf00fc54460cc",
            "92f99becce6b5679",
            "b4ea74b334035bd2",
            "d3efc63ceaa8df37",
            "d804eb4b4bdf059a",
            "ea02a7f9d70602ae",
            "ebe6c6c91b3c7eb9",
            "f2b7a38b5b32d866",
            "f736e36f9bb7e09f",
            "38a20642314cf194",
            "775624d16728c5bc",
            "e3e5d94990c940b7",
            "2a200f249959c411",
            "a57a79c023cbb9b8",
            "e01ed069b2df018a"
        ],
        "x": 235,
        "y": 180,
        "wires": [
            [
                "6246079a09b92b36"
            ]
        ]
    },
    {
        "id": "afaf1a4a787095a9",
        "type": "function",
        "z": "5e998f46e7500f44",
        "name": "parsing for coulmn 2",
        "func": "const status = global.get(\"CLMN_2_AutomationStatus\") || \"Automation disabled\";\nlet columnTurn = global.get(\"currentColumnTurn\")\n// 3. Logic to pick ONLY 4 relevant values\nlet displayMsgs = [{ topic: \"statusLabel\", payload: `Current Status: ${status}` }];\n\nif (status.includes(\"Adsorption\")) {\n    let a02Co2Avg = global.get(\"2A12-Co2Avg\")\n    let ceriteria = (global.get(\"autoParams\")[\"2-Adsorption-CO2Threshold\"])\n    displayMsgs.push({ topic: \"val1\", payload: \"A12 CO2 Avg \" + a02Co2Avg + \" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria \" + ceriteria + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn\" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n}\nelse if (status.includes(\"Regeneration\")) {\n    let a02RHum = global.get(\"2A12-inRH\")\n    let ceriteria = global.get(\"autoParams\")[\"2-regen-HumidtyDiffThreshold\"]\n    displayMsgs.push({ topic: \"val1\", label: \"A12 absolute Humidity\", payload: a02RHum });\n    displayMsgs.push({ topic: \"val2\", label: \"Humidity Criteria\", payload: ceriteria });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n} else if (status.includes(\"Desorption\")) {\n    let a02Co2Avg = global.get(\"2A12-Co2Avg\")\n    let desorptionCriteria = global.get(\"autoParams\")[\"2-Desorption-Co2StopThreshold\"]\n    displayMsgs.push({ topic: \"val1\", payload: \"A12 CO2 Avg: \" + a02Co2Avg + \" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria: \" + desorptionCriteria + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n} else if (status.includes(\"Standby\")) {\n    let greenHouseA10Value = global.get(\"3A10GHCo2\") || 60\n    let greenHouseThresholdValue = global.get(\"autoParams\")[\"2-permission-GHCo2Threshold\"]\n    displayMsgs.push({ topic: \"val1\", payload: \"GH CO2 Value : \" + greenHouseA10Value + \" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria: \" + greenHouseThresholdValue + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n}\nelse {\n    displayMsgs.push({ topic: \"val1\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val2\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val3\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val4\", label: \"--\", payload: \"--\" });\n}\n\nreturn [displayMsgs];\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 260,
        "wires": [
            [
                "0c462499d3b428ce"
            ]
        ]
    },
    {
        "id": "6246079a09b92b36",
        "type": "change",
        "z": "5e998f46e7500f44",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLM_2_Automation.Status",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 180,
        "wires": [
            [
                "528d31672e23ad77"
            ]
        ]
    },
    {
        "id": "528d31672e23ad77",
        "type": "link out",
        "z": "5e998f46e7500f44",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "d5c9d268cb885b66"
        ],
        "x": 595,
        "y": 180,
        "wires": []
    },
    {
        "id": "3796742867d23a3a",
        "type": "function",
        "z": "5e998f46e7500f44",
        "name": "parsing for coulmn 1",
        "func": "const status = global.get(\"CLMN_1_AutomationStatus\") || \"Automation disabled\";\nlet columnTurn = global.get(\"currentColumnTurn\")\n// 3. Logic to pick ONLY 4 relevant values\nlet displayMsgs = [{ topic: \"statusLabel\", payload: `Current Status: ${status}` }];\n\nif (status.includes(\"Adsorption\")) {\n    let a02Co2Avg = global.get(\"1A02-Co2Avg\")\n    let ceriteria = (global.get(\"autoParams\")[\"1-Adsorption-CO2Threshold\"])\n    displayMsgs.push({ topic: \"val1\", payload: \"A02 CO2 Avg: \" + a02Co2Avg + \" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria: \" + ceriteria + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Tur: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n} \nelse if (status.includes(\"Regeneration\")) {\n    let a02RHum = global.get(\"1A02-inRH\")\n    let ceriteria = global.get(\"autoParams\")[\"1-regen-HumidtyDiffThreshold\"]\n    displayMsgs.push({ topic: \"val1\", label: \"a02 absolute Humidity: \", payload: a02RHum });\n    displayMsgs.push({ topic: \"val2\", label: \"Humidity Criteria: \", payload: ceriteria });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n}else if (status.includes(\"Desorption\")) {\n    let a02Co2Avg = global.get(\"1A02-Co2Avg\")\n    let desorptionCriteria = global.get(\"autoParams\")[\"1-Desorption-Co2StopThreshold\"]\n    displayMsgs.push({ topic: \"val1\", payload: \"A02 CO2 Avg: \" + a02Co2Avg +\" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria: \" + desorptionCriteria + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \" + columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n}else if (status.includes(\"Standby\")) {\n    let greenHouseA10Value = global.get(\"3A10GHCo2\") || 60\n    let greenHouseThresholdValue = global.get(\"autoParams\")[\"1-permission-GHCo2Threshold\"]\n    displayMsgs.push({ topic: \"val1\", payload: \"GH CO2 Value : \" + greenHouseA10Value + \" ppm\" });\n    displayMsgs.push({ topic: \"val2\", payload: \"Criteria: \" + greenHouseThresholdValue + \" ppm\" });\n    displayMsgs.push({ topic: \"val3\", payload: \"column Turn: \"+ columnTurn });\n    displayMsgs.push({ topic: \"val4\", payload: \"--\" });\n}\nelse {\n    displayMsgs.push({ topic: \"val1\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val2\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val3\", label: \"--\", payload: \"--\" });\n    displayMsgs.push({ topic: \"val4\", label: \"--\", payload: \"--\" });\n}\n\nreturn [displayMsgs];\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 520,
        "wires": [
            [
                "cccf98d24fb1cad1"
            ]
        ]
    },
    {
        "id": "bf73bfad5e2ef28f",
        "type": "inject",
        "z": "5e998f46e7500f44",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 890,
        "y": 380,
        "wires": [
            [
                "3796742867d23a3a",
                "afaf1a4a787095a9"
            ]
        ]
    },
    {
        "id": "cccf98d24fb1cad1",
        "type": "switch",
        "z": "5e998f46e7500f44",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "statusLabel",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1330,
        "y": 520,
        "wires": [
            [
                "e6106d0bc3891841"
            ],
            [
                "05510b12006bc4f0"
            ],
            [
                "efd0e3740f487b09"
            ],
            [
                "f1176c70d7540c51"
            ],
            [
                "fa7c29d04c5bc98d"
            ]
        ]
    },
    {
        "id": "05510b12006bc4f0",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "edb3219708e56efd",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "val1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1520,
        "y": 520,
        "wires": []
    },
    {
        "id": "efd0e3740f487b09",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "edb3219708e56efd",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "val2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1520,
        "y": 560,
        "wires": []
    },
    {
        "id": "f1176c70d7540c51",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "edb3219708e56efd",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "val3",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1520,
        "y": 600,
        "wires": []
    },
    {
        "id": "fa7c29d04c5bc98d",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "edb3219708e56efd",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "val4",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1520,
        "y": 640,
        "wires": []
    },
    {
        "id": "0c462499d3b428ce",
        "type": "switch",
        "z": "5e998f46e7500f44",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "statusLabel",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "val4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1330,
        "y": 260,
        "wires": [
            [
                "51622ce0a62d0754"
            ],
            [
                "538437e65d95e2e4"
            ],
            [
                "c1e8ca8371efa3df"
            ],
            [
                "0f5080f4fc91b8e5"
            ],
            [
                "111f8b7e2cf9cfc2"
            ]
        ]
    },
    {
        "id": "538437e65d95e2e4",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "a2abbb9410c1e74d",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "val1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1510,
        "y": 240,
        "wires": []
    },
    {
        "id": "c1e8ca8371efa3df",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "a2abbb9410c1e74d",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "val2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1510,
        "y": 280,
        "wires": []
    },
    {
        "id": "0f5080f4fc91b8e5",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "a2abbb9410c1e74d",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "val3",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1510,
        "y": 320,
        "wires": []
    },
    {
        "id": "111f8b7e2cf9cfc2",
        "type": "ui-text",
        "z": "5e998f46e7500f44",
        "group": "a2abbb9410c1e74d",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "val4",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "x": 1510,
        "y": 360,
        "wires": []
    },
    {
        "id": "a037d2362fd47b93",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "b7c1199c7919c331"
        ],
        "x": 1955,
        "y": 320,
        "wires": []
    },
    {
        "id": "263cafbe9d14f2ae",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 260,
        "wires": [
            [
                "b6b83c0b8cbf9409",
                "855ba5f79ad0d37b"
            ]
        ]
    },
    {
        "id": "b6b83c0b8cbf9409",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_Open V02_Pre_Regen",
        "mode": "link",
        "links": [
            "2d20461dc714f005"
        ],
        "x": 575,
        "y": 340,
        "wires": []
    },
    {
        "id": "e3c8e70cb89312ce",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "regen fan speed",
        "func": "let fanSpeed=global.get(\"autoParams\")[\"1-regen-FanSpeed\"] \n\nmsg.payload = fanSpeed \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 260,
        "wires": [
            [
                "7c3b452f7014656e",
                "b543fa0137adcd64"
            ]
        ]
    },
    {
        "id": "7c3b452f7014656e",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust fan speed",
        "mode": "link",
        "links": [
            "f1e4aab8e9fb67df"
        ],
        "x": 1405,
        "y": 340,
        "wires": []
    },
    {
        "id": "b543fa0137adcd64",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1580,
        "y": 260,
        "wires": [
            [
                "cf214d0fcdf3a04e",
                "af194252ef185a68"
            ]
        ]
    },
    {
        "id": "cf214d0fcdf3a04e",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed",
        "mode": "link",
        "links": [
            "a65e9356ac5d5ccb"
        ],
        "x": 1645,
        "y": 320,
        "wires": []
    },
    {
        "id": "af194252ef185a68",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1850,
        "y": 260,
        "wires": [
            [
                "a037d2362fd47b93",
                "6302cd5bddf3562d"
            ]
        ]
    },
    {
        "id": "c6d3cd56f3a8d311",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "Prepare for Regen",
        "links": [
            "a9caf57e5def89d5"
        ],
        "x": 395,
        "y": 260,
        "wires": [
            [
                "263cafbe9d14f2ae"
            ]
        ]
    },
    {
        "id": "bebd69e244d3a07b",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "RegenPrep done",
        "mode": "link",
        "links": [
            "61e175367b1c8129"
        ],
        "x": 2415,
        "y": 260,
        "wires": []
    },
    {
        "id": "4fa6c5cc5f293ce5",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1V02Status",
        "property": "1V02Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 260,
        "wires": [
            [
                "e3c8e70cb89312ce",
                "7a763b718aa3f91a"
            ],
            [
                "263cafbe9d14f2ae"
            ]
        ]
    },
    {
        "id": "855ba5f79ad0d37b",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 260,
        "wires": [
            [
                "4fa6c5cc5f293ce5"
            ]
        ]
    },
    {
        "id": "7a763b718aa3f91a",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 140,
        "wires": [
            [
                "855ba5f79ad0d37b"
            ]
        ]
    },
    {
        "id": "58153041e529175f",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Status",
        "property": "1FN01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2230,
        "y": 260,
        "wires": [
            [
                "0c80da8511bdb4c0",
                "bebd69e244d3a07b"
            ],
            [
                "af194252ef185a68"
            ]
        ]
    },
    {
        "id": "6302cd5bddf3562d",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2020,
        "y": 260,
        "wires": [
            [
                "58153041e529175f"
            ]
        ]
    },
    {
        "id": "0c80da8511bdb4c0",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2120.333251953125,
        "y": 150.3333282470703,
        "wires": [
            [
                "6302cd5bddf3562d"
            ]
        ]
    },
    {
        "id": "687a42b16d5a5175",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "Get Fan speed",
        "func": "let params = global.get(\"autoParams\")\nlet fanSpeed = { payload: params[\"1-regen-FanSpeed\"] }\n\n//heatersSetpoint.payload = global.get(\"1-regen-T\")\n//fanSpeed.payload = global.get(\"1-regen-FanSpeed\")\nreturn fanSpeed;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 600,
        "wires": [
            [
                "e291987365abeafc",
                "df01790b1592d828",
                "241706b36b78642e"
            ]
        ]
    },
    {
        "id": "4e7dcee64f4e6b59",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CTRL_1H01_Setpoint out",
        "mode": "link",
        "links": [
            "7374501bf2acd69f"
        ],
        "x": 2405,
        "y": 760,
        "wires": []
    },
    {
        "id": "df01790b1592d828",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CTRL_1FN01_Speed out",
        "mode": "link",
        "links": [
            "f1e4aab8e9fb67df"
        ],
        "x": 625,
        "y": 520,
        "wires": []
    },
    {
        "id": "4684d8da37b7a5b8",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "H ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3130,
        "y": 620,
        "wires": [
            [
                "256e0a12b875a3d0",
                "a6c6906e3b0397a5"
            ]
        ]
    },
    {
        "id": "256e0a12b875a3d0",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "turn on Heater and fan close SV03 open SV02",
        "mode": "link",
        "links": [
            "d23910d5a02ab1f4"
        ],
        "x": 3115,
        "y": 720,
        "wires": []
    },
    {
        "id": "f2d37c199d280c49",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "Apply setpoints",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2520,
        "y": 620,
        "wires": [
            [
                "ca9092bcffc78745",
                "88a5a824a537d053"
            ]
        ]
    },
    {
        "id": "ca9092bcffc78745",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "Apply heater setpoint",
        "mode": "link",
        "links": [
            "f85db89020a0aff9"
        ],
        "x": 2655,
        "y": 720,
        "wires": []
    },
    {
        "id": "0b1ad9e67604268e",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN 1 Regen",
        "links": [
            "dc537c858811e487"
        ],
        "x": 355,
        "y": 600,
        "wires": [
            [
                "687a42b16d5a5175"
            ]
        ]
    },
    {
        "id": "e291987365abeafc",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 700,
        "y": 600,
        "wires": [
            [
                "b6e0406cea5c1d18",
                "8b77604fd2b12375"
            ]
        ]
    },
    {
        "id": "b6e0406cea5c1d18",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_Open V02_Regen",
        "mode": "link",
        "links": [
            "2d20461dc714f005",
            "7ddae7dbd89f18a8"
        ],
        "x": 755,
        "y": 680,
        "wires": []
    },
    {
        "id": "4e9939d0b30f3bf5",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1V02Status",
        "property": "1V02Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1150,
        "y": 600,
        "wires": [
            [
                "5cfe0bb70607bd65",
                "6478560797dc4553"
            ],
            [
                "e291987365abeafc"
            ]
        ]
    },
    {
        "id": "8b77604fd2b12375",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 900,
        "y": 600,
        "wires": [
            [
                "4e9939d0b30f3bf5"
            ]
        ]
    },
    {
        "id": "5cfe0bb70607bd65",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 480,
        "wires": [
            [
                "8b77604fd2b12375"
            ]
        ]
    },
    {
        "id": "6478560797dc4553",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1409.666748046875,
        "y": 609.6666717529297,
        "wires": [
            [
                "2419d74791a9c6b5",
                "a632bd8bfb1ab071"
            ]
        ]
    },
    {
        "id": "2419d74791a9c6b5",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed",
        "mode": "link",
        "links": [
            "a65e9356ac5d5ccb"
        ],
        "x": 1474.666748046875,
        "y": 669.6666717529297,
        "wires": []
    },
    {
        "id": "7eb3590dbbadb68e",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "turn on fan",
        "mode": "link",
        "links": [
            "b7c1199c7919c331"
        ],
        "x": 1755,
        "y": 680,
        "wires": []
    },
    {
        "id": "a632bd8bfb1ab071",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1650,
        "y": 620,
        "wires": [
            [
                "7eb3590dbbadb68e",
                "bfb40b8a8a377951"
            ]
        ]
    },
    {
        "id": "70f539166ce836a5",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Status",
        "property": "1FN01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2030,
        "y": 620,
        "wires": [
            [
                "6014c3251ace85c3",
                "f712095eb5f59fc0"
            ],
            [
                "a632bd8bfb1ab071"
            ]
        ]
    },
    {
        "id": "bfb40b8a8a377951",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1820,
        "y": 620,
        "wires": [
            [
                "70f539166ce836a5"
            ]
        ]
    },
    {
        "id": "6014c3251ace85c3",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920.333251953125,
        "y": 510.3333282470703,
        "wires": [
            [
                "bfb40b8a8a377951"
            ]
        ]
    },
    {
        "id": "74530719f224906e",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1PIDSV",
        "property": "1PIDSV",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "payload",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2920,
        "y": 620,
        "wires": [
            [
                "2f29dd1c5f413de9",
                "4684d8da37b7a5b8"
            ],
            [
                "f2d37c199d280c49"
            ]
        ]
    },
    {
        "id": "88a5a824a537d053",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2720,
        "y": 620,
        "wires": [
            [
                "74530719f224906e"
            ]
        ]
    },
    {
        "id": "2f29dd1c5f413de9",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2820.333251953125,
        "y": 510.3333282470703,
        "wires": [
            [
                "88a5a824a537d053"
            ]
        ]
    },
    {
        "id": "f712095eb5f59fc0",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "Get temp setpoint",
        "func": "let params = global.get(\"autoParams\")\nlet heaterSetpoint = { payload: params[\"1-regen-T\"] }\n\n\nreturn heaterSetpoint;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 620,
        "wires": [
            [
                "f2d37c199d280c49",
                "4e7dcee64f4e6b59"
            ]
        ]
    },
    {
        "id": "d107515f6a2350a4",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1H01Status",
        "property": "1H01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3550,
        "y": 620,
        "wires": [
            [
                "8dc379175bb19eec",
                "2685bc412dc5113c"
            ],
            [
                "4684d8da37b7a5b8"
            ]
        ]
    },
    {
        "id": "a6c6906e3b0397a5",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3340,
        "y": 620,
        "wires": [
            [
                "d107515f6a2350a4"
            ]
        ]
    },
    {
        "id": "8dc379175bb19eec",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3440.333251953125,
        "y": 510.3333282470703,
        "wires": [
            [
                "a6c6906e3b0397a5"
            ]
        ]
    },
    {
        "id": "2685bc412dc5113c",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN1RegnApplied",
        "mode": "link",
        "links": [
            "8612b9f1fba2ee2a"
        ],
        "x": 3755,
        "y": 620,
        "wires": []
    },
    {
        "id": "241706b36b78642e",
        "type": "debug",
        "z": "7faa3ab42fdf3d0b",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 720,
        "wires": []
    },
    {
        "id": "bf2cd2651abcf87f",
        "type": "debug",
        "z": "7faa3ab42fdf3d0b",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2560,
        "y": 360,
        "wires": []
    },
    {
        "id": "2adb8d54cbfe5244",
        "type": "inject",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 360,
        "y": 200,
        "wires": [
            [
                "263cafbe9d14f2ae"
            ]
        ]
    },
    {
        "id": "9ee967ec9a771a93",
        "type": "inject",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 337.33331298828125,
        "y": 538.3333129882812,
        "wires": [
            [
                "687a42b16d5a5175"
            ]
        ]
    },
    {
        "id": "3b40d54720f6a8ea",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "H OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 499.666748046875,
        "y": 889.6666717529297,
        "wires": [
            [
                "8822bbb942cb70e6",
                "19869128370f4622"
            ]
        ]
    },
    {
        "id": "8822bbb942cb70e6",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_1H01_OFF",
        "mode": "link",
        "links": [
            "3c96868f0b9621e4"
        ],
        "x": 585,
        "y": 940,
        "wires": []
    },
    {
        "id": "d45315e6c260a2bf",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1H01Status",
        "property": "1H01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 919.666748046875,
        "y": 889.6666717529297,
        "wires": [
            [
                "a3b76a391ee1ccb0"
            ],
            [
                "3b40d54720f6a8ea"
            ]
        ]
    },
    {
        "id": "19869128370f4622",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 709.666748046875,
        "y": 889.6666717529297,
        "wires": [
            [
                "d45315e6c260a2bf"
            ]
        ]
    },
    {
        "id": "a3b76a391ee1ccb0",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 820,
        "wires": [
            [
                "19869128370f4622"
            ]
        ]
    },
    {
        "id": "ac7f07b9949a6114",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "Turn OFF heater 1",
        "links": [
            "db2e4248d2f81c5b",
            "5399cb07726365a2"
        ],
        "x": 354.666748046875,
        "y": 889.6666717529297,
        "wires": [
            [
                "3b40d54720f6a8ea"
            ]
        ]
    },
    {
        "id": "5aa7b2eb8ab8c9eb",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "b7c1199c7919c331"
        ],
        "x": 1175,
        "y": 1240,
        "wires": []
    },
    {
        "id": "c48bea9e8ca86b4a",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust fan speed",
        "mode": "link",
        "links": [
            "f1e4aab8e9fb67df"
        ],
        "x": 645,
        "y": 1240,
        "wires": []
    },
    {
        "id": "ae1236debfc348b6",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 800,
        "y": 1180,
        "wires": [
            [
                "ae0b12cdb3fad181",
                "2cba732023466bd3"
            ]
        ]
    },
    {
        "id": "ae0b12cdb3fad181",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed",
        "mode": "link",
        "links": [
            "a65e9356ac5d5ccb"
        ],
        "x": 865,
        "y": 1240,
        "wires": []
    },
    {
        "id": "2cba732023466bd3",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1070,
        "y": 1180,
        "wires": [
            [
                "5aa7b2eb8ab8c9eb",
                "cc934f2d8261ccc6"
            ]
        ]
    },
    {
        "id": "4ad2bcc3f63c1b3c",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Status",
        "property": "1FN01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 1180,
        "wires": [
            [
                "90968bcf3975ff0a",
                "6b7acbfc8ec8db40"
            ],
            [
                "2cba732023466bd3"
            ]
        ]
    },
    {
        "id": "cc934f2d8261ccc6",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1240,
        "y": 1180,
        "wires": [
            [
                "4ad2bcc3f63c1b3c"
            ]
        ]
    },
    {
        "id": "90968bcf3975ff0a",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340.333251953125,
        "y": 1070.3333282470703,
        "wires": [
            [
                "cc934f2d8261ccc6",
                "2cba732023466bd3"
            ]
        ]
    },
    {
        "id": "5994adbf23b19c1f",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust adsorption fan",
        "func": "\nlet fanSpeed = global.get(\"autoParams\")[\"1-Adsorption-FanSpeed\"] || 0\n\nif (global.get(\"1V03Status\") || global.get(\"1V02Status\")){\n    msg.payload = fanSpeed\n}else{\n    msg.payload = 0\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1180,
        "wires": [
            [
                "ae1236debfc348b6",
                "c48bea9e8ca86b4a"
            ]
        ]
    },
    {
        "id": "8612bc81c786ca50",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN1 Adsorption Fan Speed in",
        "links": [
            "18dce7b82d182b07"
        ],
        "x": 345,
        "y": 1180,
        "wires": [
            [
                "5994adbf23b19c1f"
            ]
        ]
    },
    {
        "id": "6b7acbfc8ec8db40",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN1 adsorption fan done",
        "mode": "link",
        "links": [
            "f5b501d03fb94fe9"
        ],
        "x": 1645,
        "y": 1180,
        "wires": []
    },
    {
        "id": "0af8d3a81bdcbe75",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "adsorption fan speed adjsut",
        "info": "",
        "x": 920,
        "y": 1120,
        "wires": []
    },
    {
        "id": "8ee3f6840e934536",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Before regen wait",
        "info": "",
        "x": 1140,
        "y": 160,
        "wires": []
    },
    {
        "id": "0a0d1c36fcc2b852",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply regen state",
        "info": "",
        "x": 1316.333251953125,
        "y": 519.3333129882812,
        "wires": []
    },
    {
        "id": "e1f9d3c32779a240",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "turn off heater",
        "info": "",
        "x": 963.3333129882812,
        "y": 786.3333129882812,
        "wires": []
    },
    {
        "id": "d18e307cee57d331",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Freq =0",
        "property": "1FN01Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2050,
        "y": 900,
        "wires": [
            [
                "c84d74170c9d3fed",
                "6bb5d3238d9dde80"
            ],
            [
                "75504e2b5d59d9e4"
            ]
        ]
    },
    {
        "id": "14d1a2fe9e70cc51",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "48188a019460dd9b"
        ],
        "x": 1705,
        "y": 980,
        "wires": []
    },
    {
        "id": "38c861d8e5efaa3c",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1830,
        "y": 900,
        "wires": [
            [
                "d18e307cee57d331"
            ]
        ]
    },
    {
        "id": "c84d74170c9d3fed",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1930,
        "y": 840,
        "wires": [
            [
                "38c861d8e5efaa3c"
            ]
        ]
    },
    {
        "id": "a509d5e9291f4e93",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN1 Standby in",
        "links": [
            "068a69d98f6dc417",
            "8ff04f5c6d5105e7",
            "e3d14a9d1e60a082"
        ],
        "x": 1305,
        "y": 900,
        "wires": [
            [
                "75504e2b5d59d9e4"
            ]
        ]
    },
    {
        "id": "86a1bd7dc91f862e",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Standby",
        "info": "",
        "x": 1580,
        "y": 840,
        "wires": []
    },
    {
        "id": "75504e2b5d59d9e4",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1570,
        "y": 900,
        "wires": [
            [
                "14d1a2fe9e70cc51",
                "38c861d8e5efaa3c"
            ]
        ]
    },
    {
        "id": "6bb5d3238d9dde80",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2293.666748046875,
        "y": 891.3333129882812,
        "wires": [
            [
                "f0419d96ee475a28"
            ]
        ]
    },
    {
        "id": "f0419d96ee475a28",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_Close V02_Standby",
        "mode": "link",
        "links": [
            "7ddae7dbd89f18a8",
            "80ef6666de84cde2"
        ],
        "x": 2303.666748046875,
        "y": 971.3333129882812,
        "wires": []
    },
    {
        "id": "06d5bd16d49757cb",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust desorption fan",
        "func": "let fanSpeed = global.get(\"autoParams\")[\"1-Desorption-FanSpeed\"]\n\nmsg.payload = fanSpeed \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 1640,
        "wires": [
            [
                "54fe1a2eacf168c5",
                "0441abd45aa31cfb"
            ]
        ]
    },
    {
        "id": "54fe1a2eacf168c5",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust fan speed",
        "mode": "link",
        "links": [
            "f1e4aab8e9fb67df"
        ],
        "x": 1755,
        "y": 1720,
        "wires": []
    },
    {
        "id": "3f9aa599497d1f83",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption - Spraying water",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Desorption - Spraying water",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2010,
        "y": 1760,
        "wires": [
            [
                "0b4b3e649f46c8cd"
            ]
        ]
    },
    {
        "id": "0b4b3e649f46c8cd",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_AUTO_Status in",
        "mode": "link",
        "links": [
            "9d13758f880dfba3"
        ],
        "x": 2095,
        "y": 1760,
        "wires": []
    },
    {
        "id": "17204cd092219097",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Desorption fan Speed adjust",
        "info": "",
        "x": 880,
        "y": 1520,
        "wires": []
    },
    {
        "id": "f1f72b3fbccde903",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply desorption",
        "links": [
            "7574e6f9a28edfe6"
        ],
        "x": 385,
        "y": 1640,
        "wires": [
            [
                "9b51281b76442521"
            ]
        ]
    },
    {
        "id": "fc07559b97173558",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Freq =0",
        "property": "1FN01Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1020,
        "y": 1640,
        "wires": [
            [
                "66a00ad44b14fe78",
                "574340a35cb9d435"
            ],
            [
                "9b51281b76442521"
            ]
        ]
    },
    {
        "id": "bda9a6fe572ae332",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "48188a019460dd9b"
        ],
        "x": 675,
        "y": 1720,
        "wires": []
    },
    {
        "id": "55a32a550d7f6927",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 800,
        "y": 1640,
        "wires": [
            [
                "fc07559b97173558"
            ]
        ]
    },
    {
        "id": "66a00ad44b14fe78",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1580,
        "wires": [
            [
                "55a32a550d7f6927"
            ]
        ]
    },
    {
        "id": "9b51281b76442521",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 540,
        "y": 1640,
        "wires": [
            [
                "bda9a6fe572ae332",
                "55a32a550d7f6927"
            ]
        ]
    },
    {
        "id": "574340a35cb9d435",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1263.666748046875,
        "y": 1631.3333129882812,
        "wires": [
            [
                "d52e013585772451",
                "06d5bd16d49757cb"
            ]
        ]
    },
    {
        "id": "d52e013585772451",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_Open V02_Desorp",
        "mode": "link",
        "links": [
            "2d20461dc714f005",
            "7ddae7dbd89f18a8"
        ],
        "x": 1273.666748046875,
        "y": 1711.3333129882812,
        "wires": []
    },
    {
        "id": "47dd48fc9e098588",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "b7c1199c7919c331"
        ],
        "x": 2295,
        "y": 1700,
        "wires": []
    },
    {
        "id": "0441abd45aa31cfb",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1900,
        "y": 1640,
        "wires": [
            [
                "43780727072cb924",
                "6edf85f1c13359ee",
                "3f9aa599497d1f83"
            ]
        ]
    },
    {
        "id": "43780727072cb924",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed",
        "mode": "link",
        "links": [
            "a65e9356ac5d5ccb"
        ],
        "x": 1965,
        "y": 1700,
        "wires": []
    },
    {
        "id": "6edf85f1c13359ee",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2190,
        "y": 1640,
        "wires": [
            [
                "47dd48fc9e098588",
                "76b59b1dc907c753"
            ]
        ]
    },
    {
        "id": "a4aae55bcb80cd0e",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Status",
        "property": "1FN01Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2570,
        "y": 1640,
        "wires": [
            [
                "0d8890550c72f92c",
                "9da6ea4b072cd356"
            ],
            [
                "6edf85f1c13359ee"
            ]
        ]
    },
    {
        "id": "76b59b1dc907c753",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2360,
        "y": 1640,
        "wires": [
            [
                "a4aae55bcb80cd0e"
            ]
        ]
    },
    {
        "id": "0d8890550c72f92c",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2460.333251953125,
        "y": 1530.3333282470703,
        "wires": [
            [
                "76b59b1dc907c753"
            ]
        ]
    },
    {
        "id": "9da6ea4b072cd356",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "Desorption applying done",
        "mode": "link",
        "links": [
            "a5fc9a2946d60f83"
        ],
        "x": 2765,
        "y": 1640,
        "wires": []
    },
    {
        "id": "fd823111105788a9",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Fan ON",
        "mode": "link",
        "links": [
            "6df33e4d6a1a8207"
        ],
        "x": 1985,
        "y": 2540,
        "wires": []
    },
    {
        "id": "13260131312bea54",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 550,
        "y": 2480,
        "wires": [
            [
                "53856e8b313517fa",
                "5ff4c62203f87346"
            ]
        ]
    },
    {
        "id": "53856e8b313517fa",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM2_Open V12_Pre_Regen",
        "mode": "link",
        "links": [
            "e989b4793a13d2bb"
        ],
        "x": 605,
        "y": 2560,
        "wires": []
    },
    {
        "id": "d5e180cda2cc9128",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "regen fan speed",
        "func": "let fanSpeed=global.get(\"autoParams\")[\"2-regen-FanSpeed\"] \n\nmsg.payload = fanSpeed \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1350,
        "y": 2480,
        "wires": [
            [
                "e20e3959bc92f233",
                "2e58eb8a9cf08e41"
            ]
        ]
    },
    {
        "id": "e20e3959bc92f233",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 adjust fan speed",
        "mode": "link",
        "links": [
            "51134e2252ba24d4"
        ],
        "x": 1435,
        "y": 2560,
        "wires": []
    },
    {
        "id": "2e58eb8a9cf08e41",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1610,
        "y": 2480,
        "wires": [
            [
                "fb7565d11c1319f8",
                "a9966fe4889c049c"
            ]
        ]
    },
    {
        "id": "fb7565d11c1319f8",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 apply fan speed",
        "mode": "link",
        "links": [
            "993d9e6fabaa52f8"
        ],
        "x": 1675,
        "y": 2540,
        "wires": []
    },
    {
        "id": "a9966fe4889c049c",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1880,
        "y": 2480,
        "wires": [
            [
                "fd823111105788a9",
                "573cb4bc8d607a07"
            ]
        ]
    },
    {
        "id": "d097ec325dfa3dfe",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Prepare for Regen",
        "links": [
            "1a032ee582914cb8"
        ],
        "x": 425,
        "y": 2480,
        "wires": [
            [
                "13260131312bea54"
            ]
        ]
    },
    {
        "id": "fb211c1909c3cb2b",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 RegenPrep done",
        "mode": "link",
        "links": [
            "92f16ca9c350c654"
        ],
        "x": 2445,
        "y": 2480,
        "wires": []
    },
    {
        "id": "9ec8bc851b297008",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1V02Status",
        "property": "2V12Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1000,
        "y": 2480,
        "wires": [
            [
                "d5e180cda2cc9128",
                "2e466bc72e5c8d45"
            ],
            [
                "13260131312bea54"
            ]
        ]
    },
    {
        "id": "5ff4c62203f87346",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 750,
        "y": 2480,
        "wires": [
            [
                "9ec8bc851b297008"
            ]
        ]
    },
    {
        "id": "2e466bc72e5c8d45",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 2360,
        "wires": [
            [
                "5ff4c62203f87346"
            ]
        ]
    },
    {
        "id": "1934dd390fecdfdd",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Status",
        "property": "2FN11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2260,
        "y": 2480,
        "wires": [
            [
                "35a75a22046b62a0",
                "fb211c1909c3cb2b"
            ],
            [
                "a9966fe4889c049c"
            ]
        ]
    },
    {
        "id": "573cb4bc8d607a07",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2050,
        "y": 2480,
        "wires": [
            [
                "1934dd390fecdfdd"
            ]
        ]
    },
    {
        "id": "35a75a22046b62a0",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2150.333251953125,
        "y": 2370.3333282470703,
        "wires": [
            [
                "573cb4bc8d607a07"
            ]
        ]
    },
    {
        "id": "24acafa88d5b4d93",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "Get Fan speed",
        "func": "let params = global.get(\"autoParams\")\nlet fanSpeed = { payload: params[\"2-regen-FanSpeed\"] }\n\n//heatersSetpoint.payload = global.get(\"1-regen-T\")\n//fanSpeed.payload = global.get(\"1-regen-FanSpeed\")\nreturn fanSpeed;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 2820,
        "wires": [
            [
                "aac32218966fa6f0",
                "6b5dcc4839b69522",
                "1f754ff29dc0ce01"
            ]
        ]
    },
    {
        "id": "2b90992de9c737d2",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CTRL_2H11_Setpoint out",
        "mode": "link",
        "links": [
            "c9c851ba11e88b24"
        ],
        "x": 2435,
        "y": 2980,
        "wires": []
    },
    {
        "id": "6b5dcc4839b69522",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CTRL_2FN11_Speed out",
        "mode": "link",
        "links": [
            "51134e2252ba24d4"
        ],
        "x": 655,
        "y": 2740,
        "wires": []
    },
    {
        "id": "082338d2a4c88a5d",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "H ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3160,
        "y": 2840,
        "wires": [
            [
                "7777eb537a6221bf",
                "e2b1bfd56f086b51"
            ]
        ]
    },
    {
        "id": "7777eb537a6221bf",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 1H11 ON",
        "mode": "link",
        "links": [
            "e10185e7eac6d30e"
        ],
        "x": 3145,
        "y": 2940,
        "wires": []
    },
    {
        "id": "6c55c8ce0861b5e9",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "Apply setpoints",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2550,
        "y": 2840,
        "wires": [
            [
                "09d8813f376dd4a5",
                "a30daa29192c1079"
            ]
        ]
    },
    {
        "id": "09d8813f376dd4a5",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Apply heater setpoint",
        "mode": "link",
        "links": [
            "8db5d40bdb0d309c"
        ],
        "x": 2685,
        "y": 2940,
        "wires": []
    },
    {
        "id": "7056e07b07286f10",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Regen",
        "links": [
            "f2d6b111e9c307f5"
        ],
        "x": 385,
        "y": 2820,
        "wires": [
            [
                "24acafa88d5b4d93"
            ]
        ]
    },
    {
        "id": "aac32218966fa6f0",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 730,
        "y": 2820,
        "wires": [
            [
                "f65b6c12f213e1f7",
                "c79d5873df2b7cd5"
            ]
        ]
    },
    {
        "id": "f65b6c12f213e1f7",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM2_Open V02_Regen",
        "mode": "link",
        "links": [
            "aa016c455a12fb99",
            "e989b4793a13d2bb"
        ],
        "x": 785,
        "y": 2900,
        "wires": []
    },
    {
        "id": "28f12cf97890e9c0",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2V12Status",
        "property": "2V12Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 2820,
        "wires": [
            [
                "532b1af481754da9",
                "3e0e1ff51b2858b5"
            ],
            [
                "aac32218966fa6f0"
            ]
        ]
    },
    {
        "id": "c79d5873df2b7cd5",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 930,
        "y": 2820,
        "wires": [
            [
                "28f12cf97890e9c0"
            ]
        ]
    },
    {
        "id": "532b1af481754da9",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 2700,
        "wires": [
            [
                "c79d5873df2b7cd5"
            ]
        ]
    },
    {
        "id": "3e0e1ff51b2858b5",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1439.666748046875,
        "y": 2829.6666717529297,
        "wires": [
            [
                "5a302aa9f7b6d1cf",
                "a9b06ad0509d9803"
            ]
        ]
    },
    {
        "id": "5a302aa9f7b6d1cf",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 apply fan speed",
        "mode": "link",
        "links": [
            "993d9e6fabaa52f8"
        ],
        "x": 1504.666748046875,
        "y": 2889.6666717529297,
        "wires": []
    },
    {
        "id": "eea0bfc48448055f",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 turn on fan",
        "mode": "link",
        "links": [
            "6df33e4d6a1a8207"
        ],
        "x": 1785,
        "y": 2900,
        "wires": []
    },
    {
        "id": "a9b06ad0509d9803",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1680,
        "y": 2840,
        "wires": [
            [
                "eea0bfc48448055f",
                "9c69d46bb56ce493"
            ]
        ]
    },
    {
        "id": "ed35c72455f040a5",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2F11Status",
        "property": "2FN11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2060,
        "y": 2840,
        "wires": [
            [
                "95fd563c97ecb1eb",
                "7ffb4ef6513fae9c"
            ],
            [
                "a9b06ad0509d9803"
            ]
        ]
    },
    {
        "id": "9c69d46bb56ce493",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1850,
        "y": 2840,
        "wires": [
            [
                "ed35c72455f040a5"
            ]
        ]
    },
    {
        "id": "95fd563c97ecb1eb",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1950.333251953125,
        "y": 2730.3333282470703,
        "wires": [
            [
                "9c69d46bb56ce493"
            ]
        ]
    },
    {
        "id": "66ba815e52f437e4",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2PIDSV",
        "property": "2PIDSV",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "payload",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2950,
        "y": 2840,
        "wires": [
            [
                "4ade9ba70ad2e406",
                "082338d2a4c88a5d"
            ],
            [
                "6c55c8ce0861b5e9"
            ]
        ]
    },
    {
        "id": "a30daa29192c1079",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2750,
        "y": 2840,
        "wires": [
            [
                "66ba815e52f437e4"
            ]
        ]
    },
    {
        "id": "4ade9ba70ad2e406",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2850.333251953125,
        "y": 2730.3333282470703,
        "wires": [
            [
                "a30daa29192c1079"
            ]
        ]
    },
    {
        "id": "7ffb4ef6513fae9c",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "Get temp setpoint",
        "func": "let params = global.get(\"autoParams\")\nlet heaterSetpoint = { payload: params[\"2-regen-T\"] }\n\n\nreturn heaterSetpoint;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 2840,
        "wires": [
            [
                "6c55c8ce0861b5e9",
                "2b90992de9c737d2"
            ]
        ]
    },
    {
        "id": "ba5cb85741ed19ea",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2H11Status",
        "property": "2H11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3580,
        "y": 2840,
        "wires": [
            [
                "d7342b275ccf3809",
                "afc02b88914e387a"
            ],
            [
                "082338d2a4c88a5d"
            ]
        ]
    },
    {
        "id": "e2b1bfd56f086b51",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3370,
        "y": 2840,
        "wires": [
            [
                "ba5cb85741ed19ea"
            ]
        ]
    },
    {
        "id": "d7342b275ccf3809",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3470.333251953125,
        "y": 2730.3333282470703,
        "wires": [
            [
                "e2b1bfd56f086b51"
            ]
        ]
    },
    {
        "id": "afc02b88914e387a",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 RegnApplied",
        "mode": "link",
        "links": [
            "1b9f97d4feddbd4c"
        ],
        "x": 3785,
        "y": 2840,
        "wires": []
    },
    {
        "id": "1f754ff29dc0ce01",
        "type": "debug",
        "z": "7faa3ab42fdf3d0b",
        "name": "debug 16",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 2940,
        "wires": []
    },
    {
        "id": "ecc52c1df3c90713",
        "type": "debug",
        "z": "7faa3ab42fdf3d0b",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2590,
        "y": 2580,
        "wires": []
    },
    {
        "id": "3e24c971eada1a75",
        "type": "inject",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 390,
        "y": 2420,
        "wires": [
            [
                "13260131312bea54"
            ]
        ]
    },
    {
        "id": "d1496192edd3be8c",
        "type": "inject",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 367.33331298828125,
        "y": 2758.3333129882812,
        "wires": [
            [
                "24acafa88d5b4d93"
            ]
        ]
    },
    {
        "id": "2fc94f134fd3908c",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "H OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 529.666748046875,
        "y": 3109.6666717529297,
        "wires": [
            [
                "50abfad8dabfef4f",
                "9418bd56b0d99454"
            ]
        ]
    },
    {
        "id": "50abfad8dabfef4f",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM2_2H11_OFF",
        "mode": "link",
        "links": [
            "c5115244cbcb2d9e"
        ],
        "x": 615,
        "y": 3160,
        "wires": []
    },
    {
        "id": "1ef67b5b6fc0d05a",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2H11Status",
        "property": "2H11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 949.666748046875,
        "y": 3109.6666717529297,
        "wires": [
            [
                "8875b609e83f75d3"
            ],
            [
                "2fc94f134fd3908c"
            ]
        ]
    },
    {
        "id": "9418bd56b0d99454",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 739.666748046875,
        "y": 3109.6666717529297,
        "wires": [
            [
                "1ef67b5b6fc0d05a"
            ]
        ]
    },
    {
        "id": "8875b609e83f75d3",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 3040,
        "wires": [
            [
                "9418bd56b0d99454"
            ]
        ]
    },
    {
        "id": "d45dc857ec91a832",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Turn OFF heater",
        "links": [
            "1f67d8bf0e0a040b",
            "6cbebc0d2a99cdfe",
            "64fca6cfbd027cf4"
        ],
        "x": 384.666748046875,
        "y": 3109.6666717529297,
        "wires": [
            [
                "2fc94f134fd3908c"
            ]
        ]
    },
    {
        "id": "aadb86bee5b72c2d",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Turn On fan",
        "mode": "link",
        "links": [
            "6df33e4d6a1a8207"
        ],
        "x": 1205,
        "y": 3460,
        "wires": []
    },
    {
        "id": "9d61bf538a4577bf",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust fan speed",
        "mode": "link",
        "links": [
            "51134e2252ba24d4"
        ],
        "x": 675,
        "y": 3460,
        "wires": []
    },
    {
        "id": "267492c9b23b0444",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 830,
        "y": 3400,
        "wires": [
            [
                "09cf83999662e5af",
                "8b1acda05a7357c2"
            ]
        ]
    },
    {
        "id": "09cf83999662e5af",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 apply fan speed",
        "mode": "link",
        "links": [
            "993d9e6fabaa52f8"
        ],
        "x": 895,
        "y": 3460,
        "wires": []
    },
    {
        "id": "8b1acda05a7357c2",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1100,
        "y": 3400,
        "wires": [
            [
                "aadb86bee5b72c2d",
                "fea2b2a43e14a2c5"
            ]
        ]
    },
    {
        "id": "2a900b65d3b54c47",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2FN11Status",
        "property": "2FN11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 3400,
        "wires": [
            [
                "df58684f4b23db68",
                "2802fd0fd273021d"
            ],
            [
                "8b1acda05a7357c2"
            ]
        ]
    },
    {
        "id": "fea2b2a43e14a2c5",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1270,
        "y": 3400,
        "wires": [
            [
                "2a900b65d3b54c47"
            ]
        ]
    },
    {
        "id": "df58684f4b23db68",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370.333251953125,
        "y": 3290.3333282470703,
        "wires": [
            [
                "8b1acda05a7357c2",
                "fea2b2a43e14a2c5"
            ]
        ]
    },
    {
        "id": "eeb2ec38c3e71046",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust adsorption fan",
        "func": "\nlet fanSpeed = global.get(\"autoParams\")[\"2-Adsorption-FanSpeed\"] || 0\n\nif (global.get(\"2V13Status\") || global.get(\"2V12Status\")){\n    msg.payload = fanSpeed\n}else{\n    msg.payload = 0\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 3400,
        "wires": [
            [
                "267492c9b23b0444",
                "9d61bf538a4577bf"
            ]
        ]
    },
    {
        "id": "fa6e9fac704f7d09",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Adsorption Fan Speed in",
        "links": [
            "67d48f18bf079fd1"
        ],
        "x": 375,
        "y": 3400,
        "wires": [
            [
                "eeb2ec38c3e71046"
            ]
        ]
    },
    {
        "id": "2802fd0fd273021d",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 adsorption fan done",
        "mode": "link",
        "links": [
            "6fc3644db175cf3d"
        ],
        "x": 1675,
        "y": 3400,
        "wires": []
    },
    {
        "id": "1731a7698892a1bc",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "adsorption fan speed adjsut",
        "info": "",
        "x": 950,
        "y": 3340,
        "wires": []
    },
    {
        "id": "85105f466581f7bc",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Before regen wait",
        "info": "",
        "x": 1200,
        "y": 2380,
        "wires": []
    },
    {
        "id": "7a5f5c7af0a24409",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply regen state",
        "info": "",
        "x": 1346.333251953125,
        "y": 2739.3333129882812,
        "wires": []
    },
    {
        "id": "9798c282a4eb409f",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "turn off heater",
        "info": "",
        "x": 993.3333129882812,
        "y": 3006.3333129882812,
        "wires": []
    },
    {
        "id": "b3d74b221eb0b3ab",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2FN11 Freq =0",
        "property": "2FN11Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2080,
        "y": 3120,
        "wires": [
            [
                "4aed8502b2928eba",
                "76af1c84e84bc50e"
            ],
            [
                "3e31bc6f4835ace5"
            ]
        ]
    },
    {
        "id": "6d99ec4bfb77a2cd",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 2F11 OFF",
        "mode": "link",
        "links": [
            "47774455ab8e2c96"
        ],
        "x": 1735,
        "y": 3200,
        "wires": []
    },
    {
        "id": "d9b4d33849e1cbf6",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1860,
        "y": 3120,
        "wires": [
            [
                "b3d74b221eb0b3ab"
            ]
        ]
    },
    {
        "id": "4aed8502b2928eba",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1960,
        "y": 3060,
        "wires": [
            [
                "d9b4d33849e1cbf6"
            ]
        ]
    },
    {
        "id": "f8f4ea4c48b94722",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Standby in",
        "links": [
            "84b2ab53c359e399",
            "fac03af2e825f129",
            "d86189ca875a33b9"
        ],
        "x": 1335,
        "y": 3120,
        "wires": [
            [
                "3e31bc6f4835ace5"
            ]
        ]
    },
    {
        "id": "2f282b0fa3fa83cc",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Standby",
        "info": "",
        "x": 1610,
        "y": 3060,
        "wires": []
    },
    {
        "id": "3e31bc6f4835ace5",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1600,
        "y": 3120,
        "wires": [
            [
                "6d99ec4bfb77a2cd",
                "d9b4d33849e1cbf6"
            ]
        ]
    },
    {
        "id": "76af1c84e84bc50e",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 close",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2323.666748046875,
        "y": 3111.3333129882812,
        "wires": [
            [
                "f8e69cce0876ff82"
            ]
        ]
    },
    {
        "id": "f8e69cce0876ff82",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2_Close V02_Standby",
        "mode": "link",
        "links": [
            "aa016c455a12fb99",
            "f761d7939247ce4f"
        ],
        "x": 2333.666748046875,
        "y": 3191.3333129882812,
        "wires": []
    },
    {
        "id": "2c1926ee327c246b",
        "type": "function",
        "z": "7faa3ab42fdf3d0b",
        "name": "adjust desorption fan",
        "func": "let fanSpeed = global.get(\"autoParams\")[\"2-Desorption-FanSpeed\"]\n\nmsg.payload = fanSpeed \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 3860,
        "wires": [
            [
                "db3e69ea15232edf",
                "6af9ce26eb352071"
            ]
        ]
    },
    {
        "id": "db3e69ea15232edf",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 adjust fan speed_DES",
        "mode": "link",
        "links": [
            "51134e2252ba24d4"
        ],
        "x": 1785,
        "y": 3940,
        "wires": []
    },
    {
        "id": "20875407ddf0a582",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "open V12",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1380,
        "y": 3860,
        "wires": [
            [
                "2c1926ee327c246b",
                "1f279fa7342e49fb"
            ]
        ]
    },
    {
        "id": "4e2e4a94dd67fcf0",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Desorption - Spraying water",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Desorption - Spraying water",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2040,
        "y": 3980,
        "wires": [
            [
                "d804eb4b4bdf059a"
            ]
        ]
    },
    {
        "id": "d804eb4b4bdf059a",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM2_AUTO_Status in",
        "mode": "link",
        "links": [
            "53b8cc425155d0d7"
        ],
        "x": 2125,
        "y": 3980,
        "wires": []
    },
    {
        "id": "1540e9f5b1d04b48",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Desorption fan Speed adjust",
        "info": "",
        "x": 910,
        "y": 3740,
        "wires": []
    },
    {
        "id": "2f29505056a2f29c",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 apply desorption",
        "links": [
            "37274fb51ca74313"
        ],
        "x": 415,
        "y": 3860,
        "wires": [
            [
                "c6987cb2f73e0bd2"
            ]
        ]
    },
    {
        "id": "6a9e514c2dadcc14",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2FN11Freq =0",
        "property": "2FN11Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1050,
        "y": 3860,
        "wires": [
            [
                "159eb828c9e56935",
                "20875407ddf0a582"
            ],
            [
                "c6987cb2f73e0bd2"
            ]
        ]
    },
    {
        "id": "c222848494997c7d",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Turn off Fan",
        "mode": "link",
        "links": [
            "47774455ab8e2c96"
        ],
        "x": 705,
        "y": 3940,
        "wires": []
    },
    {
        "id": "de2e1c4c0fb26bfe",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 830,
        "y": 3860,
        "wires": [
            [
                "6a9e514c2dadcc14"
            ]
        ]
    },
    {
        "id": "159eb828c9e56935",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 3800,
        "wires": [
            [
                "de2e1c4c0fb26bfe"
            ]
        ]
    },
    {
        "id": "c6987cb2f73e0bd2",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 570,
        "y": 3860,
        "wires": [
            [
                "c222848494997c7d",
                "de2e1c4c0fb26bfe"
            ]
        ]
    },
    {
        "id": "8c7ef42f0a7f092c",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 Turn ON Fan_DES",
        "mode": "link",
        "links": [
            "6df33e4d6a1a8207"
        ],
        "x": 2325,
        "y": 3920,
        "wires": []
    },
    {
        "id": "6af9ce26eb352071",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F speed",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1930,
        "y": 3860,
        "wires": [
            [
                "e6f1abeaf5bff63a",
                "41b2472a6475a079",
                "4e2e4a94dd67fcf0"
            ]
        ]
    },
    {
        "id": "e6f1abeaf5bff63a",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 apply fan speed_DES",
        "mode": "link",
        "links": [
            "993d9e6fabaa52f8"
        ],
        "x": 1995,
        "y": 3920,
        "wires": []
    },
    {
        "id": "41b2472a6475a079",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F ON",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2220,
        "y": 3860,
        "wires": [
            [
                "8c7ef42f0a7f092c",
                "7397607b30034850"
            ]
        ]
    },
    {
        "id": "7ff298aaf195d4a1",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2FN11Status",
        "property": "2FN11Status",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2600,
        "y": 3860,
        "wires": [
            [
                "5bc711d8978e6775",
                "255474fc04b3abc6"
            ],
            [
                "41b2472a6475a079"
            ]
        ]
    },
    {
        "id": "7397607b30034850",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2390,
        "y": 3860,
        "wires": [
            [
                "7ff298aaf195d4a1"
            ]
        ]
    },
    {
        "id": "5bc711d8978e6775",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2490.333251953125,
        "y": 3750.3333282470703,
        "wires": [
            [
                "7397607b30034850"
            ]
        ]
    },
    {
        "id": "255474fc04b3abc6",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "Desorption applying done",
        "mode": "link",
        "links": [
            "dd7bcffef525bdb2"
        ],
        "x": 2795,
        "y": 3860,
        "wires": []
    },
    {
        "id": "fc383c5c3274b49b",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------CLMN2 ----------",
        "info": "",
        "x": 1360,
        "y": 2200,
        "wires": []
    },
    {
        "id": "b7bb0ca15996483d",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "2FN11 Freq =0",
        "property": "2FN11Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 4260,
        "wires": [
            [
                "4ae70b6555b87c1a",
                "ba2cf2b6ed258006"
            ],
            [
                "ab5ab85c1af81338"
            ]
        ]
    },
    {
        "id": "d778401d952d7dc4",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2 2F11 OFF",
        "mode": "link",
        "links": [
            "47774455ab8e2c96"
        ],
        "x": 795,
        "y": 4340,
        "wires": []
    },
    {
        "id": "18e68ee042be2a1d",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 4260,
        "wires": [
            [
                "b7bb0ca15996483d"
            ]
        ]
    },
    {
        "id": "4ae70b6555b87c1a",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 4200,
        "wires": [
            [
                "18e68ee042be2a1d"
            ]
        ]
    },
    {
        "id": "0be350c8e4f21506",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "High pressure relive",
        "info": "",
        "x": 700,
        "y": 4200,
        "wires": []
    },
    {
        "id": "ab5ab85c1af81338",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 4260,
        "wires": [
            [
                "d778401d952d7dc4",
                "18e68ee042be2a1d"
            ]
        ]
    },
    {
        "id": "ba2cf2b6ed258006",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V12 Open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1480,
        "y": 4260,
        "wires": [
            [
                "a22be4dfe1e33821"
            ]
        ]
    },
    {
        "id": "a22be4dfe1e33821",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2_Close V02_Standby",
        "mode": "link",
        "links": [
            "3075929150e908ec",
            "e989b4793a13d2bb"
        ],
        "x": 1490,
        "y": 4340,
        "wires": []
    },
    {
        "id": "a7e72cc0e99bfc48",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "Column 2 High pressure relive in",
        "links": [
            "2c50a8153162a629"
        ],
        "x": 455,
        "y": 4260,
        "wires": [
            [
                "ab5ab85c1af81338"
            ]
        ]
    },
    {
        "id": "06aeb92405e96f8e",
        "type": "switch",
        "z": "7faa3ab42fdf3d0b",
        "name": "1FN01Freq =0",
        "property": "1FN01Freq",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1060,
        "y": 1920,
        "wires": [
            [
                "ba6c21ae15f35a10",
                "c495588230308d1c"
            ],
            [
                "3eee48a3982f1df6"
            ]
        ]
    },
    {
        "id": "b79b7884db6675ac",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "apply fan speed,and turn on fan",
        "mode": "link",
        "links": [
            "48188a019460dd9b"
        ],
        "x": 715,
        "y": 2000,
        "wires": []
    },
    {
        "id": "29a333c7846eade6",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 840,
        "y": 1920,
        "wires": [
            [
                "06aeb92405e96f8e"
            ]
        ]
    },
    {
        "id": "ba6c21ae15f35a10",
        "type": "change",
        "z": "7faa3ab42fdf3d0b",
        "name": "reset delay",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 1860,
        "wires": [
            [
                "29a333c7846eade6"
            ]
        ]
    },
    {
        "id": "52480f4236d57f8a",
        "type": "link in",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN1 High pressiure relive",
        "links": [
            "2c50a8153162a629"
        ],
        "x": 315,
        "y": 1920,
        "wires": [
            [
                "3eee48a3982f1df6"
            ]
        ]
    },
    {
        "id": "1676922fda52ad36",
        "type": "comment",
        "z": "7faa3ab42fdf3d0b",
        "name": "Column 1 high pressure relieve",
        "info": "",
        "x": 660,
        "y": 1860,
        "wires": []
    },
    {
        "id": "3eee48a3982f1df6",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "F OFF",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 580,
        "y": 1920,
        "wires": [
            [
                "b79b7884db6675ac",
                "29a333c7846eade6"
            ]
        ]
    },
    {
        "id": "c495588230308d1c",
        "type": "delay",
        "z": "7faa3ab42fdf3d0b",
        "name": "V02 Open",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1303.666748046875,
        "y": 1911.3333129882812,
        "wires": [
            [
                "22dfc4f93e242e03"
            ]
        ]
    },
    {
        "id": "22dfc4f93e242e03",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLM1_Close V02_Standby",
        "mode": "link",
        "links": [
            "2d20461dc714f005",
            "3075929150e908ec"
        ],
        "x": 1313.666748046875,
        "y": 1991.3333129882812,
        "wires": []
    },
    {
        "id": "1f279fa7342e49fb",
        "type": "link out",
        "z": "7faa3ab42fdf3d0b",
        "name": "CLMN2_Close V02_Standby",
        "mode": "link",
        "links": [
            "e989b4793a13d2bb"
        ],
        "x": 1515,
        "y": 3940,
        "wires": []
    },
    {
        "id": "d729dac4bb5f3454",
        "type": "function",
        "z": "7321c2c219fd05d6",
        "name": "check heaters",
        "func": "let heater1=global.get(\"1PIDPV\")\nlet heater2 = global.get(\"2PIDPV\")\nlet heater1_secondary_sensor = global.get(\"1A02-inT\")\nlet heater2_secondary_sensor = global.get(\"2A12-inT\")\n\n\nif (heater1 > 60 || heater2 > 60 || heater1_secondary_sensor > 60 || heater2_secondary_sensor>60 ){\n    msg.payload=\"DANGER\"\n    msg.WAMsg = `DANGER: High Temperature Detected! system will trip now!\n    PID 1: ${ heater1 }°C\n    PID 2: ${ heater2 }°C\n    1A02 Temprature: ${ heater1_secondary_sensor }°C\n    2A12 Temprature: ${ heater2_secondary_sensor }°C`;\n    return msg;\n}\nreturn null",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 240,
        "wires": [
            [
                "c1284de13edfc2ae"
            ]
        ]
    },
    {
        "id": "b9088066c08f232e",
        "type": "inject",
        "z": "7321c2c219fd05d6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "3",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 450,
        "y": 240,
        "wires": [
            [
                "d729dac4bb5f3454",
                "a236ed0f3e528fdc"
            ]
        ]
    },
    {
        "id": "c1284de13edfc2ae",
        "type": "switch",
        "z": "7321c2c219fd05d6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "DANGER",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 870,
        "y": 240,
        "wires": [
            [
                "1e997c775c18bb8e",
                "6cfc7d12cb18fdbc",
                "6e00860e23c6461e",
                "2c50a8153162a629"
            ],
            []
        ]
    },
    {
        "id": "4da6cee8128e7783",
        "type": "revpi-output",
        "z": "7321c2c219fd05d6",
        "server": "0becb6a714bc83bf",
        "outputpin": "RevPiOutput",
        "overwritevalue": true,
        "outputvalue": "1",
        "x": 1610,
        "y": 220,
        "wires": []
    },
    {
        "id": "ac302f9ab7899af9",
        "type": "comment",
        "z": "7321c2c219fd05d6",
        "name": "Heater safety",
        "info": "",
        "x": 710,
        "y": 160,
        "wires": []
    },
    {
        "id": "a236ed0f3e528fdc",
        "type": "function",
        "z": "7321c2c219fd05d6",
        "name": "check pressure",
        "func": "let pressure1 = global.get(\"1A01-pressure\")\nlet pressure2 = global.get(\"2A11-pressure\")\n\nif (pressure1 > 1350 || pressure2 > 1350 ){\n    msg.payload=\"DANGER\"\n    return msg;\n}\nreturn null",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 580,
        "wires": [
            [
                "d315066e63d0f9e5"
            ]
        ]
    },
    {
        "id": "d315066e63d0f9e5",
        "type": "switch",
        "z": "7321c2c219fd05d6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "DANGER",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 580,
        "wires": [
            [
                "4b18c7c352a7913f"
            ],
            []
        ]
    },
    {
        "id": "4b18c7c352a7913f",
        "type": "delay",
        "z": "7321c2c219fd05d6",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 700,
        "y": 580,
        "wires": [
            [
                "c64d34ff8c37c04a"
            ]
        ]
    },
    {
        "id": "c64d34ff8c37c04a",
        "type": "function",
        "z": "7321c2c219fd05d6",
        "name": "check pressure",
        "func": "let pressure1 = global.get(\"1A01-pressure\")\nlet pressure2 = global.get(\"2A11-pressure\")\n\nif (pressure1 > 1085 || pressure2 > 1085 ){\n    msg.WAMsg = `DANGER: High Pressure Detected! system will trip now!\n    pressure 1A01: ${pressure1}\n    Pressure 2A11: ${pressure2}`;\n    return msg;\n}\nreturn null",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 580,
        "wires": [
            [
                "dabc5409aa929ac0",
                "6e00860e23c6461e"
            ]
        ]
    },
    {
        "id": "14090587f89349cf",
        "type": "comment",
        "z": "7321c2c219fd05d6",
        "name": "Pressure safety",
        "info": "",
        "x": 566.3333129882812,
        "y": 625.3333129882812,
        "wires": []
    },
    {
        "id": "1e997c775c18bb8e",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "7321c2c219fd05d6",
        "name": "",
        "credtype": "account",
        "account": "7b923af885d440a6",
        "text": "WAMsg",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1080,
        "y": 220,
        "wires": [
            [
                "77a9fbc554ce4661"
            ]
        ]
    },
    {
        "id": "f1d38499f2579b7c",
        "type": "inject",
        "z": "7321c2c219fd05d6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "WAMsg",
                "v": "Test from node-red",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1200,
        "y": 120,
        "wires": [
            [
                "896f3a610c8f9a27"
            ]
        ]
    },
    {
        "id": "896f3a610c8f9a27",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "7321c2c219fd05d6",
        "name": "",
        "credtype": "account",
        "account": "7b923af885d440a6",
        "text": "WAMsg",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1360,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "2c50a8153162a629",
        "type": "link out",
        "z": "7321c2c219fd05d6",
        "name": "Pressure danger ",
        "mode": "link",
        "links": [
            "52480f4236d57f8a",
            "a7e72cc0e99bfc48"
        ],
        "x": 1165,
        "y": 340,
        "wires": []
    },
    {
        "id": "dabc5409aa929ac0",
        "type": "switch",
        "z": "7321c2c219fd05d6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "DANGER",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1050,
        "y": 420,
        "wires": [
            [
                "5baf9863210b1b74",
                "2c50a8153162a629",
                "831de63b917b159b"
            ],
            []
        ]
    },
    {
        "id": "5baf9863210b1b74",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "7321c2c219fd05d6",
        "name": "",
        "credtype": "account",
        "account": "7b923af885d440a6",
        "text": "WAMsg",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1260,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "6cfc7d12cb18fdbc",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "7321c2c219fd05d6",
        "name": "",
        "credtype": "account",
        "account": "15fa2dfd1a943e0c",
        "text": "WAMsg",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1111.333251953125,
        "y": 268.33331298828125,
        "wires": [
            [
                "77a9fbc554ce4661"
            ]
        ]
    },
    {
        "id": "831de63b917b159b",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "7321c2c219fd05d6",
        "name": "",
        "credtype": "account",
        "account": "15fa2dfd1a943e0c",
        "text": "WAMsg",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1260,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "36ad1d6e66a78c60",
        "type": "change",
        "z": "7321c2c219fd05d6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "CLMN_1_AutomationStatus",
                "pt": "global",
                "to": "Automation disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "CLMN_2_AutomationStatus",
                "pt": "global",
                "to": "Automation disabled",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 400,
        "wires": [
            [
                "fe5064ba7269f554"
            ]
        ]
    },
    {
        "id": "3075929150e908ec",
        "type": "link in",
        "z": "7321c2c219fd05d6",
        "name": "continue safe stop",
        "links": [
            "a22be4dfe1e33821",
            "22dfc4f93e242e03"
        ],
        "x": 1455,
        "y": 400,
        "wires": [
            [
                "36ad1d6e66a78c60"
            ]
        ]
    },
    {
        "id": "fe5064ba7269f554",
        "type": "link out",
        "z": "7321c2c219fd05d6",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "b3cd73c2df7939fd"
        ],
        "x": 1835,
        "y": 420,
        "wires": []
    },
    {
        "id": "a5d6e8aa49ebbc25",
        "type": "file",
        "z": "7321c2c219fd05d6",
        "name": "Append /var/lib/revpi-nodered/csvlogs/filename",
        "filename": "/var/lib/revpi-nodered/csvlogs/safety_log.txt",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1220,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "6e00860e23c6461e",
        "type": "function",
        "z": "7321c2c219fd05d6",
        "name": "function 2",
        "func": "msg.payload = msg.WAMsg\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 540,
        "wires": [
            [
                "a5d6e8aa49ebbc25"
            ]
        ]
    },
    {
        "id": "77a9fbc554ce4661",
        "type": "delay",
        "z": "7321c2c219fd05d6",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1340,
        "y": 220,
        "wires": [
            [
                "4da6cee8128e7783"
            ]
        ]
    }
]